(this["webpackJsonphome-delivery-frontend"]=this["webpackJsonphome-delivery-frontend"]||[]).push([[0],{115:function(e,t,a){},135:function(e,t,a){e.exports={container:"AccountHeader_container__1P4-2",wrapper:"AccountHeader_wrapper__3WY2R",button:"AccountHeader_button__3bviw"}},163:function(e,t,a){},189:function(e,t,a){e.exports={container:"Confirmation_container__WysJe",checkmark:"Confirmation_checkmark__1mjrx"}},277:function(e,t,a){},281:function(e,t,a){},296:function(e,t,a){},300:function(e,t,a){e.exports={"sticky-notices":"StickyNotices_sticky-notices__2KFqH"}},311:function(e,t,a){e.exports=a.p+"static/media/food-instore@2x.5b9f3d98.jpg"},312:function(e,t,a){e.exports=a.p+"static/media/british_spotlight_16_9@2x.6eec4209.jpg"},313:function(e,t,a){e.exports=a.p+"static/media/fairtrade_spotlight_16_9@2x.a2354663.jpg"},321:function(e,t,a){e.exports=a(664)},444:function(e,t,a){},445:function(e,t,a){},446:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){},450:function(e,t,a){},451:function(e,t,a){},460:function(e,t){},462:function(e,t){},497:function(e,t){},498:function(e,t){},52:function(e,t,a){e.exports={wrapper:"Message_wrapper__3QqAE",info:"Message_info__3t_FN",container:"Message_container__W0nxd",title:"Message_title__uAId8",content:"Message_content__107ew",button:"Message_button__1sRj5",dismiss:"Message_dismiss__1mQ_S",dismissicon:"Message_dismissicon__8OltG"}},554:function(e,t,a){},555:function(e,t,a){},556:function(e,t,a){},558:function(e,t,a){},559:function(e,t,a){},560:function(e,t,a){},561:function(e,t,a){},562:function(e,t,a){},563:function(e,t,a){},564:function(e,t,a){},565:function(e,t,a){},566:function(e,t,a){},567:function(e,t,a){},568:function(e,t,a){},569:function(e,t,a){},579:function(e,t,a){},581:function(e,t,a){},587:function(e,t,a){},633:function(e,t,a){},634:function(e,t,a){},635:function(e,t,a){},636:function(e,t,a){},637:function(e,t,a){},638:function(e,t,a){},639:function(e,t,a){},640:function(e,t,a){},641:function(e,t,a){},642:function(e,t,a){},643:function(e,t,a){},644:function(e,t,a){},645:function(e,t,a){},646:function(e,t,a){},647:function(e,t,a){},648:function(e,t,a){},649:function(e,t,a){},650:function(e,t,a){},651:function(e,t,a){},652:function(e,t,a){},653:function(e,t,a){},659:function(e,t,a){},660:function(e,t,a){},661:function(e,t,a){},662:function(e,t,a){},664:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"isFetching",(function(){return K})),a.d(r,"itemsInBasket",(function(){return Q})),a.d(r,"distinctItemsInBasketCount",(function(){return Z})),a.d(r,"totalItemsInBasketCount",(function(){return J})),a.d(r,"basketUnavailable",(function(){return X})),a.d(r,"orderTotals",(function(){return $})),a.d(r,"getBasketItemGtins",(function(){return ee})),a.d(r,"getGtinsForItems",(function(){return te})),a.d(r,"basketTotal",(function(){return re})),a.d(r,"formattedBasketTotal",(function(){return ne})),a.d(r,"formattedOrderTotal",(function(){return oe})),a.d(r,"isBasketEmpty",(function(){return ce})),a.d(r,"isNotMinBasketValue",(function(){return se})),a.d(r,"meetsMinimumBasketValue",(function(){return le}));var n={};a.r(n),a.d(n,"SIGN_IN_SUCCESS_MESSAGE",(function(){return ct})),a.d(n,"REMOVE_MESSAGE",(function(){return st})),a.d(n,"REMOVE_MESSAGE_BY_ID",(function(){return lt})),a.d(n,"SET_PATHNAME_MESSAGE",(function(){return it})),a.d(n,"REMOVE_PATHNAME_MESSAGE",(function(){return ut})),a.d(n,"addMessage",(function(){return dt})),a.d(n,"addMessageOnly",(function(){return mt})),a.d(n,"removeMessage",(function(){return pt})),a.d(n,"removeMessageById",(function(){return ht})),a.d(n,"setPathnameMessage",(function(){return ft})),a.d(n,"removePathnameMessage",(function(){return bt}));var o={};a.r(o),a.d(o,"getCategories",(function(){return ya})),a.d(o,"isFetching",(function(){return Ea})),a.d(o,"getSelectedCategory",(function(){return ga})),a.d(o,"noCategoriesLoaded",(function(){return Oa})),a.d(o,"categoryById",(function(){return ja})),a.d(o,"rootCategories",(function(){return _a}));var c={};a.r(c),a.d(c,"getProducts",(function(){return Pa})),a.d(c,"isFetchingList",(function(){return Fa})),a.d(c,"isFetchingDetails",(function(){return La})),a.d(c,"getProductItems",(function(){return Da})),a.d(c,"getUnavailableProducts",(function(){return Ba})),a.d(c,"isAvailableInCurrentStore",(function(){return Ma})),a.d(c,"getProductById",(function(){return Ua})),a.d(c,"getProductsWithBasketQuantitySelector",(function(){return Ha})),a.d(c,"productsOfCurrentCategory",(function(){return Va})),a.d(c,"productsMatchingSearchTerm",(function(){return qa})),a.d(c,"productsMatchingGtins",(function(){return Ga})),a.d(c,"getBasketItems",(function(){return Wa})),a.d(c,"productCount",(function(){return za})),a.d(c,"getNextPageForProductFetch",(function(){return Ya})),a.d(c,"productCountByKey",(function(){return Ka})),a.d(c,"hasInfoForAllBasketItems",(function(){return Qa})),a.d(c,"hasHitMaxProductQuantity",(function(){return Za}));var s={};a.r(s),a.d(s,"FETCH_BASKET_PRODUCTS",(function(){return Ja})),a.d(s,"FETCH_BASKET_PRODUCTS_SUCCESS",(function(){return Xa})),a.d(s,"CHANGE_BASKET_QUANTITY",(function(){return $a})),a.d(s,"CHECK_CAN_ADD_TO_BASKET",(function(){return er})),a.d(s,"UPDATE_BASKET_REQUEST",(function(){return tr})),a.d(s,"UPDATE_BASKET_SUCCESS",(function(){return ar})),a.d(s,"UPDATE_BASKET_FAILURE",(function(){return rr})),a.d(s,"UNAVAILABLE_IN_NEW_STORE",(function(){return nr})),a.d(s,"REMOVE_UNAVAILABLE_BASKET_ITEMS",(function(){return or})),a.d(s,"STORE_SIGNED_IN_BASKET",(function(){return cr})),a.d(s,"EVALUATE_MEMBER_DISCOUNT",(function(){return sr})),a.d(s,"REMOVE_MEMBER_DISCOUNT",(function(){return lr})),a.d(s,"APPLY_VOUCHER_CODE",(function(){return ir})),a.d(s,"REMOVE_VOUCHER_CODE",(function(){return ur})),a.d(s,"CLEAR_VOUCHER_ERROR",(function(){return dr})),a.d(s,"updateBasketTotal",(function(){return mr})),a.d(s,"evaluateMemberDiscount",(function(){return pr})),a.d(s,"removeMemberDiscount",(function(){return hr})),a.d(s,"applyVoucherCode",(function(){return fr})),a.d(s,"removeVoucherCode",(function(){return br})),a.d(s,"clearVoucherError",(function(){return yr})),a.d(s,"changeBasketQuantity",(function(){return Er})),a.d(s,"checkCanAdd",(function(){return gr})),a.d(s,"loadBasketProducts",(function(){return vr})),a.d(s,"loadBasketProductsSuccess",(function(){return Or})),a.d(s,"updateBasketSuccess",(function(){return wr})),a.d(s,"updateBasketFailure",(function(){return kr})),a.d(s,"unavailableInStore",(function(){return jr})),a.d(s,"removeUnavailableBasketItems",(function(){return _r}));var l={};a.r(l),a.d(l,"FETCH_PRODUCT",(function(){return Sr})),a.d(l,"FETCH_PRODUCT_SUCCESS",(function(){return Cr})),a.d(l,"FETCH_PRODUCT_FAILURE",(function(){return xr})),a.d(l,"FETCH_INITIAL_PRODUCTS",(function(){return Nr})),a.d(l,"FETCH_PRODUCTS_BY_GTIN",(function(){return Tr})),a.d(l,"FETCH_MORE_PRODUCTS",(function(){return Ir})),a.d(l,"FETCH_MORE_PRODUCTS_SUCCESS",(function(){return Ar})),a.d(l,"FETCH_PRODUCTS_SUCCESS",(function(){return Rr})),a.d(l,"FETCH_PRODUCTS_CANCEL",(function(){return Pr})),a.d(l,"FETCH_PRODUCTS_FAILURE",(function(){return Fr})),a.d(l,"FETCH_SEARCH_PRODUCTS",(function(){return Lr})),a.d(l,"FETCH_SEARCH_PRODUCTS_SUCCESS",(function(){return Dr})),a.d(l,"FETCH_MORE_SEARCH_PRODUCTS",(function(){return Br})),a.d(l,"FETCH_MORE_SEARCH_PRODUCTS_SUCCESS",(function(){return Mr})),a.d(l,"loadInitialProducts",(function(){return Ur})),a.d(l,"loadProductsMatchingSearchTerm",(function(){return Hr})),a.d(l,"loadMoreProducts",(function(){return Vr})),a.d(l,"loadMoreSearchMatches",(function(){return qr})),a.d(l,"loadProductsSuccess",(function(){return Gr})),a.d(l,"loadSearchMatchesSuccess",(function(){return Wr})),a.d(l,"loadMoreProductsSuccess",(function(){return zr})),a.d(l,"loadMoreSearchMatchesSuccess",(function(){return Yr})),a.d(l,"loadProductsFailure",(function(){return Kr})),a.d(l,"loadProductById",(function(){return Qr})),a.d(l,"loadProductByIdSuccess",(function(){return Zr})),a.d(l,"loadProductsByGtin",(function(){return Jr}));var i={};a.r(i),a.d(i,"getOrder",(function(){return mn})),a.d(i,"getOrderStoreId",(function(){return pn})),a.d(i,"getStoreId",(function(){return hn})),a.d(i,"getOrderSlotId",(function(){return fn})),a.d(i,"getOrderVoucherCode",(function(){return bn})),a.d(i,"getOrderBasketId",(function(){return yn})),a.d(i,"getOrderSlotSelector",(function(){return gn})),a.d(i,"getOrderFulfilmentSelector",(function(){return vn})),a.d(i,"getDeliveryType",(function(){return On})),a.d(i,"isCollection",(function(){return wn})),a.d(i,"basketItemsFormattedForOrder",(function(){return kn})),a.d(i,"getOrderAddress",(function(){return jn})),a.d(i,"getOrderAddressDisplayName",(function(){return _n})),a.d(i,"isEligibleForCheckout",(function(){return Sn}));var u={};a.r(u),a.d(u,"SELECT_ADDRESS",(function(){return Wn})),a.d(u,"SELECT_ADDRESS_SUCCESS",(function(){return zn})),a.d(u,"PLACE_ORDER_REQUEST",(function(){return Yn})),a.d(u,"PLACE_ORDER_FAILURE",(function(){return Kn})),a.d(u,"PLACE_ORDER_FAILURE_SLOT",(function(){return Qn})),a.d(u,"PLACE_ORDER_SUCCESS",(function(){return Zn})),a.d(u,"SWITCH_FULFILMENT_TYPE",(function(){return Jn})),a.d(u,"SELECT_COLLECTION_STORE",(function(){return Xn})),a.d(u,"SELECT_DELIVERY_STORE",(function(){return $n})),a.d(u,"STORE_SELECTED",(function(){return eo})),a.d(u,"switchToCollection",(function(){return ao})),a.d(u,"switchToDelivery",(function(){return ro})),a.d(u,"selectAddress",(function(){return no})),a.d(u,"selectAddressSuccess",(function(){return oo})),a.d(u,"placeOrder",(function(){return co})),a.d(u,"placeOrderSuccess",(function(){return so})),a.d(u,"placeOrderFailure",(function(){return lo})),a.d(u,"placeOrderFailureSlot",(function(){return io})),a.d(u,"selectCollectionStore",(function(){return uo})),a.d(u,"selectDeliveryStore",(function(){return mo})),a.d(u,"notifyHasSelectedStore",(function(){return po}));var d={};a.r(d),a.d(d,"GET_CATEGORIES",(function(){return Cm})),a.d(d,"GET_CATEGORIES_SUCCESS",(function(){return xm})),a.d(d,"GET_CATEGORIES_FAILURE",(function(){return Nm})),a.d(d,"loadCategories",(function(){return Tm})),a.d(d,"loadCategoriesSuccess",(function(){return Im})),a.d(d,"loadCategoriesFailure",(function(){return Am}));var m={};a.r(m),a.d(m,"getMessages",(function(){return mb})),a.d(m,"getNonMajorMessageSelector",(function(){return hb})),a.d(m,"getInfoMessageSelector",(function(){return fb})),a.d(m,"getMinorErrorSelector",(function(){return bb})),a.d(m,"getMajorErrorSelector",(function(){return yb})),a.d(m,"getMessageByPathname",(function(){return Eb}));var p={};a.r(p),a.d(p,"SEARCH_REQUEST",(function(){return Tb})),a.d(p,"SEARCH_REQUEST_STARTED",(function(){return Ib})),a.d(p,"SEARCH_SUCCESS",(function(){return Ab})),a.d(p,"SEARCH_FAILURE",(function(){return Rb})),a.d(p,"SEARCH_CLEAR",(function(){return Pb})),a.d(p,"search",(function(){return Fb})),a.d(p,"searchStartRequest",(function(){return Lb})),a.d(p,"searchFailure",(function(){return Db})),a.d(p,"searchSuccess",(function(){return Bb})),a.d(p,"clearSearch",(function(){return Mb}));var h=a(0),f=a.n(h),b=a(49),y=a.n(b),E=a(5),g=a(9),v=a(1),O=a(36),w=a.n(O);const k=e=>!!e,j=(e,t)=>k(w()([e,"isFetching"],t)),_=e=>j("addresses",e),S=e=>e.addresses,C=e=>S(e).notInServiceArea,x=e=>S(e).error,N=e=>S(e).postcode,T=e=>S(e).postcodeCoordinates,I=e=>S(e).items,A=e=>Object(v.flow)(S,Object(v.getOr)(null,"deliveryStores.0.id"))(e),R=e=>e.ui,P=e=>R(e).cookieBannerDismissed,F=e=>R(e).setLocation&&!C(e);var L=a(22),D=a(3);const B=()=>Object(D.a)({},Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),{},window.env_config),M=()=>{const e=B().REACT_APP_BASKET_MAX_SIZE;return parseInt(e,10)||999},U=()=>{const e=B().REACT_APP_PRODUCT_MAX_QUANTITY_DEFAULT;return parseInt(e,10)||99},H=B().REACT_APP_DG_STORE_ID||"605dc6c0-d1c0-4461-8768-8e055606e011",V=e=>"collection"===e,q=24,G=24,W=32,z=32;function Y(e){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e)}const K=e=>j("basket",e),Q=e=>e.basket.items,Z=e=>Object(v.keys)(Q(e)).length,J=e=>Object(v.values)(Q(e)).reduce((e,t)=>e+(Object(v.get)("quantity",t)||0),0),X=e=>({products:Object(v.values)(e.basket.unavailable),unavailableIn:e.basket.unavailableIn}),$=({order:e})=>e?{items:e.subtotal,savings:e.discount,staffDiscount:e.staffDiscount,subtotal:e.subtotal-e.discount,total:e.total,voucherDiscount:e.voucherDiscount}:{},ee=e=>{const t=Q(e);return Object(v.map)(Object(v.get)("gtin"),t)},te=e=>Object(v.map)(Object(v.get)("gtin"),e),ae=e=>Object(L.a)(e,Y),re=()=>Object(L.a)($,e=>e.items-e.savings),ne=e=>ae(re(e)),oe=e=>ae(Object(L.a)($,e=>e.total)),ce=e=>Object(v.isEmpty)(e.basket.items),se=e=>re()(e)<15,le=e=>re()(e)>=15,ie="shopping-in/STORE_ID_CHANGED",ue=e=>({type:"shopping-in/SELECT_POSTCODE",payload:{postcode:e}}),de=({postcode:e,coordinates:t,collectionStores:a,deliveryStores:r})=>({type:"shopping-in/SELECT_POSTCODE_SUCCESS",payload:{postcode:e,coordinates:t,collectionStores:a,deliveryStores:r}}),me=e=>({type:"shopping-in/SELECT_POSTCODE_ERROR",payload:{error:e}}),pe=({products:e})=>({type:"shopping-in/PRODUCTS_IN_STORE_RANGE",payload:{products:e}}),he=e=>j("shoppingIn",e),fe=e=>e.shoppingIn,be=e=>fe(e).postcode,ye=e=>fe(e).error,Ee=e=>fe(e).coordinates,ge=e=>{const t=fe(e).deliveryStores;return Object(v.head)(t)||null},ve=e=>{const t=fe(e).collectionStores;return Object(v.head)(t)||null},Oe=e=>{const t=ge(e);return t?t.id:null},we=e=>/\b((?:(?:gir)|(?:[a-pr-uwyz])(?:(?:[0-9](?:[a-hjkpstuw]|[0-9])?)|(?:[a-hk-y][0-9](?:[0-9]|[abehmnprv-y])?)))) ?([0-9][abd-hjlnp-uw-z]{2})\b/i.test(e);var ke=a(16);function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _e(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Se=f.a.createElement("title",null,"Location pin icon"),Ce=f.a.createElement("path",{d:"M12 19.661c4.688-4.229 7-7.594 7-9.947C19 6.014 15.874 3 12 3S5 6.014 5 9.714c0 2.353 2.312 5.718 7 9.947z"}),xe=f.a.createElement("circle",{cx:12,cy:10,r:2.5});const Ne=e=>{let t=e.svgRef,a=e.title,r=_e(e,["svgRef","title"]);return f.a.createElement("svg",je({width:24,height:24,ref:t},r),void 0===a?Se:a?f.a.createElement("title",null,a):null,Ce,xe)},Te=f.a.forwardRef((e,t)=>f.a.createElement(Ne,je({svgRef:t},e)));a.p;const Ie=({width:e,height:t,stroke:a})=>f.a.createElement("svg",{width:e,height:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-dual-ring"},f.a.createElement("circle",{cx:"50",cy:"50","ng-attr-r":"{{config.radius}}","ng-attr-stroke-width":"{{config.width}}","ng-attr-stroke":"{{config.stroke}}","ng-attr-stroke-dasharray":"{{config.dasharray}}",fill:"none",strokeLinecap:"round",r:"40",strokeWidth:"8",stroke:a,strokeDasharray:"62.83185307179586 62.83185307179586"},f.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})));Ie.defaultProps={width:"24",height:"24",stroke:"#FFFFFF"};var Ae=Ie,Re=a(8),Pe=a.n(Re),Fe=(Pe.a.oneOfType([Pe.a.string,Pe.a.shape({title:Pe.a.string,content:Pe.a.string})]),a(124));a(444);const Le=({error:e})=>{const t=(e=>{if(e){if(Object(Fe.isString)(e)){const t=e=>e?"".concat(e.trim(),"."):null,a=e.split(".");return{title:t(a[0]),content:t(a[1])}}return e}return null})(e);return t?f.a.createElement("div",{className:"inline-error","data-testid":"inline-error"},f.a.createElement("h4",{className:"inline-error--title"},t.title),t.content?f.a.createElement("p",{className:"inline-error--content","data-testid":"inline-error--content"},t.content):null):null};Le.defaultProps={error:null};var De=Le;a(445);const Be=({btnClassName:e,btnContent:t,error:a,initialPostcode:r,isFetching:n,label:o,onSubmitPostcode:c,placeholder:s})=>{const l=Object(h.useState)(r||""),i=Object(ke.a)(l,2),u=i[0],d=i[1];return f.a.createElement("form",{className:"postcode-search",onSubmit:e=>{e.preventDefault(),c(u)}},f.a.createElement("div",{className:"form-item"},f.a.createElement("label",{htmlFor:"postcode",className:"form-label"},o),f.a.createElement("div",{className:"form-item--searchbox"},f.a.createElement("span",{className:"form-item--searchbox--input"},f.a.createElement("input",{autoComplete:"postal-code",className:"form-input","data-testid":"postcode-input",onChange:e=>d(e.target.value.toUpperCase()),placeholder:s,type:"text",value:u})),f.a.createElement("button",{className:e,type:"submit",disabled:""===u,"data-testid":"postcode-button"},n?f.a.createElement(Ae,null):t)),f.a.createElement(De,{error:a})))};Be.defaultProps={btnClassName:"postcode-search__button",btnContent:f.a.createElement(Te,null),initialPostcode:"",isFetching:!1,error:null,placeholder:"M60 0AG"};var Me=Be;const Ue={name:Pe.a.string,allergenPositions:Pe.a.arrayOf(Pe.a.shape({length:Pe.a.number,startAt:Pe.a.number}))};Pe.a.string,Pe.a.string,Pe.a.string,Pe.a.string,Pe.a.string,Pe.a.arrayOf(Pe.a.shape({mediaStorageKey:Pe.a.string,mediaDimensionWidth:Pe.a.number})),Pe.a.string,Pe.a.number,Pe.a.oneOfType([Pe.a.string,Pe.a.number]),Pe.a.string,Pe.a.arrayOf(Pe.a.string),Pe.a.string,Pe.a.string,Pe.a.string,Pe.a.string,Pe.a.string,Pe.a.arrayOf(Pe.a.shape(Ue)),Pe.a.string,Pe.a.number,Pe.a.arrayOf(Pe.a.shape({label:Pe.a.string,type:Pe.a.string}));const He=({images:e,alt:t,className:a,withBackground:r})=>f.a.createElement("section",{className:r?"product-view--image":"product-photo"},f.a.createElement("img",{srcSet:e.map(e=>"".concat(e.mediaStorageKey," ").concat(2.5*e.mediaDimensionWidth,"w")),className:a,alt:t}));He.defaultProps={className:null,withBackground:!1};var Ve=He;a(446);const qe=({displayPrice:e,images:t,name:a,quantity:r,size:n,sizeUnit:o})=>f.a.createElement("div",{className:"product-summary-card"},f.a.createElement("div",{className:"product-summary-card__media"},f.a.createElement(Ve,{images:t,alt:a})),f.a.createElement("div",{className:"product-summary-card__info"},f.a.createElement("h4",{className:"product-summary-card__name"},a),f.a.createElement("p",{className:"product-summary-card__label"},n," ",o),f.a.createElement("p",{className:"product-summary-card__totals"},f.a.createElement("span",{className:"product-summary-card__price"},e),r?f.a.createElement("span",{className:"product-summary-card__quantity"},"\xd7",r):null)));qe.defaultProps={size:null,sizeUnit:null};var Ge=qe,We=a(190),ze=(a(447),a(46)),Ye=a.n(ze),Ke=a(673);a(448);const Qe=({children:e,close:t,isPadded:a,visible:r})=>{const n=Ye()({"utility-sheet":!0,"utility-sheet--padded":a});return f.a.createElement(We.b,{isOpen:r,onDismiss:t,className:"overlay"},f.a.createElement(Ke.a,{appear:!0,in:r,timeout:250,classNames:"utility-sheet-"},f.a.createElement(We.a,{className:n},e)))};Qe.defaultProps={isPadded:!1};var Ze=Qe;const Je=({close:e,location:t,products:a})=>f.a.createElement("div",{"data-testid":"product-unavailable"},f.a.createElement("header",{className:"utility-sheet__header"},f.a.createElement("h3",{className:"utility-sheet__heading"},function(){const e="unavailable in ".concat(t);return a.length>1?"These products are ".concat(e):"This product is ".concat(e)}())),a.map(e=>{const t=e.displayPrice,a=e.images,r=e.name,n=e.quantity,o=e.size,c=e.sizeUnit;return f.a.createElement(Ge,{key:e.id,displayPrice:t,images:a,name:r,quantity:n,size:o,sizeUnit:c})}),f.a.createElement("footer",{className:"utility-sheet__footer"},f.a.createElement("button",{className:"btn btn--primary btn--full",type:"button",onClick:e},"Continue")));var Xe=()=>{const e=Object(E.c)(),t=()=>e({type:"ui/HIDE_CHECK_AVAILABILITY"}),a=Object(E.d)(he),r=Object(E.d)(X),n=r.products,o=r.unavailableIn,c=we(o)?o.toUpperCase():o,s=Object(E.d)(ye);return f.a.createElement(Ze,{isPadded:!0,visible:!0,close:t,"data-testid":"utility-sheet"},Object(v.isEmpty)(n)?f.a.createElement(f.a.Fragment,null,f.a.createElement(Me,{error:s,isFetching:a,label:"Check availability",onSubmitPostcode:t=>e(ue(t)),placeholder:"Enter a postcode"}),f.a.createElement("p",{className:"mv2"},"We need to know where you\u2019re shopping from so that we can show the correct product range.")):f.a.createElement(Je,{close:t,location:c,products:n}))};var $e=()=>{const e=Object(E.d)(F);return e?f.a.createElement(Xe,{visible:e}):null};function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function tt(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var at=f.a.createElement("path",{d:"m-197.1 259.4c0-2.7-.4-5.4-1.1-8.1-1-3.2-3.4-5.8-6.5-7-6.3-2.2-13.1-2.2-19.4 0-3.2 1.2-5.6 3.8-6.5 7-1.5 5.3-1.5 10.9 0 16.2 1 3.2 3.4 5.8 6.5 7 3.1 1.1 6.4 1.7 9.7 1.6 3.3 0 6.6-.6 9.7-1.6 3.2-1.2 5.6-3.8 6.5-7 .7-2.7 1.1-5.4 1.1-8.1zm-10.5 0c0 1.3-.2 2.7-.6 3.9-.5 1.7-2 3-3.8 3.4-1.7.3-3.4.3-5 0-1.8-.3-3.2-1.6-3.8-3.4-.8-2.6-.8-5.3 0-7.9.5-1.7 2-3 3.8-3.4 1.7-.3 3.4-.3 5 0 1.8.3 3.2 1.6 3.8 3.4.4 1.3.6 2.7.6 4m-27.9 43.9c1.5-5.3 1.5-10.9 0-16.2-1-3.2-3.4-5.8-6.5-7-6.3-2.2-13.1-2.2-19.4 0-3.2 1.2-5.6 3.8-6.5 7-1.5 5.3-1.5 10.9 0 16.2 1 3.2 3.4 5.8 6.5 7 6.3 2.2 13.1 2.2 19.4 0 3.1-1.1 5.6-3.7 6.5-7m-9.4-8c0 1.3-.2 2.7-.6 3.9-.5 1.7-2 3-3.8 3.4-1.7.3-3.4.3-5 0-1.8-.3-3.2-1.6-3.8-3.4-.8-2.6-.8-5.3 0-7.9.5-1.7 2-3 3.8-3.4 1.7-.3 3.4-.3 5 0 1.8.3 3.2 1.6 3.8 3.4.4 1.3.6 2.6.6 4m0-36h10.5c0-2.7-.4-5.4-1.1-8-1-3.2-3.4-5.8-6.5-7-6.3-2.2-13.1-2.2-19.4 0-3.2 1.2-5.6 3.8-6.5 7-1.5 5.3-1.5 10.9 0 16.2 1 3.2 3.4 5.8 6.5 7 3.1 1.1 6.4 1.6 9.7 1.6s6.6-.6 9.7-1.6c3.2-1.2 5.6-3.8 6.5-7 .1-.4.2-.9.4-1.4l-9.9-4.6c-.1.6-.2 1.2-.4 1.8-.5 1.7-2 3-3.8 3.4-1.7.3-3.4.3-5 0-1.8-.3-3.2-1.6-3.8-3.4-.8-2.6-.8-5.3 0-7.9.5-1.7 2-3 3.8-3.4 1.7-.3 3.4-.3 5 0 1.8.3 3.2 1.6 3.8 3.4.3 1.3.5 2.6.5 3.9m14.1 27.9c-.7 2.6-1.1 5.3-1.1 8.1v23.7h10.5v-23.7c0-1.3.2-2.7.6-3.9.5-1.7 2-3 3.8-3.4 1.7-.3 3.4-.3 5 0 1.8.3 3.2 1.6 3.8 3.4.8 2.6.8 5.3 0 7.9-.5 1.7-2 3-3.7 3.4-1.7.3-3.4.3-5 0-.3-.1-.7-.2-1-.3l3.6 9.8c3.3 0 6.6-.6 9.7-1.6 3.2-1.2 5.6-3.8 6.5-7 1.5-5.3 1.5-10.9 0-16.2-1-3.2-3.4-5.8-6.5-7-6.3-2.2-13.1-2.2-19.4 0-3.4 1-5.8 3.6-6.8 6.8",fill:"#00b1e7"});const rt=e=>{let t=e.svgRef,a=e.title,r=tt(e,["svgRef","title"]);return f.a.createElement("svg",et({height:76.3,viewBox:"-269.1 242.6 72 76.3",width:72,ref:t},r),a?f.a.createElement("title",null,a):null,at)},nt=f.a.forwardRef((e,t)=>f.a.createElement(rt,et({svgRef:t},e)));a.p;var ot=a(674);const ct="messages/SIGN_IN_SUCCESS_MESSAGE",st="messages/REMOVE_MESSAGE",lt="messages/REMOVE_MESSAGE_BY_ID",it="messages/SET_PATHNAME_MESSAGE",ut="messages/REMOVE_PATHNAME_MESSAGES",dt=(e,t,a)=>({type:e,payload:{message:Object(D.a)({id:Object(ot.a)(),type:e},t),data:a}}),mt=(e,t)=>dt(e,t,null),pt=e=>({type:st,payload:{severity:e}}),ht=e=>({type:lt,payload:{id:e}}),ft=(e,t)=>({type:it,payload:{pathname:e,message:t}}),bt=e=>({type:ut,payload:{pathname:e}}),yt="address/TRY_NEW_POSTCODE",Et=e=>({type:"address/SEARCH_FOR_ADDRESS_SUCCESS",payload:e}),gt=e=>({type:"address/SEARCH_FOR_ADDRESS_ERROR",payload:e}),vt=e=>dt("address/SEARCH_FOR_ADDRESS_FAILURE",e),Ot=({coordinates:e,deliveryStores:t,options:a,postcode:r})=>({type:"address/GET_DELIVERY_ADDRESSES_SUCCESS",payload:{coordinates:e,deliveryStores:t,options:a,postcode:r}}),wt=e=>({type:"address/GET_DELIVERY_ADDRESSES_OPTIONS_SUCCESS",payload:{options:e}}),kt=({collectionStores:e,coordinates:t,postcode:a})=>({type:"address/GET_COLLECTION_STORES_SUCCESS",payload:{collectionStores:e,coordinates:t,postcode:a}}),jt=e=>({type:"address/GET_COLLECTION_STORES_ERROR",payload:{error:e}});a(163);function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function St(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Ct=f.a.createElement("path",{d:"M343.385 88.689c-9.785-33.314-34.213-59.54-66.907-71.935-63.789-22.358-133.823-22.358-198.267.114-32.383 12.28-56.7 38.507-66.696 71.924C3.872 115.577 0 143.356 0 171.466c0 28.11 3.872 55.888 11.515 82.777 10.007 33.314 34.313 59.54 66.907 71.935A299.468 299.468 0 0 0 177.5 343c33.891 0 67.24-5.65 99.29-16.937 32.493-12.394 56.8-38.518 66.584-71.934A299.081 299.081 0 0 0 355 171.466c0-27.893-3.872-55.775-11.615-82.777z",fill:"#FFF"});const xt=e=>{let t=e.svgRef,a=e.title,r=St(e,["svgRef","title"]);return f.a.createElement("svg",_t({viewBox:"0 0 355 342",ref:t},r),a?f.a.createElement("title",null,a):null,Ct)},Nt=f.a.forwardRef((e,t)=>f.a.createElement(xt,_t({svgRef:t},e)));a.p;var Tt=a(69),It=a.n(Tt);const At=({title:e,theme:t,children:a})=>f.a.createElement("section",{className:"container container--padded-magic ".concat(It.a.container," ").concat(It.a[t])},f.a.createElement("div",{className:It.a.card},f.a.createElement(Nt,{className:It.a.squircle,width:"100",height:"100"}),f.a.createElement("div",{className:It.a.content},e&&f.a.createElement("h3",{className:It.a.title},e),a)));At.defaultProps={title:null,theme:"orange"};var Rt=At;const Pt=()=>f.a.createElement(Rt,{title:"Demand for deliveries is really\xa0high"},f.a.createElement("p",null,"Some of our delivery slots are booked up now. Keep checking back to see when more become\xa0available."),f.a.createElement("p",null,"To ensure availability for all our customers, some products have limits and you can only order a maximum of ".concat(M()," items in total.")),f.a.createElement("p",null,f.a.createElement("a",{href:"https://www.coop.co.uk/coronavirus"},"Find out how we are helping communities during the coronavirus\xa0outbreak.")));var Ft=a(56),Lt=a.n(Ft);function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Bt(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Mt=f.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Ut=f.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"});const Ht=e=>{let t=e.svgRef,a=e.title,r=Bt(e,["svgRef","title"]);return f.a.createElement("svg",Dt({viewBox:"0 0 24 24",ref:t},r),a?f.a.createElement("title",null,a):null,Mt,Ut)},Vt=f.a.forwardRef((e,t)=>f.a.createElement(Ht,Dt({svgRef:t},e)));a.p,a(449);const qt=({children:e,withIcon:t,theme:a,sticky:r})=>{const n=Ye()({notice:!0,"notice--sticky":r}),o=Ye()({container:!0,notice__wrapper:!0,"container--padded-magic":r});return Lt()(e)?null:f.a.createElement("div",{className:n,"data-theme":a},f.a.createElement("div",{className:o},t?f.a.createElement("span",{className:"notice--icon"},f.a.createElement(Vt,{width:"24",height:"24",alt:"information icon"})):null,f.a.createElement("span",{className:"notice--message"},e)))},Gt=({children:e,theme:t,sticky:a})=>f.a.createElement(qt,{withIcon:!1,theme:t,sticky:a},e),Wt=({children:e,theme:t,sticky:a})=>f.a.createElement(qt,{withIcon:!0,theme:t,sticky:a},e),zt={sticky:!1,theme:"notice-low"};qt.defaultProps=zt,Gt.defaultProps=zt,Wt.defaultProps=zt;var Yt=Gt;const Kt=()=>f.a.createElement(Wt,null,f.a.createElement("div",{role:"alert","data-testid":"max-basket-size-notice"},f.a.createElement("b",null,"Product restrictions due to high demand"),f.a.createElement("p",null,"You can only add ".concat(M()," items to your basket."))));const Qt=()=>f.a.createElement(Rt,{title:"Demand for deliveries is really\xa0high",theme:"lemon"},f.a.createElement("p",null,"Some products have limits and you can only order a maximum of ".concat(M()," items in total.")));const Zt=({children:e,contain:t,fillParentContainer:a,theme:r})=>f.a.createElement("section",{className:"content-section ".concat(a?"content-section--grow":""),"data-theme":r},t?f.a.createElement("div",{className:t?"container container--padded":""},e):e);Zt.defaultProps={contain:!0,fillParentContainer:!1,theme:null};var Jt=Zt;const Xt=({to:e,text:t})=>f.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t);a(450);var $t=()=>{const e=Object(E.c)();return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"utility-header"},f.a.createElement("div",{className:"container utility-header--container"},f.a.createElement("div",{className:"utility-header--logo"},f.a.createElement(nt,{key:"coop-logo-svg",className:"utility-header--logo--img",alt:"logo"})))),f.a.createElement(Jt,null,f.a.createElement("div",{className:"error-page","data-testid":"app-error"},f.a.createElement("h1",{className:"error-page--title"},"Sorry, this service is not available in your area"),f.a.createElement(Pt,null),f.a.createElement("div",{className:"error-page--message"},f.a.createElement("p",null,f.a.createElement(Xt,{to:"https://finder.coop.co.uk/food",text:"Find your nearest Co-op store."})),f.a.createElement("hr",null),f.a.createElement("h2",null,"The service is currently available in some areas of:"),f.a.createElement("ul",null,f.a.createElement("li",null,"London"),f.a.createElement("li",null,"Bristol"),f.a.createElement("li",null,"Brighton"),f.a.createElement("li",null,"Manchester"),f.a.createElement("li",null,"Southampton"),f.a.createElement("li",null,"Bournemouth")),f.a.createElement("h2",null,"The service will soon be available in more areas of Manchester and some areas of:"),f.a.createElement("ul",null,f.a.createElement("li",null,"Leeds"),f.a.createElement("li",null,"Sheffield"),f.a.createElement("li",null,"Liverpool"),f.a.createElement("li",null,"Newcastle"),f.a.createElement("li",null,"Nottingham"),f.a.createElement("li",null,"Birmingham")),f.a.createElement("button",{type:"button",className:"btn btn--primary btn--full",onClick:()=>e({type:yt})},"Enter a different postcode")))))},ea=a(21);a(451);var ta=()=>{const e=Object(E.c)();return f.a.createElement("div",{"data-testid":"cookie-consent-banner",className:"cookie-consent-banner"},f.a.createElement("p",null,"This site uses cookies. By continuing to use this site you're agreeing to our"," ",f.a.createElement("a",{href:"https://www.coop.co.uk/terms/privacy-notice"},"cookie policy"),"."),f.a.createElement("button",{type:"button",className:"btn",onClick:()=>e({type:"ui/DISMISS_COOKIE_BANNER"})},"Accept and close"))};const aa=Object.freeze({basket:"basket"}),ra=e=>"true"===B()[e],na=()=>ra("REACT_APP_FLAG_ACCOUNT"),oa=()=>ra("REACT_APP_FLAG_MANDATORY_BAGS"),ca=()=>ra("REACT_APP_FLAG_BASKET_DID_YOU_FORGET"),sa=()=>ra("REACT_APP_FLAG_BASKET_SIZE_RESTRICTION"),la=()=>ra("REACT_APP_FLAG_CMS");var ia=a(667);const ua=()=>new Date(Date.now()),da=e=>t=>{const a=Object(v.find)(t=>Object(v.isEqual)(t.key,e),Object(v.get)("cms.banners.items",t));return a?a.value:null},ma=e=>t=>{const a=Object(v.find)(t=>Object(v.isEqual)(t.key,e),Object(v.get)("cms.banners.cache",t));if(a){return Object(ia.a)(new Date,a.lastModified)>=10}return!0},pa=e=>e.cms.relatedProducts,ha=e=>t=>Object(v.find)({name:e},Object(v.get)("cms.productsLists",t)),fa=e=>{const t=ee(e),a=pa(e);return Object(v.difference)(t,Object(v.keys)(a))},ba=e=>t=>{const a=ha(e)(t);return!a||(!a.lastModified||Object(ia.a)(ua(),a.lastModified)>10)},ya=e=>e.categories,Ea=e=>j("categories",e),ga=e=>ya(e).selected,va=e=>ya(e).items;function Oa(){return Object(L.a)([va],e=>Object(v.isEmpty)(e))}const wa=e=>({id:e.id,name:e.name,order:e.order}),ka=(e,t)=>{return a=t,Object(v.getOr)([],"subcategories",a).length>0?Object(v.pipe)(Object(v.map)(t=>wa(va(e)[t])),Object(v.sortBy)("order"))(t.subcategories):[];var a},ja=(e,t)=>{const a=va(e)[t];return a?Object(D.a)({},wa(a),{subcategories:ka(e,a)}):null};function _a(e){const t=va(e),a=Object(v.filter)(e=>e.subcategories.length),r=Object(v.sortBy)("order"),n=Object(v.map)(t=>Object(D.a)({},wa(t),{subcategories:ka(e,t)}));return Object(v.pipe)(a,r,n)(t)}const Sa=e=>j("search",e),Ca=e=>e.search,xa=()=>Object(L.a)([Ca,ya],(e,t)=>({categories:Object(v.compact)(Object(v.map)(e=>t.items[e],e.categories))})),Na=e=>Ca(e).predictions,Ta=e=>Ca(e).products;var Ia=a(299),Aa=a.n(Ia);var Ra=function(e,t){const a=Aa()(["gtin",t],e);return a?a.quantity:0};const Pa=e=>e.products,Fa=e=>k(Pa(e).isFetchingList),La=e=>k(Pa(e).isFetchingDetails),Da=e=>Pa(e).items,Ba=e=>Pa(e).unavailable,Ma=(e,t)=>{const a=Da(e),r=Ba(e);return!Object(v.has)(t,r)&&Object(v.has)(t,a)},Ua=(e,t)=>{const a=Ma(e,t);if(a){const r=Object(v.get)(t,Da(e));return Object(D.a)({},r,{isAvailable:a})}const r=Object(v.find)({id:t},Ba(e));return r?Object(D.a)({},r,{isAvailable:a}):null},Ha=()=>Object(L.a)([Q,Da],(e,t)=>Object(v.values)(Object(v.mapValues)(t=>Object(D.a)({},t,{displayPrice:Y(t.price),quantity:Ra(e,t.gtin)}),t))),Va=()=>Object(L.a)([Ha(),ga],(e,t)=>Object(v.filter)(e=>e.parentCategories.includes(t),e)),qa=()=>Object(L.a)([Ha(),Ta],(e,t)=>Object(v.filter)(e=>t.includes(e.id),e)),Ga=e=>Object(L.a)([Ha()],t=>Object(v.sortBy)(t=>e.indexOf(t.gtin),Object(v.filter)(t=>e.includes(t.gtin),t))),Wa=()=>Object(L.a)(Ha(),Object(v.filter)(e=>e.quantity>0)),za=e=>Object(L.a)(e,e=>Object(v.size)(e)),Ya=(e,t)=>{const a=Pa(e);return Object(v.getOr)(1,["nextProductPage",t],a)},Ka=(e,t)=>Object(v.getOr)(0,t,Pa(e).totalProductCountByCategory),Qa=e=>{const t=ee(e),a=Ga(t)(e);return t.length===a.length},Za=(e,t)=>{const a=Q(e),r=Object(v.getOr)({},"products.items.".concat(t),e),n=Ra(a,r.gtin);return!Object(v.isEmpty)(r)&&n>=r.maxQuantity},Ja="basket/FETCH_BASKET_PRODUCTS",Xa="basket/FETCH_BASKET_PRODUCTS_SUCCESS",$a="basket/CHANGE_BASKET_QUANTITY",er="basket/CHECK_CAN_ADD_TO_BASKET",tr="basket/UPDATE_BASKET_REQUEST",ar="basket/UPDATE_BASKET_SUCCESS",rr="basket/UPDATE_BASKET_FAILURE",nr="basket/UNAVAILABLE_IN_NEW_STORE",or="basket/REMOVE_UNAVAILABLE_BASKET_ITEMS",cr="basket/STORE_SIGNED_IN_BASKET",sr="basket/EVALUATE_MEMBER_DISCOUNT",lr="basket/REMOVE_MEMBER_DISCOUNT",ir="basket/APPLY_VOUCHER_CODE",ur="basket/REMOVE_VOUCHER_CODE",dr="basket/CLEAR_VOUCHER_ERROR",mr=()=>({type:tr}),pr=({membershipNumber:e})=>({type:sr,payload:{membershipNumber:e}}),hr=()=>({type:lr}),fr=({voucherCode:e})=>({type:ir,payload:{voucherCode:e}}),br=()=>({type:ur}),yr=()=>({type:dr}),Er=(e,t)=>({type:$a,payload:{gtin:e,quantity:t}}),gr=(e,t)=>({type:er,payload:{gtin:e,quantity:t}}),vr=e=>({type:Ja,payload:{gtins:e}}),Or=({products:e})=>({type:Xa,payload:{items:e}}),wr=({checkout:e,evaluate:t,order:a})=>({type:ar,payload:{checkout:e,evaluate:t,order:a}}),kr=()=>({type:rr}),jr=({products:e,unavailableIn:t})=>({type:nr,payload:{products:e,unavailableIn:t}}),_r=({unavailableGtins:e})=>({type:or,payload:{unavailableGtins:e}}),Sr="products/FETCH_PRODUCT",Cr="products/FETCH_PRODUCT_SUCCESS",xr="products/FETCH_PRODUCT_FAILURE",Nr="products/FETCH_PRODUCTS_INITIAL",Tr="products/FETCH_PRODUCTS_BY_GTIN",Ir="products/FETCH_MORE_PRODUCTS",Ar="products/FETCH_MORE_SUCCESS",Rr="products/FETCH_PRODUCTS_SUCCESS",Pr="products/FETCH_PRODUCTS_CANCEL",Fr="products/FETCH_PRODUCTS_FAILURE",Lr="products/FETCH_SEARCH_PRODUCTS",Dr="products/FETCH_SEARCH_PRODUCTS_SUCCESS",Br="products/FETCH_MORE_SEARCH_PRODUCTS",Mr="products/FETCH_MORE_SEARCH_PRODUCTS_SUCCESS",Ur=e=>({type:Nr,payload:e}),Hr=e=>({type:Lr,payload:e}),Vr=e=>({type:Ir,payload:e}),qr=e=>({type:Br,payload:e}),Gr=({products:e,pagination:t,parentCategoryId:a})=>({type:Rr,payload:{items:e,pagination:t,parentCategoryId:a}}),Wr=({products:e,pagination:t,searchTerm:a})=>({type:Dr,payload:{items:e,pagination:t,searchTerm:a}}),zr=({products:e,pagination:t,parentCategoryId:a})=>({type:Ar,payload:{items:e,pagination:t,parentCategoryId:a}}),Yr=({products:e,pagination:t,searchTerm:a})=>({type:Mr,payload:{items:e,pagination:t,searchTerm:a}}),Kr=e=>dt(Fr,e),Qr=e=>({type:Sr,payload:{productId:e}}),Zr=e=>({type:Cr,payload:e}),Jr=e=>({type:Tr,payload:{gtins:e}}),Xr={items:{},isFetchingList:!1,isFetchingDetails:!1,isFetchingMore:!1,nextProductPage:{},totalProductCountByCategory:{},unavailable:{}},$r=(e,t,a)=>e?Object(D.a)({},t.totalProductCountByCategory,{[e]:a.totalCount}):t.totalProductCountByCategory,en=(e,t,a)=>{const r=Object(v.getOr)(1,"nextPage",t);return a?Object(D.a)({},e,{[a]:r}):e},tn=(e,t,a)=>{const r=t.items,n=t.pagination,o=t.parentCategoryId,c=t.searchTerm,s=o||c;return Object(D.a)({},e,{items:Object(D.a)({},e.items,{},Object(v.keyBy)("id",r)),[a]:!1,totalProductCountByCategory:$r(s,e,n),nextProductPage:en(e.nextProductPage,n,s)})};var an=(e=Xr,t)=>{switch(t.type){case Nr:case Tr:case Lr:return(e=>Object(D.a)({},e,{isFetchingList:!0,isFetchingDetails:!0}))(e);case Rr:case Xa:case Dr:return tn(e,t.payload,"isFetchingList");case Ar:case Mr:return tn(e,t.payload,"isFetchingMore");case Ir:case Br:return(e=>Object(D.a)({},e,{isFetchingMore:!0}))(e);case Sr:return(e=>Object(D.a)({},e,{isFetchingDetails:!0}))(e);case Cr:return((e,t)=>{const a=!e.unavailable[t.id];return Object(D.a)({},e,{items:a?Object(D.a)({},e.items,{[t.id]:t}):e.items,isFetchingDetails:!1})})(e,t.payload);case Pr:return Object(D.a)({},e,{isFetchingList:!1});case"shopping-in/PRODUCTS_IN_STORE_RANGE":return((e,{products:t})=>{const a=Object(v.partition)(e=>Object(v.includes)(e.masterProductId,t),e.items),r=Object(ke.a)(a,2),n=r[0],o=r[1];return Object(D.a)({},e,{items:Object(v.keyBy)("id",n),unavailable:Object(v.keyBy)("id",o)})})(e,t.payload);case ie:return Object(D.a)({},e,{totalProductCountByCategory:{}});default:return e}};const rn=e=>{const t=e.account,a=e.addresses,r=e.api,n=e.basket,o=e.checkout,c=e.order,s=e.products.unavailable,l=e.shoppingIn,i=e.slots,u=e.stores;return{account:t,addresses:Object(v.omit)(["error","notInServiceArea"],a),api:r,basket:n,checkout:o,order:c,products:Object(D.a)({},Xr,{unavailable:s}),shoppingIn:l,slots:i,stores:u,ui:{cookieBannerDismissed:P(e)}}},nn=e=>e.slots,on=e=>(e=>!0===e.isFetching)(nn(e)),cn=e=>Object(v.flow)(Object(v.flatMap)(e=>e),Object(v.sortBy)(["date","startsAt"]),v.head)(e),sn=e=>nn(e).collection,ln=e=>nn(e).delivery,un=e=>cn(sn(e)),dn=e=>cn(ln(e)),mn=e=>e.order,pn=e=>mn(e).storeId,hn=e=>pn(e)||Oe(e)||H,fn=e=>mn(e).slot,bn=e=>mn(e).voucherCode,yn=e=>mn(e).basketId,En=e=>e.slots,gn=()=>Object(L.a)([mn,En],(e,t)=>((e,t)=>{const a=Object(v.flatMap)(e=>e,t.collection),r=Object(v.flatMap)(e=>e,t.delivery);return Object(v.flow)(v.concat,Object(v.find)(["id",e]))(a,r)})(e.slot,t)||null),vn=()=>Object(L.a)([gn(),mn],(e,t)=>({reservedSlot:e,selectedAddress:t.address,fulfilmentType:t.fulfilmentType})),On=e=>mn(e).fulfilmentType,wn=e=>V(mn(e).fulfilmentType),kn=()=>Object(L.a)(Wa(),e=>e.map(e=>({sku:e.sku,gtin:e.gtin,quantity:e.quantity,allow_replace:!1,unit_price:{price:e.price,price_vat:e.price},row_price:{price:e.price,price_vat:e.price}}))),jn=e=>mn(e).address,_n=e=>jn(e).displayName,Sn=e=>{const t=vn()(e),a=t.reservedSlot,r=t.selectedAddress,n=!Object(v.isNil)(a),o=!Object(v.isNil)(r),c=!ce(e),s=(e=>{const t=M();return!sa()||J(e)<=t})(e),l=le(e);return n&&o&&c&&s&&l},Cn=e=>{const t=M();return!!sa()&&J(e)>=t},xn=e=>{const t=!Object(v.isEmpty)(be(e)),a=!Object(v.isEmpty)(Oe(e)),r=!Object(v.isEmpty)(pn(e));return t||a||r},Nn=e=>{const t=ee(e),a=Object(v.values)(Ba(e));return Object(v.filter)(e=>t.includes(e.gtin),a)},Tn=e=>{const t=ee(e),a=pa(e);return Object(v.flow)(Object(v.map)(e=>a[e]),Object(v.flatMap)(e=>Object(v.getOr)([],"related",e)),v.compact,v.uniq,Object(v.without)(t))(t)},In=e=>{return(t=aa.basket,e=>{const a=ha(t)(e);return a?a.items:[]})(e);var t},An=e=>{const t=ee(e),a=[...Tn(e),...In(e)];return Object(v.flow)(v.uniq,Object(v.without)(t),Object(v.take)(6))(a)};var Rn=a(300),Pn=a.n(Rn);var Fn=()=>{const e=Object(E.d)(Cn),t=Object(E.d)(P),a=Object(ea.l)().pathname,r=["/payment","/delivery","/collection","/checkout","/payment-status"].filter(e=>e===a).length<1&&e,n=!t;return(r||n)&&f.a.createElement("div",{className:Pn.a["sticky-notices"]},r&&f.a.createElement(Kt,null),n&&f.a.createElement(ta,null))},Ln=a(131);const Dn=e=>e.checkout,Bn=e=>Object(D.a)({},Dn(e)),Mn=e=>!0===Object(v.get)(["carrierBags"],Dn(e)),Un=e=>Math.round(100*e)/100,Hn=e=>Object(Fe.isString)(e)?Un(parseFloat(e)):e,Vn=e=>Object(v.map)(Object(v.get)("gtin"),e.products.items);function qn(){const e=Object(E.c)(),t=function(e,t){return Object(v.difference)(e,t)}(Object(E.d)(ee),Object(E.d)(Vn));Object(h.useEffect)(()=>{Object(v.isEmpty)(t)||e(vr(t))},[])}const Gn=e=>e?e.deliveryPrice:null;const Wn="order/SELECT_ADDRESS",zn="order/SELECT_ADDRESS_SUCCESS",Yn="order/PLACE_ORDER_REQUEST",Kn="order/PLACE_ORDER_FAILURE",Qn="order/PLACE_ORDER_FAILURE_SLOT",Zn="order/PLACE_ORDER_SUCCESS",Jn="order/SWITCH_FULFILMENT_TYPE",Xn="order/SELECT_COLLECTION_STORE",$n="order/SELECT_DELIVERY_STORE",eo="order/STORE_SELECTED",to=e=>({type:Jn,payload:e}),ao=()=>to("collection"),ro=()=>to("delivery"),no=({link:e,slot:t,storeId:a})=>({type:Wn,payload:{link:e,slot:t,storeId:a}}),oo=e=>({type:zn,payload:Object(D.a)({},e)}),co=(e,t)=>({type:Yn,payload:{slot:e,products:t}}),so=e=>({type:Zn,payload:e}),lo=e=>dt(Kn,e),io=()=>({type:Qn}),uo=({id:e,name:t})=>({type:Xn,payload:{id:e,name:t}}),mo=({id:e})=>({type:$n,payload:{id:e}}),po=()=>({type:eo});function ho(e){const t=Object(h.useRef)();return Object(h.useEffect)(()=>{t.current=e}),t.current}function fo(){const e=Object(E.d)(hn),t=ho(e);return{changed:t&&t!==e,storeId:e}}function bo(){const e=Object(E.c)(),t=fo(),a=t.changed,r=t.storeId,n=Object(h.useCallback)(()=>e((({storeId:e})=>({type:ie,payload:{storeId:e}}))({storeId:r})),[e,r]);Object(h.useEffect)(()=>{a&&n()},[n,a])}function yo(){const e=Object(E.c)(),t=function(){const e=Object(E.d)(pn);return{committed:null!==e,orderStoreId:e}}().committed,a=Object(h.useCallback)(()=>e(po()),[e]);Object(h.useEffect)(()=>{t&&a()},[t,a])}var Eo=a(2),go=a.n(Eo),vo=a(7),Oo=a(29),wo=a(68),ko=a(188),jo=a.n(ko);!function(e){var t=e.parse,a=e.get,r=e.set;e.parse=function(e,a){return e&&0===e.indexOf("exp@")&&(e=e.substring(e.indexOf(";")+1)),t(e,a)},e.expires=function(e){return!(!e||0!==e.indexOf("exp@"))&&parseInt(e.substring("exp@".length,e.indexOf(";")),10)},e.when=function(e){var t=Math.floor(new Date(Date.now()).getTime()/1e3);return e?new Date(1e3*(t+e)):t},e.cache=function(t,r){var n=a(t,r),o=e.expires(n);return o&&e.when()>=o?t.removeItem(r):n},e.get=function(t,a){var r=e.cache(t,a);return void 0===r?null:r},e.set=function(t,a,n,o){try{o&&(n="exp@"+(e.when()+o)+";"+n),r(t,a,n)}catch(i){if("QUOTA_EXCEEDED_ERR"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name){for(var c=!1,s=0,l=t.length;s<l;s++)void 0===e.cache(t,a)&&(c=!0);if(c)return e.set.apply(this,arguments)}throw i}}}(jo.a._);var _o=jo.a;const So=function(){var e=Object(vo.a)(go.a.mark((function e({href:t,headers:a,key:r}){var n,o,c;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=_o.local("ecom:hateoas:".concat(r)))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,fetch(new URL(t),{headers:a});case 5:if(!(o=e.sent).ok){e.next=12;break}return e.next=9,o.json();case 9:return c=e.sent,_o.local("ecom:hateoas:".concat(r),c,3600),e.abrupt("return",c);case 12:throw new Error("hateoas failure");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Co=function(){var e=Object(vo.a)(go.a.mark((function e({href:t,headers:a,selector:r,key:n="root"}){var o,c,s,l,i,u;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,So({href:t,headers:a,key:n});case 3:if(o=e.sent,c=r.split("."),s=c.shift(),!(l=Object(v.find)(e=>e.rel===s,o.links))||!c.length){e.next=11;break}return i=c.join("."),u="".concat(n,":").concat(s),e.abrupt("return",Co({href:l.href,headers:a,selector:i,key:u}));case 11:return e.abrupt("return",l||null);case 14:e.prev=14,e.t0=e.catch(0);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),xo=function(){var e=Object(vo.a)(go.a.mark((function e({selector:t,headers:a={}}){var r,n,o,c,s;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=B(),n=r.REACT_APP_ACCOUNT_URL,e.next=3,Object(wo.a)(Co({href:n,selector:t,headers:a}));case 3:if(o=e.sent,c=Object(ke.a)(o,2),s=c[1]){e.next=8;break}throw new Error("hateoas failure: ".concat(t));case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),No=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xo({selector:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),To=({accessToken:e,clientId:t})=>({Authorization:"Bearer ".concat(e),client_id:t}),Io=e=>Object(D.a)({},e,{"Content-Type":"application/json"});var Ao=a(58),Ro=a.n(Ao);const Po=e=>{const t=Ro.a.decode(e);if(t){return t.exp<Math.floor(Date.now()/1e3)}return!0},Fo=e=>{const t=Ro.a.decode(e);return t&&!Po(e)?t.email_address:null},Lo=e=>Object(v.replace)(/\w+/g,v.capitalize,e),Do=function(){var e=Object(vo.a)(go.a.mark((function e({accessToken:t,logger:a}){var r,n,o,c,s,l,i;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=B(),n=r.REACT_APP_ACCOUNT_CLIENT_ID,o=To({accessToken:t,clientId:n}),e.next=5,xo({selector:"customer.customer",headers:o});case 5:return c=e.sent,s=c.href,l=c.method,e.next=10,fetch(s,{headers:o,method:l});case 10:return i=e.sent,e.abrupt("return",i.ok?i.json():null);case 14:throw e.prev=14,e.t0=e.catch(0),a.error("get-customer failed",e.t0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),Bo=({forename:e,surname:t})=>({forename:Lo(e),name:Lo("".concat(e," ").concat(t))}),Mo=function(){var e=Object(vo.a)(go.a.mark((function e({accessToken:t,idToken:a,logger:r}){var n,o,c,s;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do({accessToken:t,logger:r});case 2:if(!(n=e.sent)){e.next=6;break}return o=Bo(n),c=o.forename,s=o.name,e.abrupt("return",{forename:c,name:s,email:Fo(a)});case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uo=Object.freeze({home:"/",preSignIn:"/pre-sign-in",postSignIn:"/post-sign-in",signOut:"/sign-out"}),Ho="ecom:auto-sign-in",Vo="ecom:context",qo="ecom:pathname",Go="ecom:pixie-secrets",Wo=({codeVerifier:e,state:t})=>_o.session(Go,{codeVerifier:e,state:t}),zo=()=>{const e=_o.session(Go);return{codeVerifier:e.codeVerifier,state:e.state}},Yo=()=>{_o.session.remove(qo),_o.session.remove(Go)},Ko=()=>{const e=_o.session(qo);return e||(console.error("get-pathname: using default"),Uo.home)};var Qo=a(301);const Zo=(e,t)=>{const a=new URL(e);return a.search=new URLSearchParams(t).toString(),a.toString()},Jo=(e=window.location.search)=>{const t=new URLSearchParams(e),a={};var r,n=Object(Qo.a)(t.entries());try{for(n.s();!(r=n.n()).done;){const e=Object(ke.a)(r.value,2),t=e[0],n=e[1];a[t]=n}}catch(o){n.e(o)}finally{n.f()}return a},Xo=({challenge:e,redirectUri:t})=>{const a=B().REACT_APP_ACCOUNT_CLIENT_ID;return Object(D.a)({clientId:a,redirectUri:t},e)},$o=({clientId:e,codeChallenge:t,codeChallengeMethod:a,redirectUri:r,state:n})=>({response_type:"code",client_id:e,redirect_uri:r,code_challenge_method:a,code_challenge:t,state:n}),ec=e=>Object(D.a)({},$o(e),{prompt:"none"}),tc=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,No("account.authorize");case 2:return a=e.sent,r=a.href,e.abrupt("return",Zo(r,t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ac=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tc(ec(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rc=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tc($o(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var nc=a(127);const oc=e=>e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),cc=()=>{const e=oc(Object(nc.randomBytes)(32));var t;return{codeChallengeMethod:"S256",codeChallenge:oc((t=e,Object(nc.createHash)("sha256").update(t).digest())),codeVerifier:e,state:Object(ot.a)()}},sc=()=>{const e=window.location.origin;return new URL("post-sign-in",e).toString()};var lc=a(302),ic=a.n(lc);const uc=e=>Ro.a.decode(e,{complete:!0}),dc=(e,t)=>{const a=Object(v.get)("header.kid",e);if(!a)throw new Error("kid not found");const r=t.find(e=>e.kid===a);if(!r)throw new Error("public key matching kid ".concat(a," not found"));return r},mc=(e,t)=>{const a=t.n,r=t.e;return Ro.a.verify(e,((e,t)=>ic()((e=>e.replace(/-/g,"+").replace(/_/g,"/"))(e),t))(a,r))},pc=function(){var e=Object(vo.a)(go.a.mark((function e(t,a){var r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=uc(t),n=dc(r,a),e.abrupt("return",mc(t,n));case 6:throw e.prev=6,e.t0=e.catch(0),new Error("failed to verify token");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),hc=function(){var e=Object(vo.a)(go.a.mark((function e(){var t,a,r,n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,No("account.publickeys");case 2:return t=e.sent,a=t.href,r=t.method,e.next=7,fetch(a,{method:r});case 7:if(!(n=e.sent).ok){e.next=13;break}return e.next=11,n.json();case 11:return o=e.sent,e.abrupt("return",o.keys);case 13:throw new Error("failed to get public keys");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fc=({authorizationCode:e,codeVerifier:t,redirectUri:a,state:r})=>({client_id:B().REACT_APP_ACCOUNT_CLIENT_ID,code:e,code_verifier:t,grant_type:"authorization_code",redirect_uri:a,state:r}),bc=function(){var e=Object(vo.a)(go.a.mark((function e(t,a){var r,n,o,c;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});case 2:if(!(r=e.sent).ok){e.next=10;break}return e.next=6,r.json();case 6:return n=e.sent,o=n.access_token,c=n.id_token,e.abrupt("return",{accessToken:o,idToken:c});case 10:throw new Error("failed to fetch tokens");case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),yc=function(){var e=Object(vo.a)(go.a.mark((function e(t,a){var r,n,o,c,s,l,i,u,d,m,p,h;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(wo.a)(hc());case 2:if(r=e.sent,n=Object(ke.a)(r,2),o=n[1]){e.next=7;break}throw new Error("failed to get public keys");case 7:return e.next=9,Object(wo.a)(bc(t,a));case 9:if(c=e.sent,s=Object(ke.a)(c,2),l=s[1]){e.next=14;break}throw new Error("failed to get tokens");case 14:return i=l.accessToken,u=l.idToken,e.next=17,Object(wo.a)(pc(i,o));case 17:if(d=e.sent,m=Object(ke.a)(d,2),m[1]){e.next=22;break}throw new Error("failed to verify access token");case 22:return e.next=24,Object(wo.a)(pc(u,o));case 24:if(p=e.sent,h=Object(ke.a)(p,2),h[1]){e.next=29;break}throw new Error("failed to verify id token");case 29:return e.abrupt("return",l);case 30:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ec=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,No("account.token");case 2:return a=e.sent,r=a.href,n=new URLSearchParams(t).toString(),e.abrupt("return",yc(r,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gc=()=>{(e=>{_o.session(qo,e)})(window.location.pathname)},vc=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cc(),Wo(a),r=sc(),n=Xo({challenge:a,redirectUri:r}),e.abrupt("return",t(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oc=function(){var e=Object(vo.a)(go.a.mark((function e([t]){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.debug("auto-sign-in"),e.prev=1,gc(),e.next=5,vc(ac);case 5:a=e.sent,window.location.assign(a),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),t.error("auto-sign-in failed",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),wc=function(){var e=Object(vo.a)(go.a.mark((function e({logger:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.debug("sign-in"),e.prev=1,e.next=4,vc(rc);case 4:a=e.sent,window.location.replace(a),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),t.error("sign-in failed",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),kc=({state:e},t)=>{if(e!==t)throw new Error("PKCE state violation")},jc=function(){var e=Object(vo.a)(go.a.mark((function e(t,a){var r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("LOGIN_REQUIRED"===t){e.next=3;break}throw r="error ".concat(t,", ").concat(a),new Error(r);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_c=function(){var e=Object(vo.a)(go.a.mark((function e(t,{codeVerifier:a,state:r}){var n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sc(),o=fc({authorizationCode:t,codeVerifier:a,redirectUri:n,state:r}),e.abrupt("return",Ec(o));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Sc=function(){var e=Object(vo.a)(go.a.mark((function e({logger:t}){var a,r,n,o,c,s,l;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.debug("post-sign-in"),e.prev=1,a=Jo(),r=a.code,n=a.error,o=a.error_description,c=a.state,s=zo(),kc(s,c),!n){e.next=10;break}return e.next=8,jc(n,o);case 8:e.next=15;break;case 10:if(!r){e.next=15;break}return e.next=13,_c(r,s);case 13:return l=e.sent,e.abrupt("return",l);case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(1),t.error("post-sign-in failed",e.t0),e.t0;case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();var Cc=a(79);const xc=f.a.createContext();xc.displayName="AuthContext";const Nc={accessToken:null,idToken:null};function Tc(e){const t=Object(h.useState)(null),a=Object(ke.a)(t,2),r=a[0],n=a[1],o=()=>{n(null)};Object(Cc.a)(()=>{if(r){const e=r.accessToken;Po(e)&&o()}},6e4);const c={isAuthenticated:(()=>{if(r){const e=r.accessToken;return!Po(e)}return!1})(),revokeTokens:o,setTokens:n,tokens:r||Nc};return f.a.createElement(xc.Provider,Object.assign({value:c},e))}function Ic(){const e=f.a.useContext(xc);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const Ac=f.a.createContext();Ac.displayName="UserContext";const Rc={forename:null,name:null,email:null};function Pc(e){const t=Object(E.c)(),a=Object(h.useState)(Rc),r=Object(ke.a)(a,2),n=r[0],o=r[1],c=Ic().tokens,s=c.accessToken,l=c.idToken;Object(h.useEffect)(()=>{s||l||(Object(v.isEqual)(n,Rc)||t((({name:e,email:t})=>({type:"checkout/REMOVE_USER_DETAILS",payload:{name:e,email:t}}))(n)),o(Rc))},[s,t,l,n]);return f.a.createElement(Ac.Provider,Object.assign({value:{user:n,setUser:e=>{e&&!Object(v.isEqual)(e,Rc)&&t((({name:e,email:t})=>({type:"checkout/SET_USER_DETAILS",payload:{name:e,email:t}}))(e)),o(e||Rc)}}},e))}function Fc(){const e=f.a.useContext(Ac);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e}class Lc{critical(e,t=null){throw new Error("You have to implement the method critical!")}error(e,t=null){throw new Error("You have to implement the method error!")}warning(e,t=null){throw new Error("You have to implement the method warning!")}info(e,t=null){throw new Error("You have to implement the method info!")}debug(e,t=null){throw new Error("You have to implement the method debug!")}}const Dc=f.a.createContext();function Bc(e){const t=e.logger;return f.a.createElement(Dc.Provider,Object.assign({value:t},e))}function Mc(){const e=f.a.useContext(Dc);if(void 0===e)throw new Error("useLogger must be used within a LoggerProvider");return e}Dc.displayName="LoggerContext";const Uc=({children:e,className:t,disabled:a,onClick:r,testid:n})=>f.a.createElement("button",{className:"btn ".concat(t),onClick:r,type:"submit",disabled:a,"data-testid":n},e);Uc.defaultProps={onClick(){}},Uc.defaultProps={disabled:!1,testid:"btn-default",className:"",onClick:null};var Hc=Uc,Vc=a(80),qc=a.n(Vc);const Gc=({status:e,children:t})=>{const a={container:Ye()(qc.a.transition,qc.a[e]),icon:qc.a.icon,svg:qc.a.background,children:qc.a.children},r="failed"===e;return f.a.createElement("div",{"data-testid":"transition",className:a.container},f.a.createElement("span",{className:a.icon},r&&f.a.createElement("svg",{viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},f.a.createElement("path",{d:"M13,0 C20.176,0 26,5.824 26,13 C26,20.176 20.176,26 13,26 C5.824,26 0,20.176 0,13 C0,5.824 5.824,0 13,0 Z M14.4444444,11.5555556 L11.5555556,11.5555556 L11.5555556,20.2222222 L14.4444444,20.2222222 L14.4444444,11.5555556 Z M13,5.05555556 C11.803383,5.05555556 10.8333333,6.02560526 10.8333333,7.22222222 C10.8333333,8.41883918 11.803383,9.38888889 13,9.38888889 C14.196617,9.38888889 15.1666667,8.41883918 15.1666667,7.22222222 C15.1666667,6.02560526 14.196617,5.05555556 13,5.05555556 Z"}))),f.a.createElement("div",{className:a.children},t),f.a.createElement("svg",{className:a.svg,viewBox:"0 0 50 50"},f.a.createElement("circle",{cx:"25",cy:"25",r:"25"})))};Gc.defaultProps={children:void 0};var Wc=Gc;const zc=function(){var e=Object(vo.a)(go.a.mark((function e({logger:t}){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sc({logger:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yc=function(){var e=Object(vo.a)(go.a.mark((function e([t,a,r]){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo({accessToken:t,idToken:a,logger:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kc=()=>{const e=(()=>{const e=Mc();return Object(Oo.d)({promiseFn:zc,logger:e})})(),t=e.data,a=e.isFulfilled,r=(e=>{const t=Mc(),a=Object(Oo.d)({deferFn:Yc}),r=a.run;return Object(h.useEffect)(()=>{if(e){const a=e.accessToken,n=e.idToken;r(a,n,t)}},[t,r,e]),a})(t);((e,t)=>{const a=Object(E.c)(),r=Ic().setTokens,n=Fc().setUser,o=Ko();Object(h.useEffect)(()=>{t&&(r(e),n(t),Yo(),a(ft(o,"You are now signed in")))},[t,a,o,n,r,e])})(t,r.data);const n=t?r:e,o=n.reload,c=Ko();return f.a.createElement(f.a.Fragment,null,f.a.createElement(Oo.b,{state:n},f.a.createElement(Wc,{status:"working"},f.a.createElement("p",null,"Getting your details"))),f.a.createElement(Oo.c,{state:n},f.a.createElement(Wc,{status:"failed"},f.a.createElement("p",null,"We are having trouble loading your details"),f.a.createElement(Hc,{className:"btn--primary",onClick:o},"Try again"))),a&&!t&&f.a.createElement(Oo.a,{state:e},f.a.createElement(ea.c,{to:c})),f.a.createElement(Oo.a,{state:r},f.a.createElement(ea.c,{to:c})))},Qc=()=>{const e=Mc(),t=Object(Oo.d)({promiseFn:wc,logger:e});return f.a.createElement(f.a.Fragment,null,f.a.createElement(Oo.b,{state:t},f.a.createElement(Wc,{status:"working"})),f.a.createElement(Oo.c,{state:t},f.a.createElement(Wc,{status:"failed"},f.a.createElement("p",null,"We are having trouble loading sign in"),f.a.createElement(Hc,{className:"btn--primary",onClick:t.reload},"Try again"))),f.a.createElement(Oo.a,{state:t},f.a.createElement(Wc,{status:"working"})))},Zc=function(){var e=Object(vo.a)(go.a.mark((function e({accessToken:t,logger:a}){var r,n,o,c,s,l,i;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.debug("sign-out"),e.prev=1,r=B(),n=r.REACT_APP_ACCOUNT_CLIENT_ID,e.next=5,No("account.sign-out");case 5:return o=e.sent,c=o.href,s=o.method,l=Io(To({accessToken:t,clientId:n})),i=JSON.stringify({sessionId:Ro.a.decode(t).session_id}),e.abrupt("return",fetch(c,{body:i,credentials:"include",headers:l,method:s}));case 13:throw e.prev=13,e.t0=e.catch(1),a.error("sign-out failed",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),Jc=()=>{const e=Mc(),t=Ic(),a=t.revokeTokens,r=t.tokens.accessToken,n=Object(Oo.d)({promiseFn:Zc,accessToken:r,logger:e}),o=n.isFulfilled,c=Object(E.c)(),s=Ko();return Object(h.useEffect)(()=>{o&&(a(),Yo(),c(ft(s,"You are now signed out")))},[a,c,o,s]),f.a.createElement(f.a.Fragment,null,f.a.createElement(Oo.b,{state:n},f.a.createElement(Wc,{status:"working"},f.a.createElement("p",null,"Signing out"))),f.a.createElement(Oo.c,{state:n},f.a.createElement(Wc,{status:"failed"},f.a.createElement("p",null,"We are having trouble signing you out"),f.a.createElement(Hc,{className:"btn--primary",onClick:n.reload},"Try again"))),f.a.createElement(Oo.a,{state:n},f.a.createElement(ea.c,{to:s})))},Xc=e=>({type:"analytics/DETAIL_VIEW",payload:{product:e}}),$c=({products:e,step:t,revenue:a})=>({type:"analytics/PAGE_VIEW_CHECKOUT_FUNNEL",payload:{products:e,step:t,revenue:a}});var es=a(4);const ts="complete/RESET_APP_STATE",as=(e,t)=>Object(v.pipe)(t=>Object(v.map)(t=>{const a=ja(e,t);return a?a.name:null},t),v.compact,Object(v.join)("/"))(t);function rs({products:e,categories:t}){return e.map(e=>Object(D.a)({},e,{category:as({categories:t},e.parentCategories)}))}var ns=go.a.mark(ss),os=go.a.mark(us),cs=go.a.mark(ds);function ss({payload:e}){var t,a,r,n,o;return go.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(es.i)(t=>as(t,e.parentCategories));case 2:return t=c.sent,a=e.brand,r=e.name,n=e.price,o=e.sku,c.next=6,Object(es.f)(Xc({brand:a,category:t,id:o,name:r,price:n,quantity:1}));case 6:case"end":return c.stop()}}),ns)}function ls({basket:e,offers:t}){return Object(v.map)(e=>{const a=e.category,r=e.brand,n=e.name,o=e.price,c=e.sku,s=e.quantity,l=function({offers:e,id:t,price:a}){const r=Object(v.find)(e=>Object(v.find)({ean:t},e.items),e);if(r){const e=Object(v.find)(["ean",t],r.items);return{productPromo:r.promoName,price:e.promoPrice,productPromoValue:a-e.promoPrice}}return{productPromo:"",price:a,productPromoValue:0}}({offers:t,id:c,price:o});return Object(D.a)({category:a,brand:r,name:n,originalPrice:o,id:c,quantity:s},l)},e)}function is(e){return Object(v.map)("sku",e).join("|")}function us({payload:{basket:e,offers:t,order:a,slot:r}}){var n,o,c,s,l,i,u,d,m;return go.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return n=a.confirmedPrice,o=a.fulfilmentType,c=a.orderNumber,s=a.paymentBrand,l=a.store,i=a.totalBreakdown,u=a.voucherCode,d=Object(v.map)("promoName",t).join("|"),m=ls({basket:e,offers:t}),p.next=5,Object(es.f)({type:"analytics/PURCHASE",payload:{deliveryCharges:r.deliveryPrice,eventLabel:is(e),id:c,offers:d,orderDiscount:i.savings,paymentType:s,products:m,revenue:n,store:l,transactionType:o,promoCode:u}});case 5:case"end":return p.stop()}}),os)}function ds(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)(Cr,ss);case 2:return e.next=4,Object(es.l)(ts,us);case 4:case"end":return e.stop()}}),cs)}var ms=ds;const ps=e=>e.api,hs=e=>Object(v.getOr)({},"evaluate",(e=>ps(e).basket)(e)),fs=e=>Object(v.getOr)({},"promotions",hs(e)),bs=e=>hs(e).cart_value;var ys=a(668),Es=a(128),gs=a.n(Es);const vs=e=>ps(e).order,Os=e=>vs(e).orderNumber,ws=(e,t=new Date)=>{const a=vs(e).createdAt;return Object(ia.a)(t,Object(ys.a)(a))>=30},ks=e=>{const t=vs(e),a=t.orderNumber,r=t.visibleId,n=t.createdAt,o=t.confirmedPrice,c=t.customerEmail,s=t.totalBreakdown,l=t.isOrderPlaced;return{orderNumber:a,visibleId:r,createdAt:n,confirmedPrice:o,customerEmail:c,address:_n(e),totalBreakdown:s,isOrderPlaced:l}},js=e=>gs()(null,"confirmedPrice",vs(e)),_s=e=>e.complete,Ss=e=>{const t=_s(e),a=t.basket,r=t.order;return!Object(v.isEmpty)(a)&&Object(v.get)("isOrderPlaced",r)},Cs=e=>_s(e).basket,xs=e=>_s(e).offers,Ns=e=>(e=>_s(e).order)(e).confirmedPrice,Ts="1",Is="2",As="3",Rs="4";function Ps({step:e,revenueSelector:t}){const a=Object(E.c)(),r=Object(E.d)(Wa()),n=Object(E.d)(ya),o=Object(E.d)(fs),c=Object(E.d)(Qa),s=Object(E.d)(Oa()),l=Object(E.d)(t),i=ls({basket:rs({products:r,categories:n}),offers:o});Object(h.useEffect)(()=>{c&&!s&&a($c({products:i,step:e,revenue:l}))},[s,c])}a(115),Pe.a.string.isRequired,Pe.a.string.isRequired,Pe.a.string.isRequired,a(277);var Fs=()=>f.a.createElement("div",{className:"order-slot"},f.a.createElement(f.a.Fragment,null,f.a.createElement(g.Link,{to:"/delivery",className:"infoblock-click"},f.a.createElement("span",{className:"infoblock--content"},"Book a slot for delivery")),f.a.createElement(g.Link,{to:"/collection",className:"infoblock-click"},f.a.createElement("span",{className:"infoblock--content"},"Book a slot for collection")))),Ls=a(669),Ds=a(675),Bs=a(672);function Ms(e){switch(!0){case Object(Ls.a)(e):return"Today";case Object(Ds.a)(e):return"Tomorrow";default:return Object(Bs.a)(e,"iiii do")}}function Us(e){return"".concat(Object(Bs.a)(e,"haaaaa"),"m")}const Hs=(e,t)=>Object(ys.a)("".concat(e," ").concat(t));function Vs({date:e,startsAt:t,endsAt:a}){const r=Hs(e,t),n=Hs(e,a);return"".concat(Ms(r),", ").concat(Us(r)," \u2013 ").concat(Us(n))}const qs=({fulfilmentType:e,reservedSlot:t,selectedAddress:a})=>{return f.a.createElement("div",{className:"order-slot"},f.a.createElement(g.Link,{to:"/".concat(e),className:"infoblock-edit"},f.a.createElement("span",{className:"infoblock--content"},a?"".concat((n=e,V(n)?"Collecting from":"Delivering to")," ").concat(a.displayName):"No delivery address selected"),f.a.createElement("span",{className:"infoblock--content"},(r=t,(Lt()(r)?null:Vs(r))||"No time slot selected")),f.a.createElement("span",{className:"infoblock--cta"},"Change")));var r,n};qs.defaultProps={fulfilmentType:null,selectedAddress:null,reservedSlot:null};var Gs=qs;const Ws=({fulfilmentType:e,selectedAddress:t,reservedSlot:a})=>Lt()(e)?f.a.createElement(Fs,null):f.a.createElement(Gs,{fulfilmentType:e,reservedSlot:a,selectedAddress:t});Ws.defaultProps={fulfilmentType:null,selectedAddress:null,reservedSlot:null};var zs=Ws;function Ys(){return(Ys=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Ks(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Qs=f.a.createElement("path",{d:"m291.384 322.032c6.432 6.504 6.432 17.016 0 23.472-6.432 6.48-16.824 6.528-23.256 0l-91.92-93.792c-6.432-6.48-6.432-16.968 0-23.496l91.92-93.792c6.408-6.48 16.824-6.48 23.256 0 6.432 6.504 6.432 17.016 0 23.472l-75.384 82.104z"});const Zs=e=>{let t=e.svgRef,a=e.title,r=Ks(e,["svgRef","title"]);return f.a.createElement("svg",Ys({height:24,viewBox:"0 0 480 480",width:24,ref:t},r),a?f.a.createElement("title",null,a):null,Qs)},Js=f.a.forwardRef((e,t)=>f.a.createElement(Zs,Ys({svgRef:t},e)));a.p,a(554);const Xs=({label:e,history:t,clickHandler:a=(()=>t.goBack())})=>f.a.createElement("button",{className:"btn-back",onClick:()=>a(t),type:"button"},f.a.createElement("span",{className:"btn-back--icon"},f.a.createElement(Js,{key:"nav-icon-left"})),f.a.createElement("span",{className:"btn-back--label"},e));Xs.defaultProps={label:"Back",clickHandler:void 0};var $s=Object(ea.o)(Xs);a(555);const el=({title:e,hasBackLink:t,backLinkLabel:a})=>f.a.createElement("header",{className:"page-header"},t?f.a.createElement("div",{className:"page-header__controls"},f.a.createElement($s,{label:a})):null,f.a.createElement("h1",{className:"page-header__title"},e));el.defaultProps={hasBackLink:!1,backLinkLabel:"Back"};var tl=el;a(556);const al=({key:e,imageAltText:t,images:a,linkUrl:r,termsAndConditions:n})=>({type:"cms/SUPPLIER_BANNER_ADD_ITEM",payload:{key:e,imageAltText:t,images:a,linkUrl:r,termsAndConditions:n}}),rl=e=>({type:"cms/SUPPLIER_BANNER_REMOVE_ITEM",payload:{key:e}}),nl=e=>({type:"cms/PRODUCTS_LISTS_ADD_ITEM",payload:e});var ol=a(17),cl=(Pe.a.string.isRequired,Pe.a.string.isRequired,Pe.a.array,a(12)),sl=a.n(cl);function ll(){return(ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function il(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ul=f.a.createElement("g",{fill:"none"},f.a.createElement("path",{fill:"#d3212a",d:"M38.705 29.636A36.302 36.302 0 0 0 40 19.996c0-3.275-.436-6.516-1.295-9.632-1.126-3.896-3.871-6.958-7.53-8.397A32.785 32.785 0 0 0 20 0c-3.81 0-7.567.662-11.165 1.966-3.672 1.445-6.417 4.506-7.532 8.397a36.31 36.31 0 0 0 0 19.272c1.114 3.893 3.86 6.954 7.531 8.399a32.694 32.694 0 0 0 22.34 0c3.66-1.44 6.405-4.503 7.531-8.398"}),f.a.createElement("path",{fill:"#FFF",d:"M14.264 25.432h2.352V20.44h-2.352v-2.016h2.352v-1.992c0-.592.096-1.232.288-1.92a5.464 5.464 0 0 1 .972-1.908c.456-.584 1.06-1.068 1.812-1.452.752-.384 1.68-.576 2.784-.576.864 0 1.652.124 2.364.372a5.548 5.548 0 0 1 1.86 1.068l-1.704 1.992a3.268 3.268 0 0 0-1.104-.756 3.576 3.576 0 0 0-1.416-.276c-.576 0-1.052.116-1.428.348a2.774 2.774 0 0 0-.9.876c-.224.352-.38.736-.468 1.152a5.797 5.797 0 0 0-.132 1.2v1.872h3.936v2.016h-3.936v4.992h6.36V28h-11.64v-2.568z"}));const dl=e=>{let t=e.svgRef,a=e.title,r=il(e,["svgRef","title"]);return f.a.createElement("svg",ll({viewBox:"0 0 40 40",ref:t},r),a?f.a.createElement("title",null,a):null,ul)},ml=f.a.forwardRef((e,t)=>f.a.createElement(dl,ll({svgRef:t},e)));a.p;const pl=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,hl=e=>((e=>{if(!pl.test(e))throw new Error('"'.concat(e,'" is not a valid UUID'))})(e),"/product/".concat(e)),fl=e=>"/category/".concat(e);a(558);const bl=()=>f.a.createElement("span",{className:"product-promo--squircle"},f.a.createElement(ml,{height:G,width:q})),yl=({promotion:e})=>{const t=Object(ke.a)(e,2),a=t[0],r=t[1];return f.a.createElement("div",{className:"product-promo--details"},f.a.createElement("span",{className:"product-promo--name"},a),f.a.createElement("span",{className:"product-promo--expiry"},r||null))},El=({promotion:e,card:t})=>Object(v.isEmpty)(e)||Object(v.isEmpty)(e[0])?null:f.a.createElement("div",{className:"product-promo".concat(t?"--card":"")},f.a.createElement(bl,null),f.a.createElement(yl,{promotion:e}));El.defaultProps={promotion:[""],card:!1};var gl=El;function vl(){return(vl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Ol(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var wl=f.a.createElement("path",{d:"m16 10c0 .553-.048 1-.601 1h-10.798c-.552 0-.601-.447-.601-1s.049-1 .601-1h10.799c.552 0 .6.447.6 1z"});const kl=e=>{let t=e.svgRef,a=e.title,r=Ol(e,["svgRef","title"]);return f.a.createElement("svg",vl({viewBox:"0 0 20 20",ref:t},r),a?f.a.createElement("title",null,a):null,wl)},jl=f.a.forwardRef((e,t)=>f.a.createElement(kl,vl({svgRef:t},e)));a.p;function _l(){return(_l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Sl(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Cl=f.a.createElement("path",{d:"M16 10c0 .553-.048 1-.601 1H11v4.399c0 .552-.447.601-1 .601-.553 0-1-.049-1-.601V11H4.601C4.049 11 4 10.553 4 10c0-.553.049-1 .601-1H9V4.601C9 4.048 9.447 4 10 4c.553 0 1 .048 1 .601V9h4.399c.553 0 .601.447.601 1z"});const xl=e=>{let t=e.svgRef,a=e.title,r=Sl(e,["svgRef","title"]);return f.a.createElement("svg",_l({viewBox:"0 0 20 20",ref:t},r),a?f.a.createElement("title",null,a):null,Cl)},Nl=f.a.forwardRef((e,t)=>f.a.createElement(xl,_l({svgRef:t},e)));a.p,a(559);var Tl=f.a.memo(({id:e,gtin:t,quantity:a})=>{const r=Object(E.d)(xn),n=Object(E.d)(t=>Za(t,e)),o=Object(E.d)(Cn);const c=Object(E.c)(),s=r?Er:gr,l=()=>c(s(t,a+1)),i=G,u=q;return 0===a?f.a.createElement("button",{type:"button",className:"btn btn--primary btn--full btn--icon btn--add-to-basket",onClick:l,"data-testid":"product-card-add-to-basket-cta",disabled:o},f.a.createElement("span",{className:"btn__text"},"Add to basket"),f.a.createElement("span",{className:"btn__icon"},f.a.createElement(Nl,{height:i,width:u}))):f.a.createElement("div",{className:"quantity-controls"},f.a.createElement("div",{className:"quantity-display"},f.a.createElement("span",{"data-testid":"quantity-number"},"".concat(a).concat(n?" max":""))),f.a.createElement("div",{className:"quantity-buttons"},f.a.createElement("button",{className:"quantity-btn remove","data-testid":"quantity-btn-decrement",type:"button",onClick:()=>c(s(t,a-1))},f.a.createElement(jl,{height:i,width:u})),f.a.createElement("button",{className:"quantity-btn","data-testid":"quantity-btn-increment",disabled:o||n,type:"button",onClick:l},f.a.createElement(Nl,{height:i,width:u}))))});a(560);const Il=({id:e,brand:t,brandImageUrl:a,displayPrice:r,gtin:n,images:o,name:c,promotions:s,quantity:l,size:i,sizeUnit:u,theme:d})=>f.a.createElement("article",{className:"product-card","data-testid":"product-card","data-theme":d},f.a.createElement("header",{className:"product-card--header"},function(e){return e&&""!==e[0]}(s)?f.a.createElement(ml,{className:"product-card--offer-badge",alt:"Offer badge mid",height:z,width:W}):null,f.a.createElement(g.Link,{"data-testid":"product-card--link",to:hl(e),className:"product-card--link"},f.a.createElement(Ve,{images:o,className:"product-card--img",alt:c}),a?null:f.a.createElement("h1",{className:"product-card--name"},c))),f.a.createElement("footer",{className:"product-card--bottom"},f.a.createElement(gl,{promotion:s,card:!0}),f.a.createElement("div",{className:"product-card--info"},f.a.createElement("div",{className:"product-card--info-block"},a?f.a.createElement("h1",{className:"product-card--name"},c):null,f.a.createElement("div",{className:"product-card--info--size"},i," ",u),f.a.createElement("div",{className:"product-card--info--price"},r)),a?f.a.createElement("div",{className:"product-card--info-block"},f.a.createElement("img",{src:a,alt:t,className:"product-card--brand-img"})):null),f.a.createElement(Tl,{id:e,gtin:n,quantity:l})));Il.defaultProps={size:"",sizeUnit:"",promotions:[""],brand:null,brandImageUrl:null,theme:"light"};var Al=Il;const Rl=({className:e=""})=>f.a.createElement("div",{className:"skeleton--block ".concat(e)});Rl.defaultProps={className:""};var Pl=Rl;var Fl=()=>f.a.createElement("div",{className:"pv1"},f.a.createElement(Pl,{className:"w-80 h1 mv2"}),f.a.createElement(Pl,{className:"w-60 h1 mv2"}));a(92);const Ll=()=>f.a.createElement("div",{className:"pv1"},f.a.createElement(Pl,{className:"img mt2 mb3"}),f.a.createElement(Pl,{className:"w-100 h1 mv2"}),f.a.createElement(Pl,{className:"w-80 h1 mv2"}),f.a.createElement(Pl,{className:"w-25 h1 mv3"}),f.a.createElement(Pl,{className:"w-100 h2 mv3"})),Dl=()=>f.a.createElement("div",{className:"default-grid pv3"},f.a.createElement(Ll,null),f.a.createElement(Ll,null),f.a.createElement(Ll,null),f.a.createElement(Ll,null));var Bl=()=>f.a.createElement("div",{"data-testid":"loading-category-page",className:"container container--padded"},f.a.createElement("header",{className:"pv2"},f.a.createElement(Pl,{className:"w-50 w-25-m h1 mv3"}),f.a.createElement(Pl,{className:"w-80 w-50-m h2 mt3 mb2"})),f.a.createElement("div",{className:"category-list"},f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null)),f.a.createElement("div",{className:"default-grid pv3"},f.a.createElement(Ll,null),f.a.createElement(Ll,null),f.a.createElement(Ll,null),f.a.createElement(Ll,null)));a(561);const Ml=({keyForProductCount:e,count:t,loadMore:a})=>{const r=Object(E.c)(),n=Object(E.d)(e=>e.products.isFetchingMore),o=Object(E.d)(t=>Ka(t,e)),c=function({count:e,totalCount:t}){const a="".concat(t?"of ".concat(t," products"):"products");return"You've viewed ".concat(e," ").concat(a)}({totalCount:o,count:t});return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"product-list--pagination"},f.a.createElement("span",null,c),t<o?f.a.createElement(Hc,{className:"btn--secondary btn--full",onClick:()=>r(a),disabled:n},n?f.a.createElement(Ae,null):"Show more products"):null),n?f.a.createElement(Dl,null):null)};Ml.defaultProps={keyForProductCount:null};var Ul=Ml;a(562);const Hl=e=>{let t=e.products,a=e.children,r=Object(ol.a)(e,["products","children"]);return sl()(t)?null:f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"product-list--grid"},t.map(e=>f.a.createElement(Al,Object.assign({key:e.id},e,r,{theme:"light"})))),a)};Hl.defaultProps={children:null};const Vl=e=>f.a.createElement("div",{className:"product-list--horizontal"},f.a.createElement("div",{className:"product-list--container"},f.a.createElement(Hl,e))),ql=e=>{let t=e.loadMore,a=e.keyForProductCount,r=Object(ol.a)(e,["loadMore","keyForProductCount"]);return f.a.createElement("div",{className:"product-list"},f.a.createElement("div",{className:"product-list--container"},f.a.createElement(Hl,r,t&&f.a.createElement(Ul,{keyForProductCount:a,loadMore:t,count:r.productCount}))))};ql.defaultProps={keyForProductCount:null,loadMore:null};a(563);const Gl=({label:e,url:t,size:a,colour:r})=>f.a.createElement(g.Link,{to:t,className:"pill pill--".concat(a," pill--").concat(r)},e);Gl.defaultProps={colour:"default"};var Wl=Gl;var zl=({children:e})=>f.a.createElement("div",{className:"container container--padded"},e);a(564);function Yl(e){return Object(D.a)({},e,{isExpanded:!e.isExpanded})}class Kl extends h.Component{constructor(e){super(e),this.state={isExpanded:!1}}render(){const e=this.props,t=e.categories,a=e.isStandalone,r=e.itemsToShow,n=e.theme,o=this.state.isExpanded;return sl()(t)?null:f.a.createElement("nav",{className:"category-links","data-theme":n},f.a.createElement(zl,null,f.a.createElement("h3",{className:"category-links__title"},"Browse"),(a?o||!r?t:t.slice(0,r):t).map(e=>f.a.createElement(Wl,{url:"/category/".concat(e.id),label:e.name,key:e.id,size:"small"})),a?f.a.createElement("button",{type:"button",className:"pill pill--small pill--secondary",onClick:()=>this.setState(Yl)},o?"Hide":"Show all"):null))}}Kl.defaultProps={categories:null,isStandalone:!1,itemsToShow:null,theme:"light"};var Ql=Kl;a(565);const Zl=e=>{let t=e.title,a=e.theme,r=e.categories,n=Object(ol.a)(e,["title","theme","categories"]);return f.a.createElement("section",{"data-theme":a},f.a.createElement("div",{className:"product-group"},f.a.createElement("h2",{className:"product-group--title"},t),f.a.createElement(Vl,n),f.a.createElement(Ql,{categories:r,theme:a})))};Zl.defaultProps={theme:"default",categories:null};var Jl=Zl;a(566);var Xl=()=>{const e=Object(E.c)(),t=Object(E.d)(ee),a=Object(E.d)(An),r=Object(E.d)(Ga(a));return Object(h.useEffect)(()=>{e({type:"cms/RELATED_PRODUCTS_GET_CROSS_SELL",payload:{type:aa.basket}})},[]),0===t.length||0===r.length?null:f.a.createElement("div",{className:"did-you-forget"},f.a.createElement(Jl,{theme:"linen",title:"Did you forget",products:r}))};a(567);var $l=({id:e,gtin:t,name:a,images:r,price:n,quantity:o,promotions:c})=>f.a.createElement("div",{className:"basket-item"},f.a.createElement(g.Link,{className:"basket-item--image",to:hl(e)},f.a.createElement(Ve,{images:r,alt:a})),f.a.createElement("div",{className:"basket-item--info"},f.a.createElement("div",{className:"basket-item--details"},f.a.createElement("h4",{className:"basket-item--name"},f.a.createElement(g.Link,{to:hl(e)},a)),f.a.createElement(yl,{card:!0,promotion:c})),f.a.createElement("div",{className:"basket-item--totals"},f.a.createElement("div",{className:"basket-item--price"},Y(n)),f.a.createElement(Tl,{id:e,quantity:o,gtin:t}))));var ei=({hasNoMinBasketValue:e,hasNoOrderFulfilment:t})=>e||t?f.a.createElement("div",{className:"basket--messages"},e?f.a.createElement("p",{className:"basket--messages--item"},f.a.createElement(Vt,{width:"24",height:"24"}),f.a.createElement("span",null,"Subtotal ",Y(15)," minimum spend not met")):null,t?f.a.createElement("p",{className:"basket--messages--item"},f.a.createElement(Vt,{width:"24",height:"24"}),f.a.createElement("span",null,"Arrange delivery or collection")):null):null;a(568);var ti=({content:e})=>f.a.createElement("dl",{"data-testid":"infoblock-table",className:"infoblock-table"},e.map(({key:e,value:t,additionalCls:a="",warning:r})=>{const n="infoblock-table--term".concat(a?" ".concat(a):""),o="infoblock-table--definition tr".concat(a?" ".concat(a):"");return f.a.createElement(h.Fragment,{key:e},f.a.createElement("dt",{className:n},r?f.a.createElement(Vt,{width:"24",height:"24"}):null," ",e),f.a.createElement("dd",{className:o},t))}));a(569);const ai=e=>e?-1*e:e,ri=({carrierBags:e,deliveryCharge:t,isCollection:a,isNotMinValue:r,items:n,savings:o,staffDiscount:c,subtotal:s,total:l,voucherDiscount:i})=>{const u="infoblock-table--highlight",d=(m=[{key:"Items",value:n},{key:"Colleague member discount",value:ai(c),additionalCls:u},{key:"Promotion discount",value:ai(i),additionalCls:u},{key:"Savings",value:ai(o),additionalCls:u},{key:"Subtotal",value:s,additionalCls:"infoblock-table--bold",warning:r},{key:"Delivery",value:a?null:(p=t,null===p?null:0===p?"Free":p)},{key:"Carrier bags",value:e},{key:"Total",value:l,additionalCls:"infoblock-table--bold"}],Object(v.compose)(e=>Object(v.map)(e=>Object(D.a)({},e,{value:Object(v.isNumber)(e.value)?Y(e.value):e.value}),e),e=>Object(v.filter)(e=>e.value&&0!==e.value,e))(m));var m,p;return f.a.createElement("div",{"data-testid":"basket-summary",className:"basket--summary"},f.a.createElement(ti,{content:d}))};ri.defaultProps={deliveryCharge:null,isNotMinValue:!1};var ni=ri;var oi=()=>{const e=Object(E.d)(ce),t=Object(E.d)(se),a=function(){const e=Object(E.d)($),t=e.items,a=e.savings,r=e.staffDiscount,n=e.subtotal,o=e.total,c=e.voucherDiscount,s=gn(),l=Object(E.d)(s),i=Object(E.d)(Mn)?.2:0;return{carrierBags:i,deliveryCharge:Gn(l),items:t,savings:a,staffDiscount:r,subtotal:n,total:Un(o+i),voucherDiscount:c}}(),r=a.carrierBags,n=a.deliveryCharge,o=a.items,c=a.savings,s=a.staffDiscount,l=a.subtotal,i=a.total,u=a.voucherDiscount,d=Object(E.d)(wn);return e?null:f.a.createElement(ni,{carrierBags:r,deliveryCharge:n,isCollection:d,isNotMinValue:t,items:o,savings:c,staffDiscount:s,subtotal:l,total:i,voucherDiscount:u})};const ci=({basketItems:e,cannotCheckout:t,hasNoMinBasketValue:a,hasNoOrderFulfilment:r,history:n,orderFulfilment:o})=>(Ps({step:Ts,revenueSelector:bs}),f.a.createElement("div",{className:"basket","data-testid":"basket"},f.a.createElement(Qt,null),f.a.createElement(Jt,{fillParentContainer:!0,theme:"default"},f.a.createElement(tl,{title:"Basket"}),f.a.createElement("section",{className:"basket--items"},e.length>0?e.map(e=>f.a.createElement($l,Object.assign({key:e.id},e))):f.a.createElement("div",{className:"basket--empty"},"Your basket is empty"))),ca()&&f.a.createElement(Xl,null),f.a.createElement(Jt,{fillParentContainer:!0,theme:"default"},f.a.createElement(oi,null),f.a.createElement("div",{className:"basket--slots"},f.a.createElement(zs,o)),f.a.createElement("div",{className:"basket--bottom","data-testid":"basket-bottom"},f.a.createElement(ei,{hasNoMinBasketValue:a,hasNoOrderFulfilment:r}),f.a.createElement("div",{className:"basket--cta"},f.a.createElement("button",{type:"button",className:"btn btn--full btn--primary",disabled:t,onClick:()=>n.push("/checkout")},"Checkout"))))));ci.defaultProps={orderFulfilment:null};var si=ci;const li={items:{},isFetching:!1,unavailable:[],unavailableIn:null},ii=(e,t)=>!((e,t)=>t[e])(t.gtin,e)&&t.quantity>0?Object(D.a)({},e,{[t.gtin]:t}):((e,t)=>0===t.quantity?Object(v.omit)(t.gtin,e):Object(D.a)({},e,{[t.gtin]:t}))(e,t);var ui=(e=li,t)=>{switch(t.type){case Ja:case tr:return Object(D.a)({},e,{isFetching:!0});case Xa:return Object(D.a)({},e,{isFetching:!1});case ar:return Object(D.a)({},e,{isFetching:!1,updated:!0});case rr:return Object(D.a)({},e,{isFetching:!1,updated:!1});case $a:{const a=ii(e.items,t.payload);return Object(D.a)({},e,{items:a})}case nr:return((e,{products:t,unavailableIn:a})=>Object(D.a)({},e,{unavailable:e.unavailable.concat(t),unavailableIn:a}))(e,t.payload);case or:return((e,{unavailableGtins:t})=>Object(D.a)({},e,{items:Object(v.omit)(t,e.items)}))(e,t.payload);case"ui/HIDE_CHECK_AVAILABILITY":return(e=>Object(D.a)({},e,{unavailable:[],unavailableIn:null}))(e);case ts:return li;default:return e}};const di=e=>{const t=Object(v.split)(", ",e),a=Object(v.flow)(Object(v.dropRight)(1),Object(v.join)(", "),v.toLower,Object(v.replace)(/\w+/g,v.capitalize))(t);return Object(v.flow)(v.last,Object(v.concat)(a),Object(v.join)(", "))(t)};function mi(e){console.error(e)}const pi={referer:"/",referrerPolicy:"no-referrer-when-downgrade",mode:"cors"},hi=e=>Object(D.a)({Accept:"application/json"},e),fi=e=>Object(D.a)({"Content-Type":"application/json"},hi(e)),bi=e=>Object(D.a)({Accept:"*/*"},e),yi=()=>{const e=B();return{"DG-Api-Key":e.REACT_APP_DG_API_KEY,"DG-Organization-Id":e.REACT_APP_DG_ORG_ID}},Ei=({url:e,headers:t={},options:a={}})=>Object(vo.a)(go.a.mark((function r(){return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",fetch(e,Object(D.a)({},pi,{},a,{method:"GET",headers:hi(t)})));case 1:case"end":return r.stop()}}),r)}))),gi=({url:e,headers:t={}})=>Ei({url:e,headers:t,options:{cache:"no-cache"}}),vi=function(){var e=Object(vo.a)(go.a.mark((function e({url:t,headers:a,body:r,method:n}){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,Object(D.a)({},pi,{method:n,headers:r?fi(a):bi(a),body:r?JSON.stringify(r):null})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oi=({url:e})=>Ei({url:e,headers:yi()}),wi=({url:e,body:t})=>(({url:e,headers:t={},body:a})=>()=>vi({url:e,headers:t,body:a,method:"POST"}))({url:e,headers:yi(),body:t}),ki=({url:e,body:t=null})=>(({url:e,headers:t={},body:a=null})=>()=>vi({url:e,headers:t,body:a,method:"PATCH"}))({url:e,headers:yi(),body:t}),ji=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status<500)){e.next=6;break}return e.next=3,t.json();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0={error:{code:"internal_server_error",message:t.statusText}};case 7:return mi(a=e.t0),e.abrupt("return",Promise.reject(a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_i=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ji(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();class Si extends Error{constructor(e,t){super(e),this.status=t}}const Ci=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Si(t.statusText,t.status);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xi=e=>e,Ni=function(){var e=Object(vo.a)(go.a.mark((function e({operation:t,transform:a=xi,error:r=xi}){var n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!(n=e.sent).ok){e.next=12;break}if(!(o=n.headers.get("content-type"))||!o.includes("json")){e.next=11;break}return e.t0=a,e.next=9,n.json();case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 11:return e.abrupt("return",{ok:n.ok,status:n.status});case 12:return e.abrupt("return",r(n));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ti=Object.freeze({postcodeAppended:100,incompleteAddressEntered:500}),Ii=e=>encodeURIComponent(e.toLowerCase()),Ai=e=>{const t={1:"name",2:"apartment",3:"building_name",4:"building",5:"building_group",6:"street",7:"locality",8:"village",9:"town",10:"post_town",11:"city",13:"county"};return e.map(e=>({name:t[e.type.code],value:e.value})).reduce((e,t)=>Object(D.a)({},e,{[t.name]:t.value}),{})},Ri=e=>{let t=e.result,a=Object(ol.a)(e,["result"]);const r=t.code;return{address:(()=>{const e=a.postcode,t=a.postalAddress,n=a.postalAddressElements;if(r===Ti.postcodeAppended){const a=((e,t)=>e.endsWith(t)?e:"".concat(e,", ").concat(t))(t.join(", "),e);return Object(D.a)({displayName:di(a),postcode:e},Ai(n))}return null})(),options:(()=>{const e=a.options;return r===Ti.incompleteAddressEntered?e.map(({displayName:e,links:t})=>({displayName:di(e),link:Object(v.getOr)("","[0].href",t)})):null})()}},Pi=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ei({url:t}),r=_i,e.next=4,Ni({operation:a,transform:Ri,error:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fi=e=>{const t=B().REACT_APP_AA_API_KEY,a=Ii(e);return"https://api.autoaddress.ie/2.0/getGBPostcodeData?postcode=".concat(a,"&key=").concat(t)},Li=({result:e,spatialInfo:t})=>{if(e.code===Ti.postcodeAppended){return t.wgs84.location}return null},Di=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fi(t),r=Ei({url:a}),n=_i,e.next=5,Ni({operation:r,transform:Li,error:n});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bi=e=>{const t=B().REACT_APP_DG_URL;return"https://".concat(t).concat(e)},Mi=({latitude:e,longitude:t})=>{const a="/v1/dts/places-nearby?latitude=".concat(e,"&longitude=").concat(t);return Bi(a)},Ui=e=>{const t=({place_id:e,distance:t,formatted_address:a,name:r})=>({id:e,distance:t,formattedAddress:a,name:r}),a=e.pickups,r=e.deliveries,n=(({deliveries:e,pickups:t})=>{const a=Object(v.getOr)(null,"[0].place_id",e),r=Object(v.getOr)(null,"[0].place_id",t);return a||r})({deliveries:r,pickups:a});return{collections:Object(v.map)(t,a),deliveries:Object(v.map)(t,r),storeId:n}},Hi=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oi({url:Mi(t)}),r=ji,e.next=4,Ni({operation:a,transform:Ui,error:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vi=e=>{const t=B().REACT_APP_AA_API_KEY,a=Ii(e);return"https://api.autoaddress.ie/2.0/findaddress?address=".concat(a,"&key=").concat(t,"&language=en&country=gb&limit=-1&addressElements=true")},qi=({result:e,links:t,options:a,postcode:r,postalAddress:n,postalAddressElements:o})=>{const c=e=>gs()("","[0].href",e);return{postcode:r,options:(()=>{if(e.code===Ti.postcodeAppended){const e=Ai(o);return[Object(D.a)({displayName:di("".concat(n.join(", "),", ").concat(r)),link:c(t)},e)]}return a.map(e=>({displayName:di(e.displayName),link:c(e.links)}))})()}},Gi=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vi(t),r=Ei({url:a}),n=_i,e.next=5,Ni({operation:r,transform:qi,error:n});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Wi(e){const t=Object(v.getOr)(0,["voucher"],e);return t?t.value:0}function zi(e){return{basketId:Object(v.get)(["id"],e),discount:Object(v.get)(["cart_discount"],e),membershipNumber:Object(v.get)(["memberCardNumber"],e)||"",staffDiscount:Object(v.get)(["rewards","staffDiscount"],e),total:Object(v.get)(["cart_value"],e),voucherDiscount:Wi(e)}}function Yi({basketItems:e,membershipNumber:t,slot:a,storeExternalId:r}){const n=Object(v.map)(({sku:e,id:t,masterProductId:a,price:r,quantity:n})=>({allow_replace:!1,picked:!1,quantity:n,clicks_unit_price:r,bricks_unit_price:r,total_bricks_price:r,total_clicks_price:r,product:{id:t,sku:e,master_product_id:a}}),e),o=Object(v.pickBy)(v.identity,{member_card_number:t});return Object(D.a)({items:n,place_ext_id:r,delivery_charge_total:a?a.deliveryPrice:0},o)}const Ki=({basketId:e,basketItems:t,membershipNumber:a,slot:r,storeExternalId:n})=>{const o=Yi({basketItems:t,membershipNumber:a,slot:r,storeExternalId:n});return"00000000-0000-0000-0000-000000000000"===e?o:Object(D.a)({},o,{external_data:{coop:{basket:{id:e,retainAppliedVoucher:!0}}}})},Qi=({basketItems:e,membershipNumber:t,slot:a,storeExternalId:r,voucherCode:n})=>{const o=Yi({basketItems:e,membershipNumber:t,slot:a,storeExternalId:r});return Object(v.isEmpty)(n)?o:Object(D.a)({},o,{external_data:{coop:{basket:{voucherCode:n}}}})},Zi=({basketId:e,basketItems:t,membershipNumber:a,slot:r,storeExternalId:n})=>Object(D.a)({},Yi({basketItems:t,membershipNumber:a,slot:r,storeExternalId:n}),{external_data:{coop:{basket:{id:e}}}}),Ji=({data:e})=>{const t=zi(e),a=t.basketId,r=t.discount,n=t.membershipNumber,o=t.staffDiscount,c=t.total;return{checkout:{membershipNumber:n},evaluate:e,order:{basketId:a,discount:r,staffDiscount:o,subtotal:c+r,total:c,voucherDiscount:t.voucherDiscount}}},Xi=()=>({data:e})=>{const t=Object(v.get)("external_data",e);return Ji({data:t})},$i=({data:e,voucherCode:t})=>0!==Object(v.getOr)(0,["external_data","voucher","statusCode"],e)?{errorVoucher:Object(v.get)(["external_data","voucher","statusText"],e),voucherCode:null}:{errorVoucher:null,voucherCode:t},eu=({voucherCode:e})=>({data:t})=>{const a=Object(v.get)("external_data",t),r=Ji({data:a});return Object(D.a)({},r,{order:Object(D.a)({},r.order,{},$i({data:t,voucherCode:e}))})},tu=()=>({data:e})=>{const t=Object(v.get)("external_data",e),a=Ji({data:t});return Object(D.a)({},a,{order:Object(D.a)({},a.order,{voucherCode:null})})};function au(e,t,a){return ru.apply(this,arguments)}function ru(){return(ru=Object(vo.a)(go.a.mark((function e(t,a,r){var n,o,c,s,l,i;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bi("/v1/shopping-lists/evaluate"),o=a(t),c=wi({url:n,body:o}),s=r(t),l=ji,e.next=7,Ni({operation:c,transform:s,error:l});case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const nu=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(t,Ki,Xi));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ou=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(t,Qi,eu));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cu=function(){var e=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",au(t,Zi,tu));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),su=e=>{const t="/v1/search/categories?tree=coophomedelivery&levels=1,2&page_size=500&store_id=".concat(e);return Bi(t)},lu=e=>1===e.level?null:Object(v.getOr)(null,"parent_ext_id",e),iu=e=>Object(v.get)(["name","en"],e),uu=(e,t)=>{if(e.level>1)return[];const a=Object(v.get)("ext_id",e);return Object(v.pipe)(e=>Object(v.filter)(e=>e.parent_ext_id===a,e),Object(v.map)("ext_id"))(t)},du=({data:e})=>Object(v.keyBy)("id",Object(v.map)(t=>({id:t.ext_id,name:iu(t),order:t.order,parent:lu(t),subcategories:uu(t,e)}),e)),mu=e=>({data:Object(v.filter)(e=>!1===iu(e).startsWith("View All "),e.data)}),pu=e=>Object(v.pipe)(mu,du)(e),hu=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=su(t),r=Oi({url:a}),n=ji,e.next=5,Ni({operation:r,transform:pu,error:n});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fu=()=>{const e=B().REACT_APP_CMS_URL;return"https://".concat(e)},bu=e=>{const t=e?"/".concat(e):"";return"".concat(fu(),"/entries").concat(t)},yu=e=>{const t=B().REACT_APP_CMS_KEY;return"".concat(e,"?access_token=").concat(t)},Eu=Object.freeze({small:"bannerImageSmall",medium:"bannerImageMedium",large:"bannerImageLarge"}),gu=Object.freeze({homepage:"homepage"}),vu=(e,t)=>{const a=Object(v.get)("sys.id",e),r=Object(v.flow)(Object(v.getOr)([],"includes.Asset"),Object(v.find)(e=>e.sys.id===a),Object(v.get)("fields.file.url"))(t);return"https:".concat(r)},Ou=({bannerId:e},t)=>{(e=>{const t=Object(v.getOr)(null,"errors[0].details.id",e);if(t){const a=Object(v.flow)(Object(v.getOr)([],"items"),Object(v.filter)(e=>Object(v.getOr)(null,"fields.banner.sys.id",e)===t))(e);if(a){const e=Object(v.getOr)(null,"[0].fields.name",a),t=Object(v.getOr)(null,"[0].fields.title",a);throw new Error("misconfigured: ".concat(e||t))}}})(t);const a=Object(v.flow)(Object(v.getOr)([],"includes.Entry"),Object(v.find)(t=>t.sys.id===e),Object(v.get)("fields"))(t),r=a.bannerImageSmall,n=a.bannerImageMedium,o=a.bannerImageLarge,c=a.imageAltText,s=a.linkUrl,l=a.termsAndConditions;return{imageAltText:c,images:{[Eu.small]:vu(r,t),[Eu.medium]:vu(n,t),[Eu.large]:vu(o,t)},linkUrl:s,termsAndConditions:l}},wu=e=>Object(v.toLower)(Object(v.trim)(e)),ku=(e,t)=>{const a=t.items;return Object(v.flow)(Object(v.orderBy)(["sys.updatedAt"],["desc"]),Object(v.find)(e),Object(v.getOr)(null,"fields.banner.sys.id"))(a)},ju=({categoryId:e})=>"".concat(yu(bu()),"&content_type=category&fields.categoryId=").concat(e),_u=({categoryId:e},t)=>{const a=ku(t=>t.fields.categoryId===e,t);return a?Ou({bannerId:a},t):null},Su=function(){var e=Object(vo.a)(go.a.mark((function e({categoryId:t}){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gi({url:ju({categoryId:t})}),r=Object(v.partial)(_u,[{categoryId:t}]),e.next=4,Ni({error:Ci,operation:a,transform:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cu=({page:e})=>"".concat(yu(bu()),"&content_type=page&fields.type=").concat(e),xu=({page:e},t)=>{const a=ku(t=>t.fields.type===e,t);return a?Ou({bannerId:a},t):null},Nu=function(){var e=Object(vo.a)(go.a.mark((function e({page:t}){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gi({url:Cu({page:t})}),r=Object(v.partial)(xu,[{page:t}]),e.next=4,Ni({error:Ci,operation:a,transform:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tu=({searchTerm:e})=>"".concat(yu(bu()),"&content_type=searchTerm&fields.terms[match]=").concat(encodeURIComponent(e)),Iu=({searchTerm:e},t)=>{const a=ku(t=>Object(v.map)(v.toLower,t.fields.terms).includes(e),t);return a?Ou({bannerId:a},t):null},Au=function(){var e=Object(vo.a)(go.a.mark((function e({searchTerm:t}){var a,r,n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wu(t),r=gi({url:Tu({searchTerm:a})}),n=Object(v.partial)(Iu,[{searchTerm:a}]),e.next=5,Ni({operation:r,transform:n,error:Ci});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ru=(e,t)=>{const a=Object(v.flow)(Object(v.orderBy)(["sys.updatedAt"],["desc"]),Object(v.find)(t=>t.fields.type===e),Object(v.getOr)([],"fields.products"),Object(v.map)(e=>{const a=Object(v.get)("sys.id",e);return Object(v.find)(e=>e.sys.id===a,t.includes.Entry).fields.gtin}))(t.items);return{name:e,items:a}},Pu=e=>"".concat(yu(bu()),"&content_type=productsList&fields.type=").concat(e),Fu=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gi({url:Pu(t)}),r=Object(v.partial)(Ru,[t]),e.next=4,Ni({error:Ci,operation:a,transform:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lu=e=>t=>{const a=Object(v.flow)(Object(v.get)("includes.Entry"),Object(v.map)(e=>e.fields.gtin))(t);return{[e]:a}},Du=e=>"".concat(yu(bu()),"&content_type=product&fields.gtin=").concat(e),Bu=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gi({url:Du(t)}),e.next=3,Ni({error:Ci,operation:a,transform:Lu(t)});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Mu=e=>{const t=null===e||void 0===e?void 0:e.items[0];if(!t)return{};const a=t=>{const a=e.includes.Asset.find(e=>e.sys.id===t).fields;return{alt:a.title,src:a.file.url,w:a.file.details.image.width}},r=t=>{const a=e.includes.Entry.find(e=>e.sys.id===t);if("productsList"===a.sys.contentType.sys.id)return{element:"productsList",title:(r=a.fields).heading,type:r.type.split("campaign - ")[1],products:r.products.map(t=>e.includes.Entry.find(e=>e.sys.id===t.sys.id).fields.gtin)};var r};return{title:t.fields.campaignTitle,hero:{large:a(t.fields.heroLarge.sys.id),small:a(t.fields.heroSmall.sys.id)},elements:t.fields.pageElements.map(e=>r(e.sys.id))}};const Uu=e=>"".concat(yu(bu()),"&content_type=campaign&fields.uri=").concat(e,"&include=2"),Hu=function(){var e=Object(vo.a)(go.a.mark((function e({uri:t}){var a,r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Uu(t),e.next=3,Ni({error:Ci,transform:Mu,operation:gi({url:a})});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();const Vu=e=>{const t=e.find(e=>"0000000000644"===e.ean);return t?t.quantity*t.retailPrice:0};const qu=({data:e})=>{const t=w()(["external_data","coop","basket"],e),a=zi(t),r=a.discount,n=a.staffDiscount,o=a.total,c=a.voucherDiscount,s=w()(["payment","checkout_url"],e),l=(e=>{const t=new URL(e);return new URLSearchParams(t.search).get("checkoutId")})(s),i=w()(["parts","0","delivery_method","service","address","address"],e),u=Hn(w()(["parts","0","price","total_price_vat"],e)),d=w()(["parts","0","products"],e).reduce((e,t)=>e+t.row_price.price,0);const m=(({type:e,delivery_slot:{delivery_price:t}})=>"home-delivery"===e?t:0)(w()(["parts","0","delivery_method","service"],e)),p=(({carrierBags:e,deliveryCharge:t,discount:a,items:r,staffDiscount:n,total:o,voucherDiscount:c})=>({carrierBags:e,deliveryCharge:t,items:r,savings:Un(a-n),staffDiscount:n,subtotal:Un(r-a),total:o,voucherDiscount:c}))({carrierBags:Vu(t.items),deliveryCharge:m,discount:r,items:d,staffDiscount:n,total:Hn(o),voucherDiscount:c});return{orderNumber:e.id,visibleId:e.visible_id,createdAt:new Date,confirmedPrice:u,checkoutUrl:s,checkoutId:l,customerEmail:w()(["customer_address","email"],e),address:i,totalBreakdown:p}},Gu=function(){var e=Object(vo.a)(go.a.mark((function e({order:t}){var a,r,n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bi("/v1/customers/555/orders"),r=wi({url:a,body:t}),n=ji,e.next=5,Ni({operation:r,transform:qu,error:n});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Wu(e){return Bi("/v1/orders/".concat(e,"/finalize"))}class zu extends Error{constructor(e){super(e),this.body=e.error,this.status=e.status}}function Yu(e){return Ku.apply(this,arguments)}function Ku(){return(Ku=Object(vo.a)(go.a.mark((function e(t){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:{code:"no_error_body",message:"No error body returned"}});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Qu(e){return Zu.apply(this,arguments)}function Zu(){return(Zu=Object(vo.a)(go.a.mark((function e(t){var a,r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yu(t);case 2:if(a=e.sent,r=Object(D.a)({},a,{ok:!1,status:t.status}),400!==t.status){e.next=6;break}return e.abrupt("return",r);case 6:throw new zu(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const Ju=function(){var e=Object(vo.a)(go.a.mark((function e({operation:t,error:a}){var r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(204!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",{ok:!0,status:r.status});case 5:return e.abrupt("return",a(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xu=function(){var e=Object(vo.a)(go.a.mark((function e({orderNumber:t}){var a,r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ki({url:Wu(t)}),e.next=3,Ju({operation:a,error:Qu});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var $u=a(303),ed=a.n($u);const td=e=>ed()(e,{deep:!0}),ad=(e="")=>{const t=e.match(/\[(\d{1,2})\](.*)/);return t?{maxQuantity:parseInt(t[1],10),name:t[2]}:{maxQuantity:U(),name:e}};var rd=function(e){return Object(v.map)(e=>e.extId,e.parentCategories).reverse()};const nd={GRM:"g",KJO:"kJ",E14:"kcal",MC:"mcg",MGM:"mg"};var od=function(e){if(!sl()(e)){return e.map(e=>{const t=e.nutrientDetails,a=e.servingSizeDescription;return{nutrients:t.map(e=>function(e){const t=e.nutrientTypeName,a=e.quantityContained;return{name:t.en,quantity:(r=a,r.map(({_:e,measurementUnitCode:t,name:{en:a}})=>{const r=nd[t];return r?"".concat(e).concat(r):"".concat(e," ").concat(a)}))};var r}(e)),servingSize:a.en}})}return[]};function cd(e){if(Object(v.isNil)(e))return[];if(Object(v.isNil)(e.match(/\(Offer Valid Until \d{2}\/\d{2}\/\d{4}\)/)))return[e];const t=/\d{2}\/\d{2}\/\d{4}/;try{const a=e.split("(")[0].toLowerCase().trim();return[a.charAt(0).toUpperCase()+a.slice(1),"Valid until ".concat(e.match(t)[0])]}catch(a){return console.error("Promo string doesn't match agreed format"),[e]}}const sd={brand:["details","brand_name"],ext_id:"ext_id",gtin:"gtin",id:"master_product_id",current_id:"id",images:["details","media"],master_product_id:"master_product_id",promotions:["details","trade_item_marketing_message","en"],size:["details","net_content","0","_"],sizeUnit:["details","net_content","0","name","en"],sku:"ext_id"},ld=Object(D.a)({},sd,{description:["description","en"],name:["name","en"],parent_categories:["categories"],price:["prices","clicks_unit_price"]}),id=Object(D.a)({},sd,{alcohol_by_volume:["details","percentage_of_alcohol_by_volume"],allergens:["details","allergen_information","0","allergen_statement","en"],allergenSubtitle:["details","x_additional_ingredient_statement","en"],comparison_price_text:["price","comparison_prices","0","comparison_price_text"],country:["details","place_of_item_activity_information","country_of_origin_statement","en"],description:["details","trade_item_description","en"],dietary_info:["details","diet_type_description","en"],ingredients:["details","food_and_beverage_ingredients"],manufacturer:["details","manufacturers_of_trade_item","0","party_address"],name:"name",net_weight:["details","net_weight","_"],nutrition_info:["details","nutrient_headers"],other_info:["details","additional_information","additionalInformation"],packaging:["details","packaging","0","packaging_type_name","en"],parent_categories:["details","presentation_categories"],price:["price","clicks_unit_price"],restriction:["details","consumer_sales_conditions","0"],safety_info:["details","safety_information","0","precautionary_statements","0","precautionary_statements_description","en"],storage_info:["details","consumer_storage_instructions","en"],usage_info:["details","consumer_usage_instructions","en"]});function ud(e,t){const a=Object(v.mapValues)(t=>Object(v.get)(t,e),t),r=td(a),n=ad(r.name),o=n.maxQuantity,c=n.name;return Object(D.a)({},r,{maxQuantity:o,name:c,promotions:cd(r.promotions),parentCategories:rd(r),restriction:r.restriction?{code:r.restriction.consumerSalesConditionCode,defaultMessage:r.restriction.consumerSalesConditionName.en}:null})}function dd({data:e}){const t=ud(e,id),a=function(e){return e.map(e=>({name:Object(v.getOr)(null,["name","en"],e),allergenPositions:Object(v.flow)(Object(v.getOr)([],["xNameEmphasis","en"]),Object(v.uniqWith)(v.isEqual),Object(v.sortBy)("startAt"))(e)}))}(t.ingredients);return Object(D.a)({},t,{ingredients:a,alcoholByVolume:t.alcoholByVolume?"".concat(t.alcoholByVolume,"%"):t.alcoholByVolume,nutritionInfo:od(t.nutritionInfo)})}const md=(e={})=>t=>{const a=t.meta.pagination,r=t.data.products.map(e=>ud(e,ld)),n=function(e){return td(e)}(a);return Object(D.a)({products:r,pagination:n},e)},pd=()=>Bi("/v1/search/products");function hd(e){return{page:e,page_size:16}}const fd=e=>({filters:{category_path_ids:[e.parentCategoryId]},language:"en",meta:{pagination:hd(e.nextPage)},store_id:e.storeId});function bd(){return(bd=Object(vo.a)(go.a.mark((function e(t){var a,r,n,o,c;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fd(t),r=wi({url:pd(),body:a}),n=md({parentCategoryId:t.parentCategoryId}),o=ji,e.next=6,Ni({operation:r,error:o,transform:n});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yd({gtins:e,storeId:t}){return{language:"en",tree:"coophomedelivery",store_id:t,gtin:e}}function Ed(e,t){const a=md()(t).products,r=Object(v.map)(Object(v.property)("gtin"),a);return{available:a,unavailable:Object(v.difference)([].concat(e),r)}}function gd(){return(gd=Object(vo.a)(go.a.mark((function e(t){var a,r,n,o,c;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return Object(v.partial)(Ed,[t.gtins])(e)},r=yd(t),n=wi({url:pd(),body:r}),o=ji,e.next=6,Ni({operation:n,transform:a,error:o});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const vd=({storeId:e,productId:t})=>Bi("/v1/places/".concat(e,"/products/").concat(t)),Od=function(){var e=Object(vo.a)(go.a.mark((function e({storeId:t,productId:a}){var r,n,o,c;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oi({url:vd({storeId:t,productId:a})}),n=dd,o=ji,e.next=5,Ni({operation:r,transform:n,error:o});case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wd=e=>Bi("/v1/places/".concat(e,"/assortments?page_size=").concat(5e4)),kd=({data:e})=>Object(v.map)("master_product_id",e),jd=function(){var e=Object(vo.a)(go.a.mark((function e({storeId:t}){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oi({url:wd(t)}),r=ji,e.next=4,Ni({operation:a,transform:kd,error:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_d=()=>Bi("/v1/search/products");function Sd({gtins:e,storeId:t}){return{language:"en",tree:"coophomedelivery",store_id:t,gtin:e}}function Cd(){return(Cd=Object(vo.a)(go.a.mark((function e(t){var a,r,n,o;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Sd(t),r=wi({url:_d(),body:a}),n=ji,e.next=5,Ni({operation:r,transform:md(),error:n});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xd({searchTerm:e,nextPage:t,storeId:a}){return{language:"en",tree:"coophomedelivery",store_id:a,match_phrase:{phrase:e,language:"en"},meta:{pagination:hd(t)}}}function Nd(){return(Nd=Object(vo.a)(go.a.mark((function e(t){var a,r,n,o,c;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=xd(t),r=wi({url:pd(),body:a}),n=md({searchTerm:t.searchTerm}),o=ji,e.next=6,Ni({operation:r,transform:n,error:o});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const Td=({q:e,storeId:t})=>{const a=encodeURIComponent(e.toLowerCase());const r="/v1/search/predictions?store_id=".concat(t,"&search=").concat(a,"&lang=").concat("en","&tree=").concat("coophomedelivery");return Bi(r)},Id=e=>({categories:Object(v.get)(["data","categories"],e).map(e=>({id:e.ext_id,name:Object(v.get)(["name","en"],e),subcategories:[]})),products:Object(v.get)(["data","products"],e).map(e=>{const t=Object(v.get)(["name","en"],e),a=ad(t).name;return td({id:e.master_product_id,image_url:Object(v.get)(["image","media_storage_key"],e),name:a,price:Object(v.get)(["price","clicks_unit_price"],e)})}),relatedTerms:Object(v.get)(["data","search_phrases"],e).map(e=>e.search_phrase)}),Ad=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oi({url:Td(t)}),r=ji,e.next=4,Ni({operation:a,transform:Id,error:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rd=({storeId:e,coordinates:{latitude:t,longitude:a}})=>{const r="/v1/dts/slots-nearby?store_guid=".concat(e,"&latitude=").concat(t,"&longitude=").concat(a,"&range=").concat(7e3);return Bi(r)},Pd=(e,t)=>{const a=Object(v.getOr)([],[(r=e,V(r)?"pickup_points":"home_deliveries"),"0","slots"],t);var r;return Object(v.reduce)((e,{delivery_date:t,slots:a})=>Object(D.a)({},e,{[t]:Object(v.flow)(Object(v.map)(e=>((e,{id:t,starts_at:a,ends_at:r,delivery_price:n})=>({id:String(t),startsAt:a,endsAt:r,deliveryPrice:n,date:e}))(t,e)),Object(v.sortBy)("startsAt"))(a)}),{},a)},Fd=e=>({collection:Pd("collection",e),delivery:Pd("delivery",e)}),Ld=function(){var e=Object(vo.a)(go.a.mark((function e(t){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oi({url:Rd(t)}),r=ji,e.next=4,Ni({operation:a,transform:Fd,error:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dd=e=>Bi("/v1/places/".concat(e)),Bd=({data:e})=>({id:e.master_id,extId:e.ext_id,name:e.name,postcode:e.postcode}),Md=function(){var e=Object(vo.a)(go.a.mark((function e({storeId:t}){var a,r,n;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oi({url:Dd(t)}),r=ji,e.next=4,Ni({operation:a,transform:Bd,error:r});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ud={address:{getParts:function(){var e=Object(vo.a)(go.a.mark((function e({link:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pi(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addressesList:function(){var e=Object(vo.a)(go.a.mark((function e({q:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addressesCoordinatesRead:function(){var e=Object(vo.a)(go.a.mark((function e({postcode:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addressesPlacesNearbyRead:function(){var e=Object(vo.a)(go.a.mark((function e({coordinates:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hi(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),basket:{evaluate:nu,evaluateApplyVoucher:ou,evaluateRemoveVoucher:cu},categoriesList:function(){var e=Object(vo.a)(go.a.mark((function e(t){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cms:{banners:{getByCategoryId:Su,getByPage:Nu,getBannerBySearchTerm:Au},relatedProducts:{getRelatedProducts:Bu},productsLists:{getListByType:Fu},getCampaign:function(){var e=Object(vo.a)(go.a.mark((function e({uri:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu({uri:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},slot:{getSlots:function(){var e=Object(vo.a)(go.a.mark((function e(t){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ld(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},products:{checkAvailability:function(e){return gd.apply(this,arguments)},getByCategory:function(e){return bd.apply(this,arguments)},getByGtin:function(e){return Cd.apply(this,arguments)},getById:Od,getBySearchTerm:function(e){return Nd.apply(this,arguments)},range:jd},ordersCreate:function(){var e=Object(vo.a)(go.a.mark((function e({order:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gu({order:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),payment:{finalizeOrder:Xu},searchList:function(){var e=Object(vo.a)(go.a.mark((function e(t){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ad(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stores:{get:function(){var e=Object(vo.a)(go.a.mark((function e({storeId:t}){var a;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Md({storeId:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Hd=e=>((e,t)=>(e=>e.stores)(e)[t])(e,hn(e)),Vd=e=>Object(v.get)("extId",Hd(e));var qd=go.a.mark(tm),Gd=go.a.mark(am),Wd=go.a.mark(rm),zd=go.a.mark(nm),Yd=go.a.mark(cm),Kd=go.a.mark(lm),Qd=go.a.mark(im);const Zd="Please enter a correct postcode format. For example, M4 4BE.",Jd="Sorry, we were unable to find any addresses for your postcode. Please enter a different postcode.",Xd="Sorry, you appear to be outside of our service area.",$d="Sorry, something went wrong. We couldn\u2019t check for your postcode, please try again.";class em extends Error{}function tm(e){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(es.b)(we,e);case 2:if(t.sent){t.next=5;break}throw new em(Zd);case 5:case"end":return t.stop()}}),qd)}function am(e){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(es.b)(Ud.addressesCoordinatesRead,{postcode:e});case 2:if(t=a.sent){a.next=5;break}throw new em(Jd);case 5:return a.abrupt("return",t);case 6:case"end":return a.stop()}}),Gd)}function rm(e){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(es.b)(Ud.addressesPlacesNearbyRead,{coordinates:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),Wd)}function nm(e){var t,a,r,n,o;return go.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,tm(e);case 2:return c.next=4,am(e);case 4:return t=c.sent,c.next=7,rm(t);case 7:return a=c.sent,r=a.collections,n=a.deliveries,o=a.storeId,c.abrupt("return",{coordinates:t,collections:r,deliveries:n,storeId:o});case 12:case"end":return c.stop()}}),zd)}const om=e=>e.length>0;function cm({collections:e}){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(es.b)(om,e);case 2:if(t.sent){t.next=5;break}throw new em(Xd);case 5:case"end":return t.stop()}}),Yd)}const sm=e=>e.length>0;function lm({deliveries:e}){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(es.b)(sm,e);case 2:if(t.sent){t.next=5;break}throw new em(Xd);case 5:case"end":return t.stop()}}),Kd)}function im({collections:e,deliveries:t}){var a,r;return go.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(es.b)(om,e);case 2:return a=n.sent,n.next=5,Object(es.b)(sm,t);case 5:if(r=n.sent,a||r){n.next=8;break}throw new em(Xd);case 8:case"end":return n.stop()}}),Qd)}const um="slots/CLEAR_EXPIRED_SLOT",dm=(e,t)=>({type:"slots/CONFIRM_SLOT",payload:{id:e,date:t}}),mm=e=>({type:"slots/REFRESH_SLOTS",payload:e}),pm="INFO",hm="MINOR",fm="MAJOR",bm="LINK",ym="CLOSE",Em={title:"Please enter a correct postcode format",content:"For example, M4 4BE."},gm={title:"Sorry, we were unable to find any addresses for your postcode",content:"Please enter a different postcode."},vm={title:"Sorry, we were unable to find any addresses for your postcode",content:"Please enter a different postcode.",severity:hm},Om={title:"Sorry, something went wrong",content:"We couldn\u2019t check for your postcode, please try again.",severity:hm},wm={title:"Sorry, something went wrong",content:"We were not able to load navigation data right now. Please try reloading the page.",severity:fm,resolution:{type:ym,label:"Try again"}},km={title:"Sorry, something went wrong",content:"We were not able to load products for this category. Try reloading the page.",severity:hm},jm={title:"Sorry, something went wrong",content:"We were not able to load details for this product. Try reloading the page.",severity:hm},_m={title:"Sorry, something went wrong",content:"We could not place your order, please go back to checkout try again.",severity:fm,resolution:{type:bm,url:"/checkout",label:"Try again"}},Sm={id:um,content:"Your slot reservation has expired. Choose a new slot before checking out.",severity:hm},Cm="categories/FETCH",xm="categories/FETCH_SUCCESS",Nm="categories/FETCH_FAILURE",Tm=()=>({type:Cm}),Im=e=>({type:xm,payload:{items:e}}),Am=e=>dt(Nm,e);var Rm=go.a.mark(Fm),Pm=go.a.mark(Lm);function Fm(){var e,t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(es.i)(hn);case 2:return e=a.sent,a.prev=3,a.next=6,Object(es.b)(Ud.categoriesList,e);case 6:return t=a.sent,a.next=9,Object(es.f)(Im(t));case 9:a.next=16;break;case 11:return a.prev=11,a.t0=a.catch(3),mi("category fetch failed",a.t0),a.next=16,Object(es.f)(Am(wm));case 16:case"end":return a.stop()}}),Rm,null,[[3,11]])}function Lm(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)(Cm,Fm);case 2:case"end":return e.stop()}}),Pm)}var Dm=Lm;const Bm=e=>({type:"stores/GET_STORE_DETAILS",payload:{id:e}});var Mm=go.a.mark(qm),Um=go.a.mark(Gm),Hm=go.a.mark(Wm),Vm=go.a.mark(zm);function qm({payload:e}){var t,a,r,n,o,c;return go.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.postcode,s.prev=1,s.next=4,Object(es.b)(nm,t);case 4:return a=s.sent,r=a.coordinates,n=a.collections,o=a.deliveries,c=a.storeId,s.next=11,Object(es.b)(im,{collections:n,deliveries:o});case 11:return s.next=13,Object(es.f)(Bm(c));case 13:return s.next=15,Object(es.f)(de({postcode:t,coordinates:r,collectionStores:n,deliveryStores:o}));case 15:s.next=31;break;case 17:if(s.prev=17,s.t0=s.catch(1),!(s.t0 instanceof em)){s.next=29;break}if(s.t0.message!==Xd){s.next=25;break}return s.next=23,Object(es.f)((s.t0.message,{type:"address/POSTCODE_NOT_IN_SERVICE_AREA"}));case 23:s.next=27;break;case 25:return s.next=27,Object(es.f)(me(s.t0.message));case 27:s.next=31;break;case 29:return s.next=31,Object(es.f)(me($d));case 31:case"end":return s.stop()}}),Mm,null,[[1,17]])}function Gm({gtin:e,quantity:t}){var a,r,n,o,c,s,l,i;return go.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(es.i)(Ga(e));case 2:return a=u.sent,r=Object(ke.a)(a,1),n=r[0],u.next=7,Object(es.f)({type:"ui/SHOW_CHECK_AVAILABILITY"});case 7:return u.next=9,Object(es.j)("stores/GET_STORE_DETAILS_SUCCESS");case 9:return u.next=11,Object(es.i)(be);case 11:return o=u.sent,u.next=14,Object(es.i)(Hd);case 14:return c=u.sent,s=c.id,u.next=18,Object(es.b)(Ud.products.checkAvailability,{gtins:e,storeId:s});case 18:if(l=u.sent,i=l.unavailable,Object(v.isEmpty)(i)){u.next=25;break}return u.next=23,Object(es.f)(jr({products:n,unavailableIn:o}));case 23:u.next=29;break;case 25:return u.next=27,Object(es.f)(Er(e,t));case 27:return u.next=29,Object(es.f)({type:"ui/HIDE_CHECK_AVAILABILITY"});case 29:case"end":return u.stop()}}),Um)}function Wm({payload:{storeId:e}}){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(es.b)(Ud.products.range,{storeId:e});case 2:return t=a.sent,a.next=5,Object(es.f)(pe({products:t,storeId:e}));case 5:return a.next=7,Object(es.b)(Fm);case 7:case"end":return a.stop()}}),Hm)}function zm(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)(ie,Wm);case 2:return e.next=4,Object(es.l)("shopping-in/SELECT_POSTCODE",qm);case 4:case"end":return e.stop()}}),Vm)}var Ym=zm,Km=go.a.mark(ap),Qm=go.a.mark(rp),Zm=go.a.mark(np),Jm=go.a.mark(op),Xm=go.a.mark(cp),$m=go.a.mark(sp),ep=go.a.mark(lp),tp=go.a.mark(ip);function ap({payload:{membershipNumber:e}}){var t,a,r,n,o,c,s,l,i,u;return go.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(es.f)(mr());case 2:return d.next=4,Object(es.i)(yn);case 4:return t=d.sent,d.next=7,Object(es.i)(Wa());case 7:return a=d.sent,d.next=10,Object(es.i)(gn());case 10:return r=d.sent,d.next=13,Object(es.i)(Bn);case 13:return n=d.sent,o=n.membershipNumber,d.next=17,Object(es.i)(Vd);case 17:if(c=d.sent,e===o){d.next=34;break}return d.prev=19,d.next=22,Object(es.b)(Ud.basket.evaluate,{basketId:t,basketItems:a,membershipNumber:e,slot:r,storeExternalId:c});case 22:return s=d.sent,l=s.checkout,i=s.evaluate,u=s.order,d.next=28,Object(es.f)(wr({checkout:l,evaluate:i,order:u}));case 28:d.next=34;break;case 30:return d.prev=30,d.t0=d.catch(19),d.next=34,Object(es.f)(kr());case 34:case"end":return d.stop()}}),Km,null,[[19,30]])}function rp(){var e,t,a,r,n,o,c,s,l,i;return go.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(es.f)(mr());case 2:return u.next=4,Object(es.i)(yn);case 4:return e=u.sent,u.next=7,Object(es.i)(Wa());case 7:return t=u.sent,u.next=10,Object(es.i)(Bn);case 10:return a=u.sent,r=a.membershipNumber,u.next=14,Object(es.i)(gn());case 14:return n=u.sent,u.next=17,Object(es.i)(Vd);case 17:return o=u.sent,u.prev=18,u.next=21,Object(es.b)(Ud.basket.evaluate,{basketId:e,basketItems:t,membershipNumber:r,slot:n,storeExternalId:o});case 21:return c=u.sent,s=c.checkout,l=c.evaluate,i=c.order,u.next=27,Object(es.f)(wr({checkout:s,evaluate:l,order:i}));case 27:u.next=33;break;case 29:return u.prev=29,u.t0=u.catch(18),u.next=33,Object(es.f)(kr());case 33:case"end":return u.stop()}}),Qm,null,[[18,29]])}function np({payload:e}){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(es.h)([Object(es.b)(Gm,e),Object(es.j)("ui/HIDE_CHECK_AVAILABILITY")]);case 2:case"end":return t.stop()}}),Zm)}function op(){var e,t,a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=function(t){var a,r;return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.i)(Hd);case 2:return a=e.sent,r=Object(v.map)("gtin",t),e.next=6,Object(es.f)(_r({unavailableGtins:r}));case 6:return e.next=8,Object(es.b)(rp);case 8:return e.next=10,Object(es.f)(jr({products:t,unavailableIn:a.name}));case 10:case"end":return e.stop()}}),e)},e=go.a.mark(t),r.next=4,Object(es.i)(Z);case 4:if(r.sent){r.next=8;break}return r.next=8,null;case 8:return r.next=10,Object(es.j)("shopping-in/PRODUCTS_IN_STORE_RANGE");case 10:return r.next=12,Object(es.i)(Nn);case 12:if(a=r.sent,Object(v.isEmpty)(a)){r.next=18;break}return r.next=16,Object(es.b)(t,a);case 16:return r.next=18,Object(es.f)({type:"ui/SHOW_CHECK_AVAILABILITY"});case 18:case"end":return r.stop()}}),Jm)}function cp({payload:{voucherCode:e}}){var t,a,r,n,o,c,s,l,i;return go.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(es.f)(mr());case 2:return u.next=4,Object(es.i)(Wa());case 4:return t=u.sent,u.next=7,Object(es.i)(gn());case 7:return a=u.sent,u.next=10,Object(es.i)(Bn);case 10:return r=u.sent,n=r.membershipNumber,u.next=14,Object(es.i)(Vd);case 14:return o=u.sent,u.prev=15,u.next=18,Object(es.b)(Ud.basket.evaluateApplyVoucher,{basketItems:t,membershipNumber:n,slot:a,storeExternalId:o,voucherCode:e});case 18:return c=u.sent,s=c.checkout,l=c.evaluate,i=c.order,u.next=24,Object(es.f)(wr({checkout:s,evaluate:l,order:i}));case 24:u.next=30;break;case 26:return u.prev=26,u.t0=u.catch(15),u.next=30,Object(es.f)(kr());case 30:case"end":return u.stop()}}),Xm,null,[[15,26]])}function sp(){var e,t,a,r,n,o,c,s,l,i;return go.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(es.f)(mr());case 2:return u.next=4,Object(es.i)(yn);case 4:return e=u.sent,u.next=7,Object(es.i)(Wa());case 7:return t=u.sent,u.next=10,Object(es.i)(Bn);case 10:return a=u.sent,r=a.membershipNumber,u.next=14,Object(es.i)(gn());case 14:return n=u.sent,u.next=17,Object(es.i)(Vd);case 17:return o=u.sent,u.prev=18,u.next=21,Object(es.b)(Ud.basket.evaluateRemoveVoucher,{basketId:e,basketItems:t,membershipNumber:r,slot:n,storeExternalId:o});case 21:return c=u.sent,s=c.checkout,l=c.evaluate,i=c.order,u.next=27,Object(es.f)(wr({checkout:s,evaluate:l,order:i}));case 27:u.next=33;break;case 29:return u.prev=29,u.t0=u.catch(18),u.next=33,Object(es.f)(kr());case 33:case"end":return u.stop()}}),$m,null,[[18,29]])}function lp(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.i)(bn);case 2:if(!e.sent){e.next=8;break}return e.next=6,Object(es.b)(sp);case 6:e.next=10;break;case 8:return e.next=10,Object(es.b)(rp);case 10:case"end":return e.stop()}}),ep)}function ip(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.k)(er,np);case 2:return e.next=4,Object(es.c)(500,$a,lp);case 4:return e.next=6,Object(es.k)(Xa,rp);case 6:return e.next=8,Object(es.k)(sr,ap);case 8:return e.next=10,Object(es.k)(lr,rp);case 10:return e.next=12,Object(es.k)(ir,cp);case 12:return e.next=14,Object(es.k)(ur,sp);case 14:return e.next=16,Object(es.k)(ie,op);case 16:case"end":return e.stop()}}),tp)}var up=ip,dp=ui;const mp={address:null,basketId:"00000000-0000-0000-0000-000000000000",fulfilmentType:null,discount:0,errorVoucher:null,slot:null,staffDiscount:0,storeId:null,subtotal:0,total:0,voucherCode:null,voucherDiscount:0};var pp=(e=mp,t)=>{switch(t.type){case"slots/CONFIRM_SLOT":return Object(D.a)({},e,{slot:t.payload.id});case um:return Object(D.a)({},e,{slot:null});case Jn:return((e,t)=>Object(D.a)({},e,{address:null,fulfilmentType:t,slot:null}))(e,t.payload);case zn:return((e,t)=>Object(D.a)({},e,{address:t,fulfilmentType:"delivery"}))(e,t.payload);case ar:return((e,{order:t})=>Object(D.a)({},e,{},t))(e,t.payload);case ts:return mp;case Xn:return((e,{id:t,name:a})=>Object(D.a)({},e,{storeId:t,address:{displayName:a},fulfilmentType:"collection"}))(e,t.payload);case $n:return((e,{id:t})=>Object(D.a)({},e,{storeId:t,fulfilmentType:"delivery"}))(e,t.payload);case dr:return(e=>Object(D.a)({},e,{errorVoucher:null}))(e);case yt:return Object(D.a)({},e,{fulfilmentType:null,storeId:null});default:return e}};var hp=a(670);const fp=({slot:e,now:t=new Date})=>{const a=e.date,r=e.startsAt,n=Object(ys.a)("".concat(a,"T").concat(r));return Object(hp.a)(n,t)<1};var bp=go.a.mark(gp),yp=go.a.mark(vp),Ep=go.a.mark(Op);function gp(){var e;return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(es.e)("logger");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),bp)}function vp(e,t=null){return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,gp();case 2:a.sent.error(e,t);case 4:case"end":return a.stop()}}),yp)}function Op(e,t=null){return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,gp();case 2:a.sent.info(e,t);case 4:case"end":return a.stop()}}),Ep)}var wp=e=>e.replace(/^\s*(00|\+)44/,"0").replace(/\s/g,"");const kp={sku:"0000000000644",quantity:2,allow_replace:!1,type:2,unit_price:{price:.1,price_vat:.1},row_price:{price:.2,price_vat:.2}},jp={sku:"0000000000002",quantity:1,allow_replace:!1,type:5,unit_price:{price:0,price_vat:0},row_price:{price:0,price_vat:0}},_p=({fullName:e,email:t,mobilePhone:a})=>({name:e,email:t,phone:wp(a)}),Sp=({id:e,startsAt:t,endsAt:a,date:r})=>({id:parseInt(e,10),start_time:t,end_time:a,delivery_date:r}),Cp=({address:e,checkoutDetails:t})=>{const a=e.displayName;return Object(D.a)({},_p(t),{address:Object(D.a)({},Object(v.omit)("displayName",e),{formatted_address:a})})},xp=({address:{displayName:e},checkoutDetails:t})=>Object(D.a)({},_p(t),{address:{name:e,formatted_address:e}}),Np={billingAddress:()=>({}),customerDetails:_p,customerInfo:({membershipNumber:e})=>""===e?{}:{loyalty_card_id:e},externalData:({evaluate:e,store:t})=>({dg:{order:{place_ext_id:t.extId}},coop:{basket:e}}),orchestrationId:()=>Object(ot.a)(),partsDeliveryMethod:({address:e,checkoutDetails:t,isCollection:a,slot:r})=>{const n=Object(ot.a)(),o={provider_id:"124bf99ad",type:"foodie",service:{id:n,code:a?"pickup":"home-delivery",price:{min:0,currency:"GBP"},delivery_slot:Sp(r),address:a?xp({address:e,checkoutDetails:t}):Cp({address:e,checkoutDetails:t})},id:n},c=(({messageToDriver:e})=>""===e?null:[{type:"driver",message:e}])(t);return c&&(o.notes=c),o},paymentMethod:()=>({backend:"aci",type:"online",configuration:{success_url:"https:web-staging-coop.foodieservices.com/checkout/thank-you",failure_url:"https:web-staging-coop.foodieservices.com/checkout/payment/failed",cancel_url:"https:web-staging-coop.foodieservices.com/checkout-cancel",project_code:"ACI"},services:[{type:"card",name:"VISA",code:"VISA",fee:{price:0,currency:"GBP"}},{type:"card",name:"MASTERCARD",code:"MASTERCARD",fee:{price:0,currency:"GBP"}}]}),placeId:({id:e})=>e},Tp=({checkoutDetails:{carrierBags:e},isCollection:t,products:a})=>Object(v.compact)([...a,e?kp:null,t?null:jp]);Np.buildParts=({address:e,checkoutDetails:t,isCollection:a,products:r,slot:n,store:o})=>[{orchestration_id:Np.orchestrationId(),place_id:Np.placeId(o),delivery_method:Np.partsDeliveryMethod({address:e,checkoutDetails:t,isCollection:a,slot:n}),products:Tp({checkoutDetails:t,isCollection:a,products:r})}];const Ip=({address:e,checkoutDetails:t,evaluate:a,isCollection:r,products:n=[],slot:o,store:c})=>({customer_info:Np.customerInfo(t),external_data:Np.externalData({evaluate:a,store:c}),customer_address:Np.customerDetails(t),billing_address:Np.billingAddress(),payment_method:Np.paymentMethod(),orchestration_id:Np.orchestrationId(),place_id:Np.placeId(c),editable:!0,cancellable:!0,parts:Np.buildParts({address:e,checkoutDetails:t,isCollection:r,products:n,store:c,slot:o})});var Ap=go.a.mark(Fp),Rp=go.a.mark(Lp),Pp=go.a.mark(Dp);function Fp(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.f)(io());case 2:return e.next=4,Object(es.f)({type:um});case 4:case"end":return e.stop()}}),Ap)}function Lp({payload:{slot:e,products:t}}){var a,r,n,o,c,s,l,i;return go.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!fp({slot:e})){u.next=4;break}return u.next=3,Fp();case 3:return u.abrupt("return");case 4:return u.next=6,Object(es.i)(jn);case 6:return a=u.sent,u.next=9,Object(es.i)(Bn);case 9:return r=u.sent,u.next=12,Object(es.i)(hs);case 12:return n=u.sent,u.next=15,Object(es.i)(wn);case 15:return o=u.sent,u.next=18,Object(es.i)(Hd);case 18:return c=u.sent,u.next=21,Object(es.b)(Ip,{address:a,checkoutDetails:r,evaluate:n,isCollection:o,products:t,slot:e,store:c});case 21:return s=u.sent,u.prev=22,u.next=25,Object(es.b)(Ud.ordersCreate,{order:s});case 25:return l=u.sent,u.next=28,Object(es.f)(so(l));case 28:u.next=42;break;case 30:return u.prev=30,u.t0=u.catch(22),i=u.t0.error,u.next=35,vp("create order failure",{error:i,store:c});case 35:if("slot_full"!==i.code){u.next=40;break}return u.next=38,Fp();case 38:u.next=42;break;case 40:return u.next=42,Object(es.f)(lo(_m));case 42:case"end":return u.stop()}}),Rp,null,[[22,30]])}function Dp(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)(Yn,Lp);case 2:case"end":return e.stop()}}),Pp)}var Bp=Dp,Mp=pp;const Up={items:{},isFetching:!1,hasInitialLoad:!1,selected:null};var Hp=(e=Up,t)=>{switch(t.type){case Cm:return Object(D.a)({},e,{isFetching:!0});case xm:return Object(D.a)({},e,{items:t.payload.items,isFetching:!1,hasInitialLoad:!0});case Nm:return Object(D.a)({},e,{isFetching:!1,selected:null});case Nr:{const a=t.payload.parentCategoryId;return Object(D.a)({},e,{selected:a||e.selected})}case ts:return Up;default:return e}},Vp=go.a.mark(Zp),qp=go.a.mark(Jp),Gp=go.a.mark(Xp),Wp=go.a.mark($p),zp=go.a.mark(eh),Yp=go.a.mark(th),Kp=go.a.mark(ah);function Qp(e){return Object(es.i)(t=>Ya(t,e))}function Zp({apiFn:e,payload:t,successAction:a,errorMsg:r=km}={}){var n,o;return go.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(es.i)(hn);case 2:return n=c.sent,c.prev=3,c.next=6,Object(es.b)(e,Object(D.a)({},t,{storeId:n}));case 6:return o=c.sent,c.next=9,Object(es.f)(a(o));case 9:c.next=16;break;case 11:return c.prev=11,c.t0=c.catch(3),mi(c.t0),c.next=16,Object(es.f)(Kr(r));case 16:case"end":return c.stop()}}),Vp,null,[[3,11]])}function Jp(e){var t,a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.parentCategoryId,r.next=3,Object(es.i)(e=>Ka(e,t));case 3:if(!r.sent){r.next=8;break}return r.next=7,Object(es.f)({type:Pr});case 7:return r.abrupt("return");case 8:return r.next=10,Object(es.i)(o.noCategoriesLoaded());case 10:if(!r.sent){r.next=14;break}return r.next=14,Object(es.g)(d.loadCategories());case 14:return r.next=16,Qp(t);case 16:return a=r.sent,r.next=19,Zp({apiFn:Ud.products.getByCategory,payload:{parentCategoryId:t,nextPage:a},successAction:Gr});case 19:case"end":return r.stop()}}),qp)}function Xp({successAction:e},{payload:t}){return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Zp({apiFn:Ud.products.getByGtin,payload:t,successAction:e});case 2:case"end":return a.stop()}}),Gp)}function $p({payload:{productId:e}}){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp({apiFn:Ud.products.getById,payload:{productId:e},successAction:Zr,errorMsg:jm});case 2:case"end":return t.stop()}}),Wp)}function eh({payload:{parentCategoryId:e}}){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Qp(e);case 2:return t=a.sent,a.next=5,Zp({apiFn:Ud.products.getByCategory,payload:{parentCategoryId:e,nextPage:t},successAction:zr});case 5:case"end":return a.stop()}}),zp)}function th({successAction:e},{payload:{searchTerm:t}}){var a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Qp(t);case 2:return a=r.sent,r.next=5,Zp({apiFn:Ud.products.getBySearchTerm,payload:{nextPage:a,searchTerm:t},successAction:e});case 5:case"end":return r.stop()}}),Yp)}function ah(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.k)(Lr,th,{successAction:Wr});case 2:return e.next=4,Object(es.k)(Br,th,{successAction:Yr});case 4:return e.next=6,Object(es.k)(Nr,Jp);case 6:return e.next=8,Object(es.k)(Ja,Xp,{successAction:Or});case 8:return e.next=10,Object(es.k)(Tr,Xp,{successAction:Gr});case 10:return e.next=12,Object(es.k)(Ir,eh);case 12:return e.next=14,Object(es.l)(Sr,$p);case 14:case"end":return e.stop()}}),Kp)}var rh=ah,nh=an;var oh=Object(E.b)(e=>{const t=r.isNotMinBasketValue,a=i.getOrderFulfilmentSelector,n=c.getBasketItems()(e),o=a()(e),s=Object(v.isNil)(o.selectedAddress),l=Object(v.isNil)(o.reservedSlot);return{orderFulfilment:o,basketItems:n,hasNoMinBasketValue:t(e),hasNoOrderFulfilment:l||s,cannotCheckout:!Sn(e),isFetching:e.basket.isFetching}},{})(Object(ea.o)(si));const ch=({children:e,identifier:t})=>f.a.createElement("main",{className:"page ".concat(t?"page--".concat(t):null)},e);ch.defaultProps={identifier:null};var sh=ch;const lh=()=>f.a.createElement("div",{className:"pv1"},f.a.createElement(Pl,{className:"img mt2 mb3"}),f.a.createElement(Pl,{className:"w-100 h1 mv2"}),f.a.createElement(Pl,{className:"w-80 h1 mv2"}),f.a.createElement(Pl,{className:"w-25 h1 mv3"}),f.a.createElement(Pl,{className:"w-100 h2 mv3"}));var ih=()=>f.a.createElement("div",{"data-testid":"loading-product-list",className:"container container--padded"},f.a.createElement("header",{className:"pv2"},f.a.createElement(Pl,{className:"w-50 w-25-m h1 mv3"}),f.a.createElement(Pl,{className:"w-80 w-50-m h2 mt3 mb2"})),f.a.createElement("div",{className:"default-grid pv3"},f.a.createElement(lh,null),f.a.createElement(lh,null),f.a.createElement(lh,null),f.a.createElement(lh,null)));a(281);const uh=({image:e})=>e?f.a.createElement(f.a.Fragment,null,f.a.createElement("source",{media:"(min-width: 30em)",srcSet:"".concat(e,"?w=468&h=120&fm=webp 1x"),type:"image/webp"}),f.a.createElement("source",{media:"(min-width: 30em)",srcSet:"".concat(e,"?fm=webp 2x"),type:"image/webp"}),f.a.createElement("source",{media:"(min-width: 30em)",srcSet:"".concat(e,"?w=468&h=120&fm=jpg 1x"),type:"image/jpeg"}),f.a.createElement("source",{media:"(min-width: 30em)",srcSet:"".concat(e,"?fm=jpg 2x"),type:"image/jpeg"})):null;uh.defaultProps={image:null};const dh=({image:e})=>e?f.a.createElement(f.a.Fragment,null,f.a.createElement("source",{media:"(min-width: 60em)",srcSet:"".concat(e,"?w=970&h=250&fm=webp 1x"),type:"image/webp"}),f.a.createElement("source",{media:"(min-width: 60em)",srcSet:"".concat(e,"?fm=webp 2x"),type:"image/webp"}),f.a.createElement("source",{media:"(min-width: 60em)",srcSet:"".concat(e,"?w=970&h=250&fm=jpg 1x"),type:"image/jpeg"}),f.a.createElement("source",{media:"(min-width: 60em)",srcSet:"".concat(e,"?fm=jpg 2x"),type:"image/jpeg"})):null;dh.defaultProps={image:null};const mh=({action:e,selector:t})=>{const a=Object(E.c)(),r=Object(E.d)(t);return Object(h.useEffect)(()=>{la()&&a(e)},[JSON.stringify(e)]),la()&&r?f.a.createElement(Jt,{theme:"default"},f.a.createElement("figure",{className:"supplier-banner","data-testid":"supplier-banner"},f.a.createElement("a",{href:r.linkUrl},f.a.createElement("picture",{className:"supplier-banner__media"},f.a.createElement(dh,{image:r.images[Eu.large]}),f.a.createElement(uh,{image:r.images[Eu.medium]}),f.a.createElement("img",{srcSet:"".concat(r.images[Eu.small],"?fm=jpg"),alt:r.imageAltText?r.imageAltText:null,type:"image/jpeg"}))),r.termsAndConditions?f.a.createElement("figcaption",{className:"supplier-banner__caption"},f.a.createElement("p",null,r.termsAndConditions)):null)):null},ph=({categoryId:e})=>{const t=(({categoryId:e})=>({type:"cms/SUPPLIER_BANNER_BY_CATEGORY_ID",payload:{categoryId:e}}))({categoryId:e}),a=(({categoryId:e})=>t=>da({categoryId:e})(t))({categoryId:e});return f.a.createElement(mh,{action:t,selector:a})};ph.defaultProps={categoryId:null};const hh=({page:e})=>{const t=(({page:e})=>({type:"cms/SUPPLIER_BANNER_BY_PAGE",payload:{page:e}}))({page:e}),a=(({page:e})=>t=>da({page:e})(t))({page:e});return f.a.createElement(mh,{action:t,selector:a})};hh.defaultProps={page:null};const fh=({searchTerm:e})=>{const t=wu(e),a=(({searchTerm:e})=>({type:"cms/SUPPLIER_BANNER_BY_SEARCH_TERM",payload:{searchTerm:e}}))({searchTerm:t}),r=(({searchTerm:e})=>t=>da({searchTerm:e})(t))({searchTerm:t});return f.a.createElement(mh,{action:a,selector:r})};fh.defaultProps={searchTerm:null};a(579),a(580);var bh=({to:e,label:t})=>f.a.createElement(g.Link,{to:e,className:"coop-c-signpost"},f.a.createElement("h3",{className:"coop-c-signpost__title"},t));a(581);var yh=({categories:e})=>sl()(e)?null:f.a.createElement("div",{className:"category-list"},e.map(e=>f.a.createElement("div",{className:"category-list--item",key:e.id},f.a.createElement(bh,{to:"/category/".concat(e.id),label:e.name}))));var Eh=()=>f.a.createElement(Jt,{contain:!0},f.a.createElement("h2",null,"There are no products in this category."));const gh=e=>{let t=e.isFetching,a=e.products,r=e.categoryId,n=Object(ol.a)(e,["isFetching","products","categoryId"]);return t?f.a.createElement(ih,null):!t&&sl()(a)?f.a.createElement(Eh,null):f.a.createElement(ql,Object.assign({keyForProductCount:r,products:a},n))},vh=e=>{let t=e.isFetching,a=e.categoriesLoaded,r=e.category,n=e.products,o=Object(ol.a)(e,["isFetching","categoriesLoaded","category","products"]);if(!a)return f.a.createElement(sh,{identifier:"category"},f.a.createElement(Bl,null));if(a&&!r)return f.a.createElement(ea.c,{to:"/404"});const c=r.subcategories;return f.a.createElement(sh,{identifier:"category"},f.a.createElement(Qt,null),f.a.createElement(zl,null,f.a.createElement(tl,{title:r.name,hasBackLink:!0,backLinkLabel:"View homepage"})),sl()(c)?null:f.a.createElement(yh,{categories:c}),f.a.createElement(ph,{categoryId:r.id}),f.a.createElement(gh,Object.assign({categoryId:r.id,isFetching:t,products:n},o)))};vh.defaultProps={products:[],category:null,subcategories:[]};var Oh=vh;const wh=c.productsOfCurrentCategory(),kh={loadInitialProducts:l.loadInitialProducts,changeBasketItemQuantity:s.changeBasketQuantity};class jh extends h.Component{componentDidMount(){const e=this.props,t=e.categoryId;(0,e.loadInitialProducts)({parentCategoryId:t})}componentDidUpdate(e){const t=this.props,a=t.categoryId,r=t.loadInitialProducts,n=t.storeId,o=e.categoryId!==a,c=e.storeId!==n;(o||c)&&r({parentCategoryId:a})}render(){const e=this.props,t=(e.error,e.category),a=e.categoryId,r=Object(ol.a)(e,["error","category","categoryId"]),n=Vr({parentCategoryId:a});return f.a.createElement(Oh,Object.assign({category:t},r,{loadMore:n}))}}var _h=Object(E.b)((e,t)=>{const a=Object(v.get)(["match","params","id"],t);return{isFetching:Ea(e)||Fa(e),categoriesLoaded:e.categories.hasInitialLoad,category:ja(e,a),categoryId:a,products:wh(e),productCount:c.productCount(wh)(e),storeId:hn(e)}},kh)(jh),Sh=a(43),Ch=a(315);const xh=e=>Object(D.a)({},e,{isFetching:!0}),Nh=e=>Object(D.a)({},e,{isFetching:!1}),Th="signed-out",Ih={start:"sign-in",success:"signed-in"},Ah={start:"sign-in-auto",success:"signed-in-auto"},Rh=Ih.success,Ph=Ah.success,Fh=Nh({status:Th});var Lh=(e=Fh,t)=>{switch(t.type){case"account/SIGN_IN":return(e=>xh(Object(D.a)({},e,{status:Ih.start})))(e);case"account/SIGN_IN_AUTO":return(e=>xh(Object(D.a)({},e,{status:Ah.start})))(e);case"account/SIGN_IN_SUCCESS":return(e=>{let t=e.status,a=Object(ol.a)(e,["status"]);return Nh(Object(D.a)({},a,{status:t===Ah.start?Ph:Rh}))})(e);case"account/SIGN_IN_FAILURE":return Nh(e);default:return e}};const Dh={isFetching:!1,error:null,notInServiceArea:!1,collectionStores:null,items:null,deliveryStores:null,postcodeCoordinates:null,postcode:null};var Bh=(e=Dh,t)=>{switch(t.type){case"address/SEARCH_FOR_ADDRESS":return(e=>Object(D.a)({},Dh,{collectionStores:e.collectionStores,deliveryStores:e.deliveryStores,postcodeCoordinates:e.postcodeCoordinates,postcode:e.postcode,isFetching:!0}))(e);case"address/SEARCH_FOR_ADDRESS_SUCCESS":return((e,t)=>Object(D.a)({},e,{isFetching:!1,items:t}))(e,t.payload);case"address/SEARCH_FOR_ADDRESS_ERROR":return((e,t)=>Object(D.a)({},e,{error:Object(D.a)({},t),isFetching:!1}))(e,t.payload);case"address/SEARCH_FOR_ADDRESS_FAILURE":return Object(D.a)({},Dh,{isFetching:!1});case Wn:return(e=>Object(D.a)({},e,{isFetching:!0}))(e);case zn:return(e=>Object(D.a)({},e,{items:null,isFetching:!1}))(e);case"address/POSTCODE_NOT_IN_SERVICE_AREA":return Object(D.a)({},e,{notInServiceArea:!0,isFetching:!1});case yt:return Dh;case"address/GET_COLLECTION_STORES":return Object(D.a)({},e,{error:null,isFetching:!0});case"address/GET_COLLECTION_STORES_SUCCESS":return((e,{collectionStores:t,coordinates:a,postcode:r})=>Object(D.a)({},e,{isFetching:!1,collectionStores:t,postcode:r,postcodeCoordinates:a}))(e,t.payload);case"address/GET_COLLECTION_STORES_ERROR":return((e,{error:t})=>Object(D.a)({},e,{error:t,isFetching:!1}))(e,t.payload);case"shopping-in/SELECT_POSTCODE_SUCCESS":return((e,{postcode:t,coordinates:a,collectionStores:r})=>Object(D.a)({},e,{postcode:t,postcodeCoordinates:a,collectionStores:r,deliveryStores:null,items:null}))(e,t.payload);case"address/CLEAR_COLLECTION_STORES":return(e=>Object(D.a)({},e,{collectionStores:null}))(e);case"address/GET_DELIVERY_ADDRESSES_SUCCESS":return((e,{coordinates:t,deliveryStores:a,options:r,postcode:n})=>Object(D.a)({},e,{isFetching:!1,postcodeCoordinates:t,deliveryStores:a,items:r,postcode:n}))(e,t.payload);case"address/GET_DELIVERY_ADDRESSES_OPTIONS_SUCCESS":return((e,{options:t})=>Object(D.a)({},e,{isFetching:!1,items:t}))(e,t.payload);default:return e}},Mh=go.a.mark(Wh),Uh=go.a.mark(zh),Hh=go.a.mark(Yh),Vh=go.a.mark(Kh),qh=go.a.mark(Qh),Gh=go.a.mark(Zh);function Wh({payload:e}){var t,a,r,n;return go.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.postcode,o.prev=1,o.next=4,Object(es.b)(nm,t);case 4:return a=o.sent,r=a.coordinates,n=a.collections,o.next=9,Object(es.b)(cm,{collections:n});case 9:return o.next=11,Object(es.f)(kt({collectionStores:n,coordinates:r,postcode:t}));case 11:o.next=27;break;case 13:if(o.prev=13,o.t0=o.catch(1),!(o.t0 instanceof em)){o.next=25;break}if(o.t0.message!==Xd){o.next=21;break}return o.next=19,Object(es.f)({type:"address/POSTCODE_NOT_IN_SERVICE_AREA"});case 19:o.next=23;break;case 21:return o.next=23,Object(es.f)(jt(o.t0.message));case 23:o.next=27;break;case 25:return o.next=27,Object(es.f)(jt($d));case 27:case"end":return o.stop()}}),Mh,null,[[1,13]])}function zh(e){var t,a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(es.b)(Ud.addressesList,{q:e});case 2:if(t=r.sent,0!==(a=t.options).length){r.next=6;break}throw new em(Jd);case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),Uh)}function Yh({payload:e}){var t,a,r,n,o,c;return go.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.postcode,s.prev=1,s.next=4,Object(es.b)(nm,t);case 4:return a=s.sent,r=a.coordinates,n=a.deliveries,o=a.storeId,s.next=10,Object(es.b)(lm,{deliveries:n});case 10:return s.next=12,Object(es.b)(zh,t);case 12:return c=s.sent,s.next=15,Object(es.f)(Bm(o));case 15:return s.next=17,Object(es.f)(Ot({coordinates:r,deliveryStores:n,options:c,postcode:t}));case 17:s.next=43;break;case 19:if(s.prev=19,s.t0=s.catch(1),!(s.t0 instanceof em)){s.next=41;break}if(s.t0.message!==Zd){s.next=27;break}return s.next=25,Object(es.f)(gt(Em));case 25:s.next=39;break;case 27:if(s.t0.message!==Jd){s.next=32;break}return s.next=30,Object(es.f)(gt(gm));case 30:s.next=39;break;case 32:if(s.t0.message!==Xd){s.next=37;break}return s.next=35,Object(es.f)({type:"address/POSTCODE_NOT_IN_SERVICE_AREA"});case 35:s.next=39;break;case 37:return s.next=39,Object(es.f)(vt(Om));case 39:s.next=43;break;case 41:return s.next=43,Object(es.f)(vt(Om));case 43:case"end":return s.stop()}}),Hh,null,[[1,19]])}function Kh(e){var t,a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(es.b)(Ud.addressesList,{q:e.payload.postcode});case 3:if(t=r.sent,!((a=t.options).length>0)){r.next=9;break}return r.next=8,Object(es.f)(Et(a));case 8:return r.abrupt("return");case 9:return r.next=11,Object(es.f)(vt(vm));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(es.f)(vt(Om));case 17:case"end":return r.stop()}}),Vh,null,[[0,13]])}function Qh({payload:e}){var t,a,r,n,o,c,s,l;return go.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.link,a=e.storeId,r=e.slot,i.prev=1,i.next=4,Object(es.b)(Ud.address.getParts,{link:t});case 4:if(n=i.sent,o=n.address,c=n.options,!o){i.next=19;break}return i.next=10,Object(es.f)(ro());case 10:return i.next=12,Object(es.f)(mo({id:a}));case 12:return i.next=14,Object(es.f)(oo(o));case 14:if(!r){i.next=18;break}return s=r.slotId,l=r.date,i.next=18,Object(es.f)(dm(s,l));case 18:return i.abrupt("return");case 19:if(!c){i.next=23;break}return i.next=22,Object(es.f)(wt(c));case 22:return i.abrupt("return");case 23:return i.next=25,Object(es.f)(vt(vm));case 25:i.next=31;break;case 27:return i.prev=27,i.t0=i.catch(1),i.next=31,Object(es.f)(vt(Om));case 31:case"end":return i.stop()}}),qh,null,[[1,27]])}function Zh(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)("address/GET_COLLECTION_STORES",Wh);case 2:return e.next=4,Object(es.l)("address/SEARCH_FOR_ADDRESS",Yh);case 4:return e.next=6,Object(es.l)(Wn,Qh);case 6:return e.next=8,Object(es.l)("address/GET_ADDRESS_LIST",Kh);case 8:case"end":return e.stop()}}),Gh)}var Jh=Zh,Xh=Bh,$h=a(304),ef=a.n($h),tf=a(305);function af({payload:e}){const t=e.products,a=e.step;return{event:"checkout",eventCategory:"Ecommerce",eventAction:"Checkout",eventLabel:a,eventValue:e.revenue,ecommerce:{currencyCode:"GBP",checkout:{actionField:{step:a}},products:t}}}function rf({payload:e}){const t=e.deliveryCharges,a=e.eventLabel,r=e.id,n=e.offers,o=e.orderDiscount,c=e.paymentType,s=e.products,l=e.promoCode,i=e.revenue;return{event:"purchase",eventCategory:"Ecommerce",eventAction:"Purchase",eventLabel:a,eventValue:i,ecommerce:{currencyCode:"GBP",purchase:{actionField:{deliveryCharges:t,id:r,offers:n,orderDiscount:o,paymentType:c,promoCode:l,revenue:i,store:e.store,transactionType:e.transactionType}},products:s}}}function nf({payload:{product:e}}){const t=e.brand,a=e.category,r=e.id;return{ecommerce:{detail:{products:[{brand:t,category:a,id:r,name:e.name,price:e.price,quantity:e.quantity}]}},event:"detailView",eventAction:"Detail View",eventCategory:"Ecommerce",eventLabel:r,eventValue:null}}const of=()=>null,cf=()=>{const e={"analytics/DETAIL_VIEW":nf,"analytics/PAGE_VIEW_CHECKOUT_FUNNEL":ra("REACT_APP_FLAG_ANALYTICS_FUNNEL")?af:of,"analytics/PURCHASE":rf},t=ef()();return Object(tf.createMiddleware)(e,t)},sf={basket:{id:null,itemIds:{},itemsSnapshot:{},evaluate:{}},order:{orderNumber:null,visibleId:null,createdAt:null,confirmedPrice:0,checkoutUrl:null,checkoutId:null,totalBreakdown:null,isOrderPlaced:null,isFetching:!1},payment:{isFinalized:!1,isSubmitted:!1,status:null}};var lf=(e=sf,t)=>{switch(t.type){case ar:return((e,{evaluate:t})=>Object(D.a)({},e,{basket:Object(D.a)({},e.basket,{evaluate:t})}))(e,t.payload);case Yn:return Object(D.a)({},e,{order:Object(D.a)({},e.order,{isFetching:!0})});case Kn:case Qn:return Object(D.a)({},e,{order:Object(D.a)({},e.order,{isFetching:!1,isOrderPlaced:!1})});case Zn:return((e,t)=>Object(D.a)({},e,{order:Object(D.a)({},t.payload,{isFetching:!1,isOrderPlaced:!0})}))(e,t);case"payment/CHECKOUT_SESSION_EXPIRED":return(e=>Object(D.a)({},e,{order:sf.order,payment:Object(D.a)({},sf.payment)}))(e);case"payment/PAYMENT_SUBMIT_FORM":return(e=>Object(D.a)({},e,{payment:Object(D.a)({},e.payment,{isSubmitted:!0})}))(e);case"payment/PAYMENT_RESET_STATE":return(e=>Object(D.a)({},e,{payment:sf.payment}))(e);case"payment/FINALIZE_ORDER_SUCCESS":return(e=>Object(D.a)({},e,{payment:Object(D.a)({},e.payment,{isFinalized:!0,status:"PAYMENT_SUCCESSFUL"})}))(e);case"payment/FINALIZE_ORDER_FAILURE":return(e=>Object(D.a)({},e,{payment:Object(D.a)({},e.payment,{isFinalized:!0,status:"PAYMENT_FAILED"})}))(e);case ts:return sf;default:return e}};const uf={fullName:"",email:"",membershipNumber:"",mobilePhone:"",messageToDriver:"",carrierBags:!1},df=(e,t)=>Object(D.a)({},e,{carrierBags:t}),mf=({state:e,name:t,email:a})=>Object(D.a)({},e,{fullName:t,email:a}),pf=e=>Object(v.omit)(["carrierBags"],e);var hf=(e=uf,t)=>{const a=t.type,r=t.payload;switch(a){case"checkout/STORE_CHECKOUT_DETAILS":return((e,{fullName:t,email:a,membershipNumber:r,mobilePhone:n,messageToDriver:o,carrierBags:c})=>Object(D.a)({},e,{fullName:t,email:a,membershipNumber:r,mobilePhone:n,messageToDriver:o,carrierBags:c}))(e,r);case Jn:return((e,t)=>V(t)?Object(D.a)({},e,{messageToDriver:"",carrierBags:!0}):Object(D.a)({},e,{carrierBags:oa()}))(e,r);case"checkout/STORE_CARRIER_BAGS":return df(e,r);case Xn:return df(e,!0);case ar:return((e,{checkout:t})=>{const a=Object(v.get)("membershipNumber",t);return Object(D.a)({},e,{membershipNumber:a})})(e,t.payload);case lr:return(e=>Object(D.a)({},e,{membershipNumber:uf.membershipNumber}))(e);case"checkout/SET_USER_DETAILS":return((e,{name:t,email:a})=>Object(v.isEqual)(pf(e),pf(uf))?mf({state:e,name:t,email:a}):e)(e,t.payload);case"checkout/REMOVE_USER_DETAILS":return((e,{name:t,email:a})=>{const r=mf({state:uf,name:t,email:a});return Object(v.isEqual)(pf(e),pf(r))?Object(D.a)({},e,{fullName:"",email:""}):e})(e,t.payload);case ts:return uf;default:return e}};var ff=go.a.mark(_f),bf=go.a.mark(Sf),yf=go.a.mark(Cf),Ef=go.a.mark(xf),gf=go.a.mark(Nf),vf=go.a.mark(Tf),Of=go.a.mark(If),wf=go.a.mark(Af),kf=go.a.mark(Rf),jf=go.a.mark(Pf);function _f(e){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(es.i)(ma(e));case 2:if(t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,Object(es.f)({type:"cms/SUPPLIER_BANNER_ADD_TO_CACHE",payload:{cacheKey:e}});case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),ff)}function Sf({getBy:e,key:t}){var a,r,n,o,c;return go.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,_f(t);case 3:if(s.sent){s.next=6;break}return s.abrupt("return");case 6:return s.next=8,Object(es.b)(e,t);case 8:if(a=s.sent){s.next=13;break}return s.next=12,Object(es.f)(rl(t));case 12:return s.abrupt("return");case 13:return r=a.imageAltText,n=a.images,o=a.linkUrl,c=a.termsAndConditions,s.next=16,Object(es.f)(al({key:t,imageAltText:r,images:n,linkUrl:o,termsAndConditions:c}));case 16:s.next=22;break;case 18:return s.prev=18,s.t0=s.catch(0),s.next=22,vp("failed to get banner",s.t0);case 22:case"end":return s.stop()}}),bf,null,[[0,18]])}function Cf({payload:e}){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.categoryId,a.next=3,Object(es.b)(Sf,{getBy:Ud.cms.banners.getByCategoryId,key:{categoryId:t}});case 3:case"end":return a.stop()}}),yf)}function xf({payload:e}){var t,a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.searchTerm,a=wu(t),r.next=4,Object(es.b)(Sf,{getBy:Ud.cms.banners.getBannerBySearchTerm,key:{searchTerm:a}});case 4:case"end":return r.stop()}}),Ef)}function Nf({payload:e}){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.page,a.next=3,Object(es.b)(Sf,{getBy:Ud.cms.banners.getByPage,key:{page:t}});case 3:case"end":return a.stop()}}),gf)}function Tf(){var e,t,a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(ra("REACT_APP_FLAG_BASKET_CROSS_SELL")){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Object(es.f)({type:"cms/RELATED_PRODUCTS_PRUNE_CACHE"});case 4:return r.next=6,Object(es.i)(fa);case 6:if((e=r.sent).length){r.next=9;break}return r.abrupt("return");case 9:return r.next=11,Object(es.a)(e.map(e=>Object(es.b)(Ud.cms.relatedProducts.getRelatedProducts,e)));case 11:return t=r.sent,a=t.reduce((e,t)=>{const a=Object.keys(t)[0],r=Object.values(t)[0];return Object(D.a)({},e,{[a]:r})},{}),r.next=15,Object(es.f)({type:"cms/RELATED_PRODUCTS_ADD_ITEMS",payload:a});case 15:case"end":return r.stop()}}),vf)}function If({payload:e}){var t,a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,r.next=3,Object(es.i)(ba(t));case 3:if(r.sent){r.next=6;break}return r.abrupt("return");case 6:return r.next=8,Object(es.b)(Ud.cms.productsLists.getListByType,t);case 8:if(!(a=r.sent)){r.next=12;break}return r.next=12,Object(es.f)(nl(a));case 12:case"end":return r.stop()}}),Of)}function Af({payload:e}){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(es.a)([Object(es.b)(Tf),Object(es.b)(If,{payload:e})]);case 3:return a.next=5,Object(es.i)(An);case 5:if(t=a.sent,sl()(t)){a.next=9;break}return a.next=9,Object(es.f)(Jr(t));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,vp("failed to load cross-sell",a.t0);case 15:case"end":return a.stop()}}),wf,null,[[0,11]])}function Rf({payload:{uri:e}}){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(es.b)(Ud.cms.getCampaign,{uri:e});case 3:return t=a.sent,a.next=6,Object(es.f)({type:"cms/FETCH_CAMPAIGN_SUCCESS",payload:t});case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),a.next=12,vp("failed to fetch campaign",a.t0);case 12:case"end":return a.stop()}}),kf,null,[[0,8]])}function Pf(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.k)("cms/SUPPLIER_BANNER_BY_CATEGORY_ID",Cf);case 2:return e.next=4,Object(es.k)("cms/SUPPLIER_BANNER_BY_SEARCH_TERM",xf);case 4:return e.next=6,Object(es.k)("cms/SUPPLIER_BANNER_BY_PAGE",Nf);case 6:return e.next=8,Object(es.k)("cms/FETCH_CAMPAIGN_REQUEST",Rf);case 8:if(!ca()){e.next=11;break}return e.next=11,Object(es.k)("cms/RELATED_PRODUCTS_GET_CROSS_SELL",Af);case 11:case"end":return e.stop()}}),jf)}var Ff=Pf;const Lf={banners:{items:[],cache:[]},relatedProducts:{},productsLists:[]};var Df=(e=Lf,t)=>{switch(t.type){case"cms/SUPPLIER_BANNER_ADD_ITEM":return((e,{key:t,imageAltText:a,images:r,linkUrl:n,termsAndConditions:o})=>{const c=Object(v.reject)(e=>Object(v.isEqual)(e.key,t),e.banners.items),s={key:t,value:{imageAltText:a,images:r,linkUrl:n,termsAndConditions:o}};return Object(D.a)({},e,{banners:Object(D.a)({},e.banners,{items:[...c,s]})})})(e,t.payload);case"cms/SUPPLIER_BANNER_REMOVE_ITEM":return((e,{key:t})=>{const a=Object(v.reject)(e=>Object(v.isEqual)(e.key,t),e.banners.items);return Object(D.a)({},e,{banners:Object(D.a)({},e.banners,{items:a})})})(e,t.payload);case"cms/SUPPLIER_BANNER_ADD_TO_CACHE":return((e,{cacheKey:t})=>{const a=Object(v.reject)(e=>Object(v.isEqual)(e.key,t),e.banners.cache),r={key:t,lastModified:new Date};return Object(D.a)({},e,{banners:Object(D.a)({},e.banners,{cache:[...a,r]})})})(e,t.payload);case"cms/RELATED_PRODUCTS_ADD_ITEMS":return((e,t)=>{const a=Object(v.mapValues)(e=>({related:e,lastModified:ua()}),t);return Object(D.a)({},e,{relatedProducts:Object(D.a)({},e.relatedProducts,{},a)})})(e,t.payload);case"cms/RELATED_PRODUCTS_PRUNE_CACHE":return(e=>{const t=Object(v.pickBy)(e=>Object(ia.a)(ua(),e.lastModified)<=10,e.relatedProducts);return Object(D.a)({},e,{relatedProducts:t})})(e);case"cms/PRODUCTS_LISTS_ADD_ITEM":return((e,t)=>{const a=t.name,r=Object(v.reject)(e=>Object(v.isEqual)(e.name,a),e.productsLists);return Object(D.a)({},e,{productsLists:[...r,Object(D.a)({},t,{lastModified:ua()})]})})(e,t.payload);case"cms/FETCH_CAMPAIGN_REQUEST":return(e=>Object(D.a)({},e,{campaign:{isFetching:!0}}))(e);case"cms/FETCH_CAMPAIGN_SUCCESS":return((e,t)=>Object(D.a)({},e,{campaign:Object(D.a)({},t,{isFetching:!1})}))(e,t.payload);default:return e}};const Bf={basket:{},offers:{},order:{orderNumber:null,visibleId:null,createdAt:null,confirmedPrice:0,totalBreakdown:null,isOrderPlaced:null},slot:{}};var Mf=(e=Bf,t)=>{switch(t.type){case ts:{const e=t.payload;return{basket:e.basket,offers:e.offers,order:e.order,slot:e.slot}}default:return e}};const Uf=e=>ps(e).payment,Hf=e=>{const t=Uf(e);return{isFinalized:t.isFinalized,isSubmitted:t.isSubmitted,status:t.status}},Vf=e=>{const t=Hf(e),a=t.isFinalized,r=t.status;return a&&"PAYMENT_SUCCESSFUL"===r},qf=e=>{const t=Hf(e),a=t.isFinalized,r=t.status;return a&&"PAYMENT_FAILED"===r},Gf=e=>!!vs(e).checkoutUrl,Wf=(e,t=new Date)=>{const a=ws(e,t);return Hf(e).isSubmitted&&Gf(e)&&!a},zf=(e,t=new Date)=>Gf(e)&&!ws(e,t);var Yf=go.a.mark(Qf),Kf=go.a.mark(Zf);function Qf(){var e,t,a,r,n,o,c,s,l,i,u,d;return go.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Object(es.i)(Wa());case 2:return e=m.sent,m.next=5,Object(es.i)(ks);case 5:return t=m.sent,m.next=8,Object(es.i)(gn());case 8:return a=m.sent,m.next=11,Object(es.i)(On);case 11:return r=m.sent,m.next=14,Object(es.i)(Uf);case 14:return n=m.sent,o=n.paymentBrand,m.next=18,Object(es.i)(Hd);case 18:return c=m.sent,s=c.name,m.next=22,Object(es.i)(fs);case 22:return l=m.sent,m.next=25,Object(es.i)(ya);case 25:return i=m.sent,m.next=28,Object(es.i)(bn);case 28:return u=m.sent,d=rs({products:e,categories:i}),m.next=32,Object(es.f)((p={basket:d,offers:l,order:Object(D.a)({},t,{fulfilmentType:r,paymentBrand:o,store:s,voucherCode:u}),slot:a},{type:ts,payload:p}));case 32:case"end":return m.stop()}var p}),Yf)}function Zf(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)("payment/FINALIZE_ORDER_SUCCESS",Qf);case 2:case"end":return e.stop()}}),Kf)}var Jf=Zf,Xf=Mf,$f=a(671);const eb=B().REACT_APP_VERSION,tb=e=>{try{localStorage.setItem("coop-cache",JSON.stringify(e)),localStorage.setItem("coop-cache-updated",ua().toISOString())}catch(t){console.error(t.message)}};var ab=a(306),rb=a.n(ab);const nb=e=>e instanceof Error?{error:e.message}:e;class ob extends Lc{constructor(e,t){super(),this.rollbar=new rb.a({accessToken:e,captureIp:"anonymize",captureUncaught:!0,captureUnhandledRejections:!0,payload:{environment:t},scrubFields:["email","fullName","membershipNumber","mobilePhone"]})}critical(e,t=null){this.rollbar.critical(e,nb(t))}error(e,t=null){this.rollbar.error(e,nb(t))}warning(e,t=null){this.rollbar.warning(e,nb(t))}info(e,t=null){this.rollbar.info(e,nb(t))}debug(e,t=null){this.rollbar.debug(e,nb(t))}}const cb=(e,t,a,r)=>{e("".concat(t,": ").concat(a),...Object(v.compact)([r]))};class sb extends Lc{critical(e,t=null){cb(console.error,"critical",e,t)}error(e,t=null){cb(console.error,"error",e,t)}warning(e,t=null){cb(console.error,"warning",e,t)}info(e,t=null){cb(console.log,"info",e,t)}debug(e,t=null){cb(console.log,"debug",e,t)}}const lb=()=>!("development"===B().NODE_ENV&&!ra("REACT_APP_FLAG_ROLLBAR_LOGGING_FROM_LOCALHOST")),ib=()=>{if(lb()){return(({accessToken:e,environment:t}={})=>new ob(e,t))({accessToken:B().REACT_APP_LOGGING_KEY,environment:B().REACT_APP_ENV||"localhost"})}return new sb},ub={byPathname:{}},db=(e,t)=>Object(D.a)({},e,{[t.id]:t});const mb=e=>Object(v.omit)("byPathname",e.messages),pb=(e,t)=>Object(v.isEmpty)(e)?null:Object(v.last)(Object.values(e).filter(e=>e.severity===t)),hb=()=>Object(L.a)([mb],e=>Object(v.isEmpty)(e)?null:Object(v.last)(Object.values(e).filter(({severity:e})=>e===pm||e===hm))),fb=()=>Object(L.a)([mb],e=>pb(e,pm)),bb=()=>Object(L.a)([mb],e=>pb(e,hm)),yb=()=>Object(L.a)([mb],e=>pb(e,fm)),Eb=e=>t=>Object(v.getOr)(null,"byPathname.".concat(e),t.messages);var gb=(e=ub,t)=>{switch(t.type){case xr:case Fr:case Nm:case Kn:case"address/SEARCH_FOR_ADDRESS_FAILURE":case ct:return((e,t)=>t.type&&Object(v.find)(e=>e.type===t.type,Object.values(e))?e:db(e,t))(e,t.payload.message);case st:return Object(v.omitBy)(e=>e.severity===t.payload.severity,e);case lt:return Object(v.omitBy)(e=>e.id===t.payload.id,e);case"slots/CONFIRM_SLOT":return Object(v.omit)(um,e);case um:return Object(D.a)({},e,{[um]:Sm});case it:return((e,{pathname:t,message:a})=>Object(D.a)({},e,{byPathname:Object(D.a)({},e.byPathname,{[t]:a})}))(e,t.payload);case ut:return((e,{pathname:t})=>Object(D.a)({},e,{byPathname:Object(v.omit)([t],e.byPathname)}))(e,t.payload);case ts:return ub;default:return e}};var vb=go.a.mark(wb);function Ob(e,t){const a=e;return t*Math.pow(2,a)}function wb(e,t,a){var r,n,o,c,s,l;return go.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=(r={maxRetries:5,initialDelay:1e3}).maxRetries,o=r.initialDelay,c=0;case 2:if(!(c<n)){i.next=21;break}return i.prev=3,i.next=6,Object(es.b)(e,t);case 6:return s=i.sent,i.abrupt("return",s);case 10:if(i.prev=10,i.t0=i.catch(3),!(c<n-1)){i.next=18;break}return i.next=15,a(i.t0);case 15:return l=Ob(c,o),i.next=18,Object(es.d)(l);case 18:c+=1,i.next=2;break;case 21:throw new Error("Max attempts to determine payment status reached");case 22:case"end":return i.stop()}}),vb,null,[[3,10]])}var kb=go.a.mark(Sb),jb=go.a.mark(Cb),_b=go.a.mark(xb);function Sb(){var e,t,a,r,n;return go.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=function(r){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Op("retrying payment finalization",{error:r.body,orderNumber:t,store:a,status:r.status});case 2:case"end":return e.stop()}}),e)},e=go.a.mark(r),o.next=4,Object(es.i)(Os);case 4:return t=o.sent,o.next=7,Object(es.i)(Hd);case 7:return a=o.sent,o.prev=8,o.next=11,Object(es.b)(wb,Ud.payment.finalizeOrder,{orderNumber:t},r);case 11:if(!(n=o.sent).ok){o.next=17;break}return o.next=15,Object(es.f)({type:"payment/FINALIZE_ORDER_SUCCESS"});case 15:o.next=21;break;case 17:return o.next=19,vp("finalize order failure",{error:n.error.message,orderNumber:t,store:a,status:n.status});case 19:return o.next=21,Object(es.f)({type:"payment/FINALIZE_ORDER_FAILURE"});case 21:o.next=29;break;case 23:return o.prev=23,o.t0=o.catch(8),o.next=27,vp("finalize order failure",{error:o.t0.message,orderNumber:t,store:a});case 27:return o.next=29,Object(es.f)({type:"payment/FINALIZE_ORDER_FAILURE"});case 29:case"end":return o.stop()}}),kb,null,[[8,23]])}function Cb(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fp();case 2:case"end":return e.stop()}}),jb)}function xb(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)("payment/FINALIZE_ORDER",Sb);case 2:return e.next=4,Object(es.l)("payment/PAYMENT_SLOT_EXPIRED",Cb);case 4:case"end":return e.stop()}}),_b)}var Nb=xb;const Tb="search/REQUEST",Ib="search/REQUEST_STARTED",Ab="search/SUCCESS",Rb="search/FAILURE",Pb="search/CLEAR",Fb=e=>({type:Tb,payload:{term:e}}),Lb=()=>({type:Ib}),Db=e=>({type:Rb,payload:{errors:e}}),Bb=e=>({type:Ab,payload:{products:e.products,categories:e.categories,relatedTerms:e.related_terms}}),Mb=()=>({type:Pb}),Ub={isFetching:!1,categories:[],predictions:[],products:[],relatedTerms:[],errors:[],term:""};var Hb=(e=Ub,t)=>{switch(t.type){case Tb:return Object(D.a)({},e,{term:t.payload.term});case Ib:return Object(D.a)({},e,{isFetching:!0});case Ab:{const a=Object(v.map)(Object(v.get)("id"));return Object(D.a)({},e,{predictions:t.payload.products,categories:a(t.payload.categories),relatedTerms:t.payload.relatedTerms,isFetching:!1})}case Rb:return Object(D.a)({},e,{errors:t.payload.errors,isFetching:!1});case Pb:return Ub;case Dr:return((e,{payload:t})=>Object(D.a)({},e,{products:Object(v.map)("id",t.items)}))(e,t);case Mr:return((e,{payload:t})=>Object(D.a)({},e,{products:[...e.products,...Object(v.map)("id",t.items)]}))(e,t);default:return e}},Vb=go.a.mark(Gb),qb=go.a.mark(Wb);function Gb({payload:e}){var t,a,r;return go.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((t=e.term).length>2)){n.next=19;break}return n.next=4,Object(es.f)(Lb());case 4:return n.prev=4,n.next=7,Object(es.i)(hn);case 7:return a=n.sent,n.next=10,Object(es.b)(Ud.searchList,{q:t,storeId:a});case 10:return r=n.sent,n.next=13,Object(es.f)(Bb(r));case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(4),n.next=19,Object(es.f)(Db([""]));case 19:case"end":return n.stop()}}),Vb,null,[[4,15]])}function Wb(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.c)(500,Tb,Gb);case 2:case"end":return e.stop()}}),qb)}var zb=Wb,Yb=Hb;const Kb={isFetching:!1,error:null,postcode:null,coordinates:null,deliveryStores:null,collectionStores:null};var Qb=(e=Kb,t)=>{switch(t.type){case"shopping-in/SELECT_POSTCODE":return Object(D.a)({},Kb,{isFetching:!0});case"shopping-in/SELECT_POSTCODE_SUCCESS":return((e,{postcode:t,coordinates:a,collectionStores:r,deliveryStores:n})=>Object(D.a)({},e,{isFetching:!1,postcode:t,coordinates:a,collectionStores:r,deliveryStores:n}))(e,t.payload);case"shopping-in/SELECT_POSTCODE_ERROR":return((e,{error:t})=>Object(D.a)({},e,{error:t,isFetching:!1}))(e,t.payload);case"address/POSTCODE_NOT_IN_SERVICE_AREA":return Object(D.a)({},e,{isFetching:!1});case yt:case eo:return Kb;default:return e}},Zb=go.a.mark(Xb),Jb=go.a.mark($b);function Xb({payload:{storeId:e,coordinates:t}}){var a;return go.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(es.b)(Ud.slot.getSlots,{storeId:e,coordinates:t});case 3:return a=r.sent,r.next=6,Object(es.f)({type:"slots/REFRESH_SLOTS_SUCCESS",payload:a});case 6:r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(0),n="refresh-slots",o=r.t0,console.error(n,o),r.next=13,Object(es.f)({type:"slots/REFRESH_SLOTS_FAILURE"});case 13:case"end":return r.stop()}var n,o}),Zb,null,[[0,8]])}function $b(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.l)("slots/REFRESH_SLOTS",Xb);case 2:case"end":return e.stop()}}),Jb)}var ey=$b;const ty={isFetching:!1,collection:{},delivery:{}};var ay=(e=ty,t)=>{switch(t.type){case"slots/REFRESH_SLOTS":return Object(D.a)({},e,{isFetching:!0});case"slots/REFRESH_SLOTS_SUCCESS":return((e,{collection:t,delivery:a})=>Object(D.a)({},e,{collection:t,delivery:a,isFetching:!1}))(e,t.payload);case"slots/REFRESH_SLOTS_FAILURE":return Object(D.a)({},e,{isFetching:!1});default:return e}},ry=go.a.mark(cy),ny=go.a.mark(sy),oy=go.a.mark(ly);function cy(e){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(es.b)(Ud.stores.get,{storeId:e});case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),mi(t.t0),new Error(t.t0);case 10:case"end":return t.stop()}}),ry,null,[[0,6]])}function sy({payload:{id:e}}){var t;return go.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,cy(e);case 3:return t=a.sent,a.next=6,Object(es.f)({type:"stores/GET_STORE_DETAILS_SUCCESS",payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),mi(a.t0);case 11:case"end":return a.stop()}}),ny,null,[[0,8]])}function ly(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.k)("stores/GET_STORE_DETAILS",sy);case 2:return e.next=4,Object(es.k)(Xn,sy);case 4:case"end":return e.stop()}}),oy)}var iy=ly;const uy={};var dy=(e=uy,t)=>{switch(t.type){case"stores/GET_STORE_DETAILS_SUCCESS":return function(e,{id:t,extId:a,name:r,postcode:n}){return Object(D.a)({},e,{[t]:{id:t,extId:a,name:r,postcode:n}})}(e,t.payload);default:return e}};const my={cookieBannerDismissed:!1,setLocation:!1};var py=(e=my,t)=>{switch(t.type){case"ui/DISMISS_COOKIE_BANNER":return Object(D.a)({},e,{cookieBannerDismissed:!0});case"ui/SHOW_CHECK_AVAILABILITY":return Object(D.a)({},e,{setLocation:!0});case"ui/HIDE_CHECK_AVAILABILITY":case yt:return Object(D.a)({},e,{setLocation:!1});default:return e}},hy=go.a.mark(yy);const fy=Object(Sh.c)({account:Lh,addresses:Xh,api:lf,basket:dp,categories:Hp,checkout:hf,cms:Df,complete:Xf,messages:gb,order:Mp,products:nh,search:Yb,shoppingIn:Qb,slots:ay,stores:dy,ui:py}),by=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Sh.d;function yy(){return go.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(es.a)([Jh(),ms(),up(),Dm(),Ff(),Jf(),Bp(),Nb(),rh(),zb(),Ym(),ey(),iy()]);case 2:case"end":return e.stop()}}),hy)}const Ey=(()=>{let e;try{const a=localStorage.getItem("coop-schema-version"),r=new Date(localStorage.getItem("coop-cache-updated"));a!==eb||(t=r,Object($f.a)(ua(),t)>7)?(localStorage.removeItem("coop-cache"),localStorage.setItem("coop-schema-version",eb)):e=localStorage.getItem("coop-cache")}catch(a){return console.error(a.message),null}var t;return e?JSON.parse(e):{}})();var gy=(e=Ey)=>{const t=(()=>{const e=ib();return Object(Ch.a)({context:{logger:e}})})(),a=cf();let r=Object(Sh.e)(fy,e,by(Object(Sh.a)(t,a)));return r=function(e){const t=e.subscribe(Object(v.throttle)(1e3,()=>{const t=rn(e.getState());tb(t)}));return Object(D.a)({},e,{unsubscribe:t})}(r),t.run(yy),r};const vy=e=>{const t=vs(e).isOrderPlaced,a=mn(e).slot,r=mb(e)[um];return!t&&!Object(v.isEmpty)(r)&&Object(v.isNull)(a)};function Oy(e,t){const a=fy(e,t());tb((e=>{const t=ya(e),a=rn(e);return Object(D.a)({categories:t},a)})(a))}function wy(e,t,a){const r=Object(E.c)(),n=Object(E.d)(e=>e);Object(h.useEffect)(()=>{const o=()=>r({type:"payment/PAYMENT_SLOT_EXPIRED"}),c=()=>r({type:"payment/PAYMENT_SUBMIT_FORM"});window.wpwlOptions={showPlaceholders:!1,brandDetection:!0,showCVVHint:!0,maskCvv:!0,labels:{cardNumber:"Card number",expiryDate:"Expiry date",cardHolder:"Cardholder\u2019s name",cvv:"Security code",cvvHint:"The number on the signature strip on the back of your card, usually 3 or 4 digits.",submit:"Pay ".concat(a)},onBeforeSubmitCard:()=>function(e,t,a){const r=gn()(e),n=mn(e);return fp({slot:r,order:n})?(t(),!1):(Oy(e,a),!0)}(n,o,c),style:"plain"},t(e)},[n,e,r,a])}a(587);var ky=a(47),jy=a(44);const _y=({field:e,initialValue:t,onChangeCallback:a,setFieldValue:r})=>{const n=Object(D.a)({},e,{type:"checkbox","data-testid":e.name,id:e.name,className:"form-checkbox-input",value:t||!0,defaultChecked:t});return a&&r&&(n.onChange=t=>{a(t.target.checked),r(e.name,t.target.checked)}),f.a.createElement("input",n)};_y.defaultProps={initialValue:!1,onChangeCallback:null,setFieldValue:null};const Sy=({field:e,hint:t,initialValue:a,label:r,onChangeCallback:n,setFieldValue:o,text:c})=>f.a.createElement("div",{className:"form-item"},r?f.a.createElement("label",{htmlFor:e.name,className:"form-label"},r):null,t?f.a.createElement("span",{className:"form-hint"},t):null,f.a.createElement("label",{className:"form-checkbox",htmlFor:e.name},f.a.createElement(_y,{field:e,initialValue:a,onChangeCallback:n,setFieldValue:o}),c));Sy.defaultProps={label:null,hint:null,initialValue:!1,onChangeCallback:null,setFieldValue:null};var Cy=Sy;const xy={name:"fullName",label:"Full name",hint:"Required",type:"text",autoComplete:"name",validation:jy.string().required("Enter your full name.")},Ny={name:"email",label:"Email address",hint:"Required",type:"email",autoComplete:"email",validation:jy.string().email("This does not look like an email address.").required("Enter your email address.")},Ty=(jy.string().matches(/^((?=.*[\d])(?=.*[a-z])(?=.*[A-Z])|(?=.*[a-z])(?=.*[A-Z])(?=.*[^\w\d\s])|(?=.*[\d])(?=.*[A-Z])(?=.*[^\w\d\s])|(?=.*[\d])(?=.*[a-z])(?=.*[^\w\d\s])).{8,64}$/,"Choose a different password - it must be at least 8 characters, and including a mix of numbers and upper and lower case letters.").required("Enter a password."),jy.string().oneOf([jy.ref("password")],"Both passwords must match.").required("Re-enter you password."),/^(\d){18}$/),Iy={name:"membershipNumber",label:"Membership number",hint:"If you are already a Co-op member you can earn 5% and 1% on all Co-op branded products.",type:"tel",autoComplete:"off",validation:jy.string().matches(Ty,"Enter the 18 digit number on the back of your membership card.").notRequired()},Ay={name:"mobilePhone",label:"Mobile phone number",hint:"Required. We\u2019ll only contact you if there are any major changes to your order.",type:"tel",autoComplete:"tel",validation:jy.string().transform(e=>wp(e)).matches(/^07\d{9}$/,"This does not look like a valid mobile number (i.e. 07712341234).").required("Enter your mobile phone number.")},Ry={name:"termsAndConditions",text:f.a.createElement("span",null,"I have read and accept the"," ",f.a.createElement(g.Link,{to:"/terms-of-service",target:"_blank"},"terms of service"),"."),type:"checkbox",validation:jy.bool().oneOf([!0]).required()};var Py=()=>f.a.createElement(Yt,null,"If you are purchasing an age restricted product, you may be asked to show your ID when receiving your order due to our"," ",f.a.createElement(Xt,{to:"https://www.drinkaware.co.uk/alcohol-facts/alcohol-and-the-law/buying-alcohol/",text:"challenge 25 policy"}),".");var Fy=e=>{let t=e.field,a=e.form,r=a.errors,n=a.touched,o=Object(ol.a)(e,["field","form"]);const c=t.name,s=t.value,l=t.onBlur,i=t.onChange,u=r[c],d=n[c];return f.a.createElement("div",{className:"form-item"},f.a.createElement("label",{htmlFor:c,className:"form-label"},o.label),o.hint?f.a.createElement("span",{className:"form-hint"},o.hint):null,u&&d?f.a.createElement("p",{className:"form-input-msg invalid"},u):null,f.a.createElement("input",Object.assign({onBlur:l,onChange:i,value:s,id:c,name:c,"data-testid":c,className:"form-input ".concat(u&&d?"invalid":""),type:o.type||"text"},o)))};function Ly(){return(Ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Dy(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var By=f.a.createElement("path",{fill:"#122947",d:"M9 0C4.032 0 0 4.032 0 9s4.032 9 9 9 9-4.032 9-9-4.032-9-9-9zM7.2 13.5L2.7 9l1.269-1.269L7.2 10.953l6.831-6.831L15.3 5.4l-8.1 8.1z"});const My=e=>{let t=e.svgRef,a=e.title,r=Dy(e,["svgRef","title"]);return f.a.createElement("svg",Ly({width:18,height:18,ref:t},r),a?f.a.createElement("title",null,a):null,By)},Uy=f.a.forwardRef((e,t)=>f.a.createElement(My,Ly({svgRef:t},e)));a.p;var Hy=a(189),Vy=a.n(Hy);var qy=({message:e})=>f.a.createElement("div",{className:Vy.a.container},f.a.createElement(Uy,{className:Vy.a.checkmark}),f.a.createElement("span",null,e));const Gy=e=>"Hi ".concat(e,"! We've filled in some information by using your Co-op membership account. You can change them for this order if you need to."),Wy=()=>{const e=Ic().isAuthenticated,t=Fc().user;if(e){const e=t.forename;return f.a.createElement(qy,{message:Gy(e)})}return null};a(633);const zy=({dispatch:e,initialVoucherCode:t,isFetching:a,setVoucherCode:r,voucherCode:n})=>a?{onSubmit:()=>null,button:()=>f.a.createElement(Ae,null)}:t?(({dispatch:e,setVoucherCode:t})=>({onSubmit:()=>{e(br()),t("")},button:()=>"Remove"}))({dispatch:e,setVoucherCode:r}):(({dispatch:e,voucherCode:t})=>({onSubmit:()=>{e(fr({voucherCode:Object(v.trim)(t)}))},button:()=>"Apply"}))({dispatch:e,voucherCode:n}),Yy=({isFetching:e})=>{const t=Object(E.c)(),a=Object(E.d)(bn),r=Object(E.d)(e=>e.order.errorVoucher),n=Object(h.useState)(a||""),o=Object(ke.a)(n,2),c=o[0],s=o[1],l=zy({dispatch:t,initialVoucherCode:a,isFetching:e,setVoucherCode:s,voucherCode:c});return Object(h.useEffect)(()=>{t(yr())},[]),f.a.createElement("div",{className:"voucher-code","data-testid":"voucher-code"},f.a.createElement("div",{className:"form-item"},f.a.createElement("label",{htmlFor:"voucher-code",className:"form-label"},"Promotion code"),f.a.createElement("div",{className:"form-item--searchbox"},f.a.createElement("span",{className:"form-item--searchbox--input"},f.a.createElement("input",{className:"form-input","data-testid":"voucher-code-input",onChange:e=>{r&&t(yr()),s(e.target.value.toUpperCase())},type:"text",value:c,disabled:!!a})),f.a.createElement("button",{className:"btn btn--secondary form-button",type:"submit",disabled:""===c,"data-testid":"voucher-code-button",onClick:e=>{e.preventDefault(),l.onSubmit()}},l.button())),a&&f.a.createElement(qy,{message:"Promotion applied"}),f.a.createElement(De,{error:r}),f.a.createElement("p",{className:"voucher-code__terms-link"},f.a.createElement(Xt,{to:"https://coop.co.uk/terms/food-voucher-offer",text:"Promotion terms and conditions"}))))};Yy.defaultProps={isFetching:!1};var Ky=Yy;const Qy=jy.object().shape({fullName:xy.validation,email:Ny.validation,membershipNumber:Iy.validation,mobilePhone:Ay.validation,termsAndConditions:Ry.validation}),Zy=({title:e,text:t})=>f.a.createElement("div",{className:"form-item"},f.a.createElement("p",{className:"form-label"},e),f.a.createElement("p",{className:"form-hint"},t));function Jy({id:e,label:t,component:a=Fy}){return{name:e,key:e,component:a,label:t}}const Xy=({isCollection:e,isFetching:t,storeCarrierBags:a,checkoutDetails:r,placeOrder:n,productsForOrder:o,slot:c,evaluateMemberDiscount:s,removeMemberDiscount:l})=>f.a.createElement(ky.c,{initialValues:r,onSubmit:e=>n(c,o,e),validationSchema:Qy},({isValid:n,setFieldValue:o,setFieldTouched:c})=>f.a.createElement(ky.b,{noValidate:!0,spellCheck:"false",autoComplete:"off"},f.a.createElement("fieldset",{className:"form-section"},f.a.createElement("h2",{className:"section-title"},"Your information"),f.a.createElement(Wy,null),f.a.createElement(ky.a,Object.assign({autoComplete:"name",hint:"Required"},Jy({id:"fullName",label:"Full name"}))),f.a.createElement(ky.a,Object.assign({autoComplete:"email",hint:"Required",type:"email"},Jy({id:"email",label:"Email address"}))),f.a.createElement(ky.a,Object.assign({autoComplete:"off",hint:"If you are already a Co-op member you can earn 5% and 1% on all Co-op branded products.",type:"tel",onBlur:e=>function(e,t,a,r){const n=e.target.value,o=Ty.test(n);return o?t(n):a(),r("membershipNumber"),o}(e,s,l,c)},Jy({id:"membershipNumber",label:"Membership number"}))),f.a.createElement("h2",{className:"section-title"},"".concat(e?"Collection":"Delivery"," information")),f.a.createElement(ky.a,Object.assign({autoComplete:"tel",hint:"Required. We\u2019ll only contact you if there are any major changes to your order.",type:"tel"},Jy({id:"mobilePhone",label:"Mobile phone number"}))),!e&&f.a.createElement(ky.a,Object.assign({autoComplete:"off",hint:"Let your driver know if you have any special request or want us to leave your order in a safe place."},Jy({id:"messageToDriver",label:"Message to the driver"}))),e||oa()?f.a.createElement(Zy,{title:"Carrier bags",text:"You have been charged 20p for carrier bags as we will pre pack your shopping ready for ".concat(e?"collection":"delivery",".")}):f.a.createElement(ky.a,Object.assign({hint:"We work hard to reduce our environmental impact. That\u2019s why we reuse the bags we deliver your shopping in.",initialValue:r.carrierBags,onChangeCallback:e=>{a(e)},setFieldValue:o,text:"Keep the reusable plastic shopping bags for 20p.",type:"checkbox"},Jy({id:"carrierBags",label:"Carrier bags",component:Cy}))),f.a.createElement("h2",{className:"section-title"},"Order summary"),ra("REACT_APP_FLAG_VOUCHERS")?f.a.createElement(Ky,{isFetching:t}):null,f.a.createElement(oi,null),f.a.createElement("p",null,"We\u2019ll preauthorise a payment on your card of your order total plus 10% in case of any substitutions. You will only be charged for the products you receive."),f.a.createElement(Py,null),f.a.createElement(ky.a,Object.assign({component:Cy,type:"checkbox",text:f.a.createElement("span",null,"I am 18 years old or older and I have read and accept the"," ",f.a.createElement(g.Link,{to:"/terms-of-service",target:"_blank"},"terms of service"),".")},Jy({id:"termsAndConditions",component:Cy})))),f.a.createElement("fieldset",{className:"form-section"},f.a.createElement("button",{type:"submit",disabled:!n||t,className:"btn btn--full btn--primary","data-testid":"btnSubmit"},t?f.a.createElement(Ae,null):"Continue to payment"))));Xy.defaultProps={slot:{}};var $y=Xy;var eE=e=>{let t=e.orderFulfilment,a=Object(ol.a)(e,["orderFulfilment"]);return function(){const e=Object(E.c)();Object(h.useEffect)(()=>{e({type:"payment/PAYMENT_RESET_STATE"})},[])}(),Ps({step:Is,revenueSelector:bs}),Object(E.d)(Sn)?f.a.createElement("div",{className:"checkout"},f.a.createElement("section",{"data-theme":"alternate"},f.a.createElement("div",{className:"container container--alt"},f.a.createElement(tl,{title:"Checkout",backLinkLabel:"View basket",hasBackLink:!0}),f.a.createElement(zs,t))),f.a.createElement("section",{className:"container","data-theme":"light","data-testid":"checkout-form"},f.a.createElement($y,a))):f.a.createElement(ea.c,{to:"/basket"})};var tE=Object(E.b)(e=>{const t=gn(),a=kn(),r=vn();return({basket:n,order:o,products:c,slots:s})=>({isFetching:K({basket:n}),isCollection:wn(e),slot:t({order:o,slots:s}),deliveryAddress:o.deliveryAddress,productsForOrder:a({basket:n,products:c}),orderFulfilment:r({basket:n,order:o,slots:s}),checkoutDetails:Bn(e)})},(e,{history:t})=>({placeOrder:(a,r,n)=>{e((e=>({type:"checkout/STORE_CHECKOUT_DETAILS",payload:e}))(n)),e(u.placeOrder(a,r)),t.push("/payment")},storeCarrierBags:t=>e((e=>({type:"checkout/STORE_CARRIER_BAGS",payload:e}))(t)),evaluateMemberDiscount:t=>e(pr({membershipNumber:t})),removeMemberDiscount:()=>e(hr())}))(Object(ea.o)(eE)),aE=a(35);var rE=()=>f.a.createElement("main",{className:"container u-container-padded"},f.a.createElement("h1",null,"Contact customer support"),f.a.createElement("p",null,"If you\u2019re about to contact us about your delivery, collection or a refund then you might want to take a look at our support pages:"),f.a.createElement("nav",null,f.a.createElement("ul",{className:"content-list--plain"},f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#change-slot"},"Find out about deliveries, collections and refunds")),f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#missed-delivery"},"Get your order if you miss a delivery or collection")),f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#refunds"},"Get a refund"),f.a.createElement("ul",{className:"content-list--plain"},f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#refunds-damaged-product"},"for a damaged product")),f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#refunds-missing-product"},"for a missing product")))))),f.a.createElement("p",null,"For anything else:"),f.a.createElement("h3",null,"Email"),f.a.createElement("p",null,f.a.createElement("a",{href:"mailto:cooponlinedelivery@coop.co.uk"},"cooponlinedelivery@coop.co.uk")),f.a.createElement("h3",null,"Phone"),f.a.createElement("p",null,f.a.createElement("a",{href:"tel:03300417737"},"0330 041 7737")),f.a.createElement("p",null,"Calls are free and we are open 9am to 10pm Monday to Saturday, and 11am to 5pm on Sundays."),f.a.createElement("p",null,"We can help with:"),f.a.createElement("ul",null,f.a.createElement("li",null,"general support"),f.a.createElement("li",null,"product issues or returns")),f.a.createElement("h2",null,"Make and deal with a complaint"),f.a.createElement("p",null,"Contact our support team if for any reason you are unhappy with the service you have received and would like to make a complaint."),f.a.createElement("h3",null,"Email"),f.a.createElement("p",null,f.a.createElement("a",{href:"mailto:cooponlinedelivery@coop.co.uk"},"cooponlinedelivery@coop.co.uk")),f.a.createElement("h3",null,"Phone"),f.a.createElement("p",null,f.a.createElement("a",{href:"tel:03300417737"},"0330 041 7737")),f.a.createElement("p",null,"You can send a letter with any details of your complaint to:"),f.a.createElement("address",null,"Co-op Food",f.a.createElement("br",null),"Customer Relations",f.a.createElement("br",null),"Freepost MR 9473",f.a.createElement("br",null),"Manchester",f.a.createElement("br",null),"M4 8BA",f.a.createElement("br",null)),f.a.createElement("p",null,"If you are not happy with how we have handled your complaint you can\xa0",f.a.createElement("a",{href:"https://ec.europa.eu/consumers/odr/main/?event=main.consumer.rights"},"contact the European Commission Online Dispute Resolution"),". Your complaint will be handled by an independent dispute resolution body."));var nE=()=>f.a.createElement("main",{className:"container u-container-padded"},f.a.createElement("h1",null,"Find out about deliveries, collections and refunds"),f.a.createElement("p",null,"We want our service to be as convenient for you as possible. But we understand that sometimes things might not always go as smoothly as we would like. On this page you can find out how to:"),f.a.createElement("nav",null,f.a.createElement("ul",{className:"content-list--plain"},f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#missed-delivery"},"Get your order if you miss a delivery or collection")),f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#refunds"},"Get a refund"),f.a.createElement("ul",{className:"content-list--plain"},f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#refunds-damaged-product"},"for a damaged product")),f.a.createElement("li",null,f.a.createElement(aE.HashLink,{to:"/help/deliveries-collections-refunds#refunds-missing-product"},"for a missing product")))))),f.a.createElement("h2",{id:"missed-delivery"},"Get your order if you miss your delivery or collection"),f.a.createElement("p",null,"You\u2019ll need to collect your order from the Co-op store that processed it. We\u2019ll only keep it until store closing time of your chosen delivery or collection date."),f.a.createElement("p",null,"If you can\u2019t collect your order, we\u2019ll give you a refund. However, you\u2019ll be charged for the cost of delivery plus any fresh products. For more details"," ",f.a.createElement(aE.HashLink,{to:"/terms-of-service"},"read our Terms and Conditions"),"."),f.a.createElement("h2",{id:"refunds"},"Get a refund"),f.a.createElement("p",null,"We do not offer refunds for the following products unless they are damaged or faulty:"),f.a.createElement("ul",null,f.a.createElement("li",null,"Fresh or frozen food"),f.a.createElement("li",null,"Products that cannot be returned for hygiene or safety reasons once unwrapped, unpackaged or unsealed"),f.a.createElement("li",null,"Newspapers and magazines")),f.a.createElement("p",null,"For all other products, you have 30 days to return it to a store for an exchange or refund. If you return all the products from your order, we will also refund the cost of delivery."),f.a.createElement("p",null,"You will get your refund 3 working days after you request it."),f.a.createElement("h2",{id:"refunds-damaged-product"},"Get a refund for a damaged product"),f.a.createElement("p",null,"We do not offer exchanges but we will refund the cost of any faulty or damaged products. If it\u2019s a fresh product (anything with a best before date) then you must contact us before it goes out of date."),f.a.createElement("p",null,"Call our support team on ",f.a.createElement("a",{href:"tel:03300417737"},"0330 041 7737")," or email"," ",f.a.createElement("a",{href:"mailto:cooponlinedelivery@coop.co.uk"},"cooponlinedelivery@coop.co.uk"),"."),f.a.createElement("p",null,"This is only a summary of your legal rights. They are subject to certain exceptions. For detailed information call ",f.a.createElement("a",{href:"tel:03454040506"},"03454 04 05 06")," or visit the"," ",f.a.createElement("a",{href:"https://www.citizensadvice.org.uk/"},"Citizens Advice website"),"."),f.a.createElement("h2",{id:"refunds-missing-product"},"Get a refund for a missing product "),f.a.createElement("p",null,"If any of your order is missing call our support team on"," ",f.a.createElement("a",{href:"tel:03300417737"},"0330 041 7737")," or email"," ",f.a.createElement("a",{href:"mailto:cooponlinedelivery@coop.co.uk"},"cooponlinedelivery@coop.co.uk"),"."));var oE=()=>f.a.createElement("main",{className:"container u-container-padded"},f.a.createElement("h1",null,"Privacy notice"),f.a.createElement("p",null,"This privacy notice sets out details of the information we collect about you, how we may use it, how we ensure it\u2019s kept secure, who we share it with, and what rights you may have in respect of that information."),f.a.createElement("ul",null,f.a.createElement("li",null,"We mainly use your personal information to provide our services to you, to meet our legal obligations, and to help improve our interests."),f.a.createElement("li",null,"We only want to hold as much personal information as we need to do the above."),f.a.createElement("li",null,"We want our personal information relationship to be reciprocal where we both benefit, not an exploitative one."),f.a.createElement("li",null,"Where we share your data, we only do so with organisations who have a right to see it and who will use it fairly."),f.a.createElement("li",null,"We take security seriously."),f.a.createElement("li",null,"You can contact us at anytime about anything relating to this notice or the information we hold about you.")),f.a.createElement("h2",null,"Who we are"),f.a.createElement("p",null,"This Notice applies to all the entities within the Co-operative Group Limited (\u201cwe\u201d, \u201cus\u201d and \u201cThe Co-op\u201d) to the extent that they are controllers of your personal information."),f.a.createElement("p",null,"We\u2019re committed to respecting the information you trust us with and making sure that we keep it safe. The Co-op has a family of businesses including Food, Insurance, Legal Services, Funeralcare and Health."),f.a.createElement("h2",null,"Why we ask for your personal information"),f.a.createElement("h3",null,"Where we need your information to do what we\u2019ve promised"),f.a.createElement("p",null,"Our main use of your information is where it\u2019s necessary to supply you with our products and services, or where it\u2019s necessary as part of the management of our Membership programme."),f.a.createElement("p",null,"For example, we\u2019d need your name, address and payment details when you join as a Member so we can:"),f.a.createElement("ul",null,f.a.createElement("li",null,"register your share in the Co-op"),f.a.createElement("li",null,"send your Membership card"),f.a.createElement("li",null,"take your \xa31")),f.a.createElement("h3",null,"Where we need your personal information to help us get better at everything we do"),f.a.createElement("p",null,"These are things we consider to be our legitimate interests, some of which are more relevant to certain Co-op Group businesses than others."),f.a.createElement("ul",null,f.a.createElement("li",null,"Developing an understanding of the activities, preferences, and requirements of our Members and Customers. For example, we\u2019ll track activity on our website"," ",f.a.createElement("a",{href:"https://www.coop.co.uk/terms/cookies"},"using cookies")," to understand the pages people visit so we can offer the best layout of our site. Sometimes we\u2019ll contact you to seek feedback on a product or service you\u2019ve requested."),f.a.createElement("li",null,"For statistical analysis to improve existing products and services and develop new products and services."),f.a.createElement("li",null,"To better understand the common and more general needs of our customers and members. This helps us make sure we offer the right products and services and generally meet the needs of our Members. For example, it\u2019s really useful for us to look at large sets of data to understand whether we\u2019re better stocking skimmed or semi-skimmed milk."),f.a.createElement("li",null,"To give you a better and more personalised experience (this is sometimes referred to as \u2019profiling\u2019). For example when you sign in to your Co-op Membership account, we might show you different content depending on what we know about you. Similarly, if we\u2019d like to give you a money off voucher at the till, we\u2019d prefer to use your personal details to try and give you a coupon that we think you\u2019re more likely to use. So if you buy a lot of apples, we might give you vouchers for apples (and not oranges). Sometimes, we\u2019ll probably make some wrong assumptions about you and we\u2019re really sorry about that. For example, maybe you\u2019d prefer us to give vouchers for things you haven\u2019t tried rather than the things we think you want them for."),f.a.createElement("li",null,"Communicating with you about the products and services we\u2019re providing to you. We may use your personal details to send you things we think you need to know about and things we are obliged to send you legally. We broadly term these \u201cservice\u201d emails. For example we send Members details about things like changes to the benefits they get from membership. We may also send individual Members timely information we think they need to help them, for example when they have unsuccessfully attempted to sign-in to their account."),f.a.createElement("li",null,"Promoting, marketing and advertising our products and services. For example, we might look at a combination of your personal information to try and determine where we might be best placing a television or press advert."),f.a.createElement("li",null,"To obtain feedback on our performance, to assess customer service and satisfaction and to improve overall operations."),f.a.createElement("li",null,"Running checks for identification, creditworthiness and price setting against databases such as our Co-op Membership database, which contains information about our Members and how they use their Co-op Membership cards, the electoral register and other databases that contain publicly available information about County Court judgments, bankruptcy and repossessions."),f.a.createElement("li",null,"Managing services or insurance policies."),f.a.createElement("li",null,"Where you make a complaint, to handle that complaint and ensure that we are in the best position to address the issues you raise.")),f.a.createElement("h3",null,"Other ways we might use your personal information"),f.a.createElement("p",null,"We may also need to process your personal data from time to time where necessary for:"),f.a.createElement("ul",null,f.a.createElement("li",null,"Preventing and detecting crime or anti-social behaviour. For example, we\u2019ll use CCTV in our buildings."),f.a.createElement("li",null,"Dealing with any legal claims.")),f.a.createElement("p",null,"If we\u2019re using your personal information in the above ways, we really understand that your data has a value and therefore we try to use it for everyone\u2019s benefit. We also try really hard to ensure there will be little or no negative impact on you. This is part of our commitment to ensure that we consider all privacy concerns at the earliest possible opportunity."),f.a.createElement("h2",null,"Our legal basis for using your information"),f.a.createElement("p",null,"We will only use your personal information where:"),f.a.createElement("h3",null,"We have your consent"),f.a.createElement("p",null,"For example we might rely on your consent in order to send you direct marketing communications. Where we do, you can withdraw your consent at any time."),f.a.createElement("h3",null,"It\u2019s necessary for the purposes of our legitimate interests"),f.a.createElement("p",null,"These interests are set out above (see \u2019Where we need your personal information to help us get better at everything we do\u2019), and we will only use such data where those interests are not outweighed by your own interests or fundamental rights and freedoms."),f.a.createElement("h3",null,"It\u2019s necessary for the performance of a contract"),f.a.createElement("p",null,"Either when we\u2019re in a contract with you or to take steps as requested by you prior to entering into a contract."),f.a.createElement("h3",null,"It\u2019s necessary for compliance with a legal obligation we have"),f.a.createElement("h3",null,"To protect your vital interests"),f.a.createElement("p",null,"For example if we needed to share your information with a health professional because you\u2019d fallen ill."),f.a.createElement("p",null,"Please note that where we require you to provide certain information in order to perform our contractual obligations and you decline to do so, this may delay our performance of the contract or prevent us from honouring our contractual obligations."),f.a.createElement("h2",null,"The types of information we hold about you"),f.a.createElement("p",null,"Almost all of the information we have is the information you\u2019ve given to us. That might be when you request a product, service, offers or news from us via our website, emails, telephone conversations, and written and verbal communication."),f.a.createElement("p",null,"Obviously the types of information you give us will vary depending on the service you\u2019ve requested but typically could include:"),f.a.createElement("ul",null,f.a.createElement("li",null,"name, address, and contact details"),f.a.createElement("li",null,"details of products and services you\u2019ve bought from us or, for our health related services, details about your health and medication"),f.a.createElement("li",null,"details of your interactions with us through our stores, contact centres, online or by using one of our apps"),f.a.createElement("li",null,"payment details"),f.a.createElement("li",null,"call recordings"),f.a.createElement("li",null,"information about how you interact with our communications"),f.a.createElement("li",null,"visual images, personal appearance and behaviour (usually obtained from CCTV images)")),f.a.createElement("p",null,"As well as obtaining information from you, we may also collect it from:"),f.a.createElement("ul",null,f.a.createElement("li",null,"someone else acting on your behalf who gives us the information directly"),f.a.createElement("li",null,"other Co-op Group companies such as Co-op Insurance, Funeralcare, Food and Health"),f.a.createElement("li",null,"publicly available sources such as social media and the electoral register"),f.a.createElement("li",null,"fraud prevention and detection agencies, organisations and databases"),f.a.createElement("li",null,"government and law enforcement agencies and regulators"),f.a.createElement("li",null,"NHS organisations and systems such as your GP and Summary Card Record")),f.a.createElement("p",null,"It\u2019s also possible we might process other types of information that might be considered even more private, such as information relating to criminal offences and alleged offences. For example, if you wanted a quote for a Motor Insurance product we might need to ask about any criminal offences or health conditions. These are considered \u201cspecial categories\u201d of personal information and we\u2019re obliged to handle this information even more thoughtfully."),f.a.createElement("p",null,"See a full list of special category information on"," ",f.a.createElement("a",{href:"https://ico.org.uk/for-organisations/guide-to-the-general-data-protection-regulation-gdpr/lawful-basis-for-processing/special-category-data/"},"the ICO\u2019s website"),"."),f.a.createElement("h3",null,"Sharing your personal information"),f.a.createElement("p",null,"When we share your information, we only do so in accordance with our legal, data protection and privacy obligations."),f.a.createElement("p",null,"Your information may be disclosed to the following:"),f.a.createElement("ul",null,f.a.createElement("li",null,f.a.createElement("strong",null,"Service providers.")," We use a number of other organisations who carry out work on our behalf to help us provide our products and services. We ensure any third parties we may share your data with have at least the same privacy and security standards as ourselves and will only use your information for the specific reasons we ask them to."),f.a.createElement("li",null,f.a.createElement("strong",null,"Companies, brands and businesses within the Co-operative Group.")," We may also share information throughout the Co-op for the reasons outlined such as core administration and activities that have been identified as being within our legitimate interests. For example, we\u2019ll share information from our Co-op Food stores and other businesses with our Membership department to ensure you receive your Membership rewards and there are similar arrangements between our other businesses. We may also share information where we decide to restructure part of our business and, for example, we transfer responsibility for the services we provide to you to another business within the Co-op Group - these entities are the same as those listed as controllers in this notice."),f.a.createElement("li",null,f.a.createElement("strong",null,"Credit reference agencies.")," For example they may supply anti-fraud and credit-insight information to us."),f.a.createElement("li",null,f.a.createElement("strong",null,"Social media companies and our advertising partners.")," For example we might match your email address with Facebook and Twitter to enable us to run promotions on their platforms"),f.a.createElement("li",null,f.a.createElement("strong",null,"Our regulators.")," For example, we may need to share your information with the Solicitors Regulation Authority or the Legal Ombudsman if we are providing legal services to you."),f.a.createElement("li",null,f.a.createElement("strong",null,"Our professional advisors.")," For example we may need to share information with our lawyers or auditors when they need it to give us their professional advice."),f.a.createElement("li",null,f.a.createElement("strong",null,"Public authorities, agencies and other government bodies.")," For example we might need to provide your information to the police or other bodies such as the DVLA, the NHS Business Services Authority or your GP."),f.a.createElement("li",null,f.a.createElement("strong",null,"Potential corporate buyers."),"Where we consider selling any of our Co-op Group businesses or substantially all of its assets to a third party outside the Co-op group. We may need to disclose documentation and other information that may include your personal information.")),f.a.createElement("h2",null,"How long we keep personal information"),f.a.createElement("p",null,"We only keep your information for as long as it\u2019s needed for each of the activities we\u2019ve identified in this Notice, as well as for as long as required in connection with our legal or regulatory obligations."),f.a.createElement("p",null,"As you might expect, that will vary but we\u2019re happy to share more specific retention schedules if you wish to contact us on the contact details below."),f.a.createElement("h3",null,"Transferring your information outside the European Economic Area (EEA)"),f.a.createElement("p",null,"We may need to transfer your personal information outside of the EEA in order to provide you with the services and products you require or as necessary for our business. This will most likely occur when our third-party providers are based outside the EEA. Some of these countries may not have laws that protect privacy rights as extensively as in the EEA."),f.a.createElement("p",null,"If we do transfer your personal information to other jurisdictions, we will take proper steps to ensure that your information is as equally protected as in the UK, such as entering into \u201cstandard data protection clauses\u201d with the recipient. These are clauses that have been approved by the European Commission for such transfers."),f.a.createElement("h2",null,"Your rights about how your personal information is handled"),f.a.createElement("p",null,"Data protection laws provide you with a number of rights as set out below."),f.a.createElement("h3",null,"Right to access your personal data"),f.a.createElement("p",null,"You may request confirmation that we hold personal data about you, as well as access to a copy of any such data."),f.a.createElement("h3",null,"Right to rectification"),f.a.createElement("p",null,"You may ask us to rectify any inaccurate information we hold about you."),f.a.createElement("h3",null,"Right to erasure"),f.a.createElement("p",null,"You may ask us to delete your personal information."),f.a.createElement("h3",null,"Right to restriction"),f.a.createElement("p",null,"You may ask us to restrict the processing of your personal information in certain circumstances."),f.a.createElement("h3",null,"Right to portability"),f.a.createElement("p",null,"You may request the receipt or transfer to another organisation in a structured, commonly used and machine-readable form, the personal data that you have provided to us."),f.a.createElement("h3",null,"Right to object"),f.a.createElement("p",null,"You may object to our processing of your personal information in certain circumstances."),f.a.createElement("h3",null,"Right to withdraw consent"),f.a.createElement("p",null,"Where our processing of your personal information is based on your consent, you may withdraw this consent at any time, although this won\u2019t affect the lawfulness of any prior processing where we relied on your consent."),f.a.createElement("h3",null,"Right to make a complaint"),f.a.createElement("p",null,"You may make a complaint about our processing of your personal data by contacting us via the contact details provided in this Notice. While we hope that we would be able to address any issues you have in respect of this processing, you may also make a complaint to the UK\u2019s data protection regulation - visit the"," ",f.a.createElement("a",{href:"https://ico.org.uk/"},"Information Commissioner\u2019s Office"),"."),f.a.createElement("p",null,"If you would like to exercise any of your rights, please contact us using the contact details set out below."),f.a.createElement("h3",null,"Automated processing"),f.a.createElement("p",null,"Sometimes we use your personal information in automated processes to make decisions about you, or to create a profile of you. If you are a Member, we may also generate a profile \u2018score\u2019 for you, which is designed to provide benefits such as discounts on Co-op products and services. Our use of automated decision making, for example in respect of our insurance products, is to help ensure that decisions are made accurately, fairly and efficiently."),f.a.createElement("h3",null,"How you can contact us"),f.a.createElement("p",null,"To find out what personal information we hold about you, print a subject access request form, fill it in and send it by post to:"),f.a.createElement("address",null,"Data Protection Team,",f.a.createElement("br",null),"5th Floor,",f.a.createElement("br",null),"1 Angel Square,",f.a.createElement("br",null),"Manchester M60 0AG",f.a.createElement("br",null)),f.a.createElement("p",null,f.a.createElement("a",{href:"https://assets.ctfassets.net/bffxiku554r1/9iEYTSfJdeKo8IOCgcES/1c962d643ad7c93635b984ba2fcec575/Non-Employee_Subject_Access_Request_Form_v3.pdf"},"Subject access request form (PDF, 2 pages, 346KB)")),f.a.createElement("p",null,"For other enquiries or to get a subject access request form by post, write to us at the address above or call 0800 0686 727."),f.a.createElement("p",null,"The information we hold about you will depend on how you shop and interact with us, so the more information you can give about what it is you want you see, the quicker and more specific our response can be."),f.a.createElement("p",null,"You also have the right to request we correct any inaccurate information we hold, as well as the right to object to profiling and the right to ask us to delete your information."),f.a.createElement("p",null,"If you have any questions, concerns or objections about how we use your personal information please contact us using the details above."),f.a.createElement("p",null,"If you have any concerns or complaints about how we handle your information you can complain to the ",f.a.createElement("a",{href:"https://ico.org.uk/"},"Information Commissioner\u2019s Office"),", although we\u2019d really like the chance to try and help with any issues first."),f.a.createElement("h2",null,"Changes to this Privacy Notice"),f.a.createElement("p",null,"We\u2019ll update this page if we decide to change our privacy policy so that you are always aware of the information we collect, how we use it and under what circumstances we disclose it."),f.a.createElement("p",null,"If we make significant changes to the notice we\u2019ll contact you directly to let you know."),f.a.createElement("p",null,"We encourage you to check back regularly."));var cE=()=>f.a.createElement(Jt,{fillParentContainer:!0},f.a.createElement("main",{className:"container u-container-padded","data-testid":"accounts"},f.a.createElement("h1",null,"We\u2019re improving customer accounts"),f.a.createElement("p",null,"We are working on our account area to give you a better experience when using our service."),f.a.createElement("p",null,"If you already had a shop.coop.co.uk account with us, you will no longer be able to sign in to it."),f.a.createElement("p",null,"Soon you will be able to"),f.a.createElement("ul",null,f.a.createElement("li",null,"sign in with your existing Co-op membership account details if you\u2019re a member"),f.a.createElement("li",null,"earn and redeem membership rewards"),f.a.createElement("li",null,"shop with a personalised experience"))));var sE=()=>f.a.createElement("main",{className:"container u-container-padded"},f.a.createElement("h1",null,"Terms of service"),f.a.createElement("p",null,"These terms and conditions together with our Privacy Policy and Website Terms of Use apply when you use \u201c",f.a.createElement("a",{href:"https://shop.coop.co.uk/"},"shop.coop.co.uk"),"\u201d to order goods."),f.a.createElement("p",null,"In these terms and conditions, references to \u201cCo-op\u201d, \u201cus\u201d, \u201cwe\u201d or \u201cour\u201d mean Co-operative Group Limited, registered society no. 525R, whose registered office is at 1 Angel Square, Manchester, M60 0AG."),f.a.createElement("p",null,"Please read these terms carefully before you submit any order on the Website as you will be deemed to have accepted these terms and conditions and they will apply to your orders."),f.a.createElement("p",null,"We may make changes to these terms and conditions at any time so please do not assume the same terms will apply to any future orders."),f.a.createElement("ol",null,f.a.createElement("li",null,f.a.createElement("p",null,"Who may buy goods from us via the Website"),f.a.createElement("p",null,"You may only use this Website to purchase goods if you are:"),f.a.createElement("ol",null,f.a.createElement("li",null,"18 years of age or over. By placing an order you are confirming that you are 18 or over;"),f.a.createElement("li",null,"resident within a geographical area for which we offer delivery or able to collect from a store where we offer click and collect (\u201cDelivery Area\u201d), as indicated on the Website; and"),f.a.createElement("li",null,"a consumer (purchasing goods for your own personal use)."))),f.a.createElement("li",null,f.a.createElement("p",null,"When the contract is formed between us"),f.a.createElement("p",null,"The steps required to create the contract between you and us are as follows:"),f.a.createElement("ol",null,f.a.createElement("li",null,"You will place an order on the Website by selecting checkout."),f.a.createElement("li",null,"We will send you an order acknowledgment email. This is not acceptance of your order; acknowledgment"),f.a.createElement("li",null,"We will also send you a confirmation email to confirm when your order is being processed. This is not acceptance of your order;"),f.a.createElement("li",null,"If you have chosen for your goods to be delivered, we will then send you a delivery email to let you know your goods are on their way including any alternatives. We will then deliver your goods. At the point you accept delivery a binding contract is formed between you and us;"),f.a.createElement("li",null,"If you have chosen click and collect, we will send you an email to let you know when your goods have been packed including any alternatives. At the point you collect your goods, a binding contract is formed between you and us."))),f.a.createElement("li",null,f.a.createElement("p",null,"Age Restrictions"),f.a.createElement("ol",null,f.a.createElement("li",null,"We may sell age-restricted products (including but not limited to alcohol, cigarettes, DVDs, knives, aerosol razor, blades and lottery tickets) (\u201cAge Restricted Items\u201d) via our Website."),f.a.createElement("li",null,"We operate a challenge 25 policy. This means that if the person collecting or receiving delivery of Age Restricted Items to be under 25, we will request photo ID (such as a driving licence or passport) to prove that they are over the age of 18."),f.a.createElement("li",null,"We may retain the Age Restricted Items if proof of age or an alternative adult (with proof of age, if requested) is not available."),f.a.createElement("li",null,"At our discretion we may also remove the Age Restricted Items and hand over the remainder of your goods. We shall refund you for any Age Restricted Items that are not delivered/collected."))),f.a.createElement("li",null,f.a.createElement("p",null,"Availability of Goods and Substitutions"),f.a.createElement("ol",null,f.a.createElement("li",null,"Availability of goods will depend on stock in the Selected Store at the time of purchase."),f.a.createElement("li",null,"Where an item you have chosen is unavailable (and you have not opted out of us providing you with a suitable alternative) we will substitute the item with an alternative. However, this may affect the price you pay (see clause 9.2). You will be notified of any alternatives and the total price charged in your delivery or collection email."),f.a.createElement("li",null,"You may refuse any substituted item on delivery or collection and we will refund you for the items."))),f.a.createElement("li",null,f.a.createElement("p",null,"Price"),f.a.createElement("ol",null,f.a.createElement("li",null,"The price of any of the goods you order will be at the price on the Website at the time you place your order. If a price change such as a promotion, is put in place after you have placed your order, these will not be applied to your order."),f.a.createElement("li",null,"We may require the total cost of the goods you order in a single order to be equal to, or more than, a certain amount (which we refer to as a \u2018minimum basket spend\u2019. Please see the ",f.a.createElement("a",{href:"https://shop.coop.co.uk/faq"},"FAQs")," section for details of our current minimum basket spend."),f.a.createElement("li",null,"The prices for all goods on the website are inclusive of VAT."),f.a.createElement("li",null,"For goods sold by weight such as fruit and vegetables, it is difficult for us to select them to an exact weight when we are putting your order together therefore, the item we select for you may be more or less in weight. This means you may be charged more or less than the price stated on the Website for these goods. We will always try our best to get as near as possible to the weight you have ordered."),f.a.createElement("li",null,"It is always possible that, despite our best efforts, some of the products we sell may be incorrectly priced. If we accept and process your order where a pricing error is obvious and unmistakeable and could reasonably have been recognised by you as a mispricing, we may end the contract, refund you any sums you have paid and require the return of any goods provided to you."))),f.a.createElement("li",null,f.a.createElement("p",null,"Delivery"),f.a.createElement("ol",null,f.a.createElement("li",null,"This clause 6 applies if you have chosen to have goods delivered to you."),f.a.createElement("li",null,"Goods may only be delivered to a residential address within a Delivery Area."),f.a.createElement("li",null,"Goods will be despatched or available for collection from a Co-op Food store within the Delivery Area. The specific store will be identified during the order process and confirmed in your confirmation email (\u201cSelected Store\u201d)."),f.a.createElement("li",null,"Your delivery date and timeslot will be confirmed to you in your confirmation email. We will do our best to deliver your goods within the agreed timeslot however, we cannot guarantee this."),f.a.createElement("li",null,"We will send a text message to the number you provided when placing your order when your goods have been dispatched."),f.a.createElement("li",null,"We may require proof of age upon delivery, in accordance with clause 3."),f.a.createElement("li",null,"If nobody is home to accept and sign for the delivery, or the person accepting delivery is unable to provide proof of age upon request we will not leave the goods."),f.a.createElement("li",null,"We will try to contact you after a failed delivery and will hold the goods at the Selected Store for collection until that store closes on that day. If the goods are not collected, we will cancel your order and the cost of your order including the cost of delivery will be refunded to you."))),f.a.createElement("li",null,f.a.createElement("p",null,"Delivery Charge and Carrier Bag Charge"),f.a.createElement("ol",null,f.a.createElement("li",null,"In addition to the price, a delivery charge may be payable by you. If applicable, this will be displayed to you before you place your order."),f.a.createElement("li",null,"In addition to the price and delivery charge, a carrier bag charge may be payable by you for bags we use to pack your items. If applicable, this will be displayed to you before you place your order."))),f.a.createElement("li",null,f.a.createElement("p",null,"Click and Collect"),f.a.createElement("ol",null,f.a.createElement("li",null,"This clause 8 applies if you have chosen to collect goods from a Selected Store."),f.a.createElement("li",null,"Goods may only be collected from the specific store within the Delivery Area, as specified in your confirmation email."),f.a.createElement("li",null,"In order to qualify for collection your order must have a minimum basket value of \xa315."),f.a.createElement("li",null,"Collection times may vary depending on the Selected Store."),f.a.createElement("li",null,"You can choose your collection time on the Website when placing your order."),f.a.createElement("li",null,"We may require proof of age upon collection, in accordance with clause 3."),f.a.createElement("li",null,"All customers collecting goods will be asked to prove a form of identification. The identification must match the name of the cardholder who paid for the order."),f.a.createElement("li",null,"Goods must be signed for on collection."))),f.a.createElement("li",null,f.a.createElement("p",null,"Payment"),f.a.createElement("ol",null,f.a.createElement("li",null,"The following payment methods are accepted, Visa and Mastercard"),f.a.createElement("li",null,"We will pre-authorise your payment card with the total cost of your order, as shown on the Website at the time you place your order, plus 10% to cover the cost of any substitutions."),f.a.createElement("li",null,"The total cost of your order (comprising the cost of the goods (including any substituted goods)), delivery charge (if applicable) and carrier bag charge (if applicable)) will be charged to your payment card when your order is packed on the day of delivery or collection."))),f.a.createElement("li",null,f.a.createElement("p",null,"Coupons, Vouchers, Rewards and Discounts"),f.a.createElement("ol",null,f.a.createElement("li",null,"You cannot redeem any Co-op vouchers or coupons when placing an order on the Website."),f.a.createElement("li",null,"If you are a ",f.a.createElement("a",{href:"https://www.coop.co.uk/membership"},"Co-op Member"),", you will earn your 5% and 1% rewards when using your Membership card to buy selected Co-op branded products via the Website, subject to our"," ",f.a.createElement("a",{href:"https://www.coop.co.uk/terms/membership-terms-and-conditions"}," ","Membership Terms and Conditions"," ")," ",". To do so, please enter your Membership number where indicated during the order process."),f.a.createElement("li",null,"Co-op Members will not be able to:"),f.a.createElement("ul",null,f.a.createElement("li",null,"spend monies in their membership wallet (i.e. 5% earned on previous purchases) against goods ordered via the Website; or"),f.a.createElement("li",null,"spend or redeem any other discounts (including, without limitation, employee member discounts) against goods ordered via the Website.")),f.a.createElement("li",null,"You cannot redeem any other discount (including, without limitation, NUS student discounts) against purchases via the Website."))),f.a.createElement("li",null,f.a.createElement("p",null,"Changes to your order"),f.a.createElement("p",null,"If we haven\u2019t yet packed your goods for delivery or collection and you would like to add or remove goods from your order, you can do this by logging into the Website. If we have packed your order and you would like to make changes, you need to let us know by contacting us on 0330 041 7737")),f.a.createElement("li",null,f.a.createElement("p",null,"Changing your mind (canceling) an order for a refund"),f.a.createElement("ol",null,f.a.createElement("li",null,"You can also change your mind and cancel your order for any reason within 30 days after the delivery/collection date for an exchange or refund."),f.a.createElement("li",null,"Your right of cancellation does not apply to any of the following goods:"),f.a.createElement("ul",null,f.a.createElement("li",null,"Goods that have a \u2018use by\u2019, \u2018best before\u2019 or \u2018BBE\u2019 date which has expired;"),f.a.createElement("li",null,"Chilled or frozen products;"),f.a.createElement("li",null,"Goods that cannot be returned for hygiene or safety reasons once unwrapped, unpackaged or unsealed (such as sealed food products, sealed drink products, personal grooming products, medicines, body jewellery, certain items of clothing and certain baby products);"),f.a.createElement("li",null,"Newspapers and magazines;"),f.a.createElement("li",null,"Gift cards, e-top-ups, lottery tickets and scratch cards; and"),f.a.createElement("li",null,"CDs, DVDs and computer software.")),f.a.createElement("li",null,"To notify us that you wish to cancel your order, please contact us within 30 days after the delivery/collection date. Alternatively, you may complete and send a Cancellation Form (in the form set out at the bottom of these terms and conditions) to us within 30 days after the delivery/collection date."),f.a.createElement("li",null,"To return goods for which you have changed your mind, please return them to the Selected Store during the store\u2019s usual open hours within 30 days after the delivery/collection date. If you cannot return the goods to the Selected Store, please contact us so that we can make arrangements for collection. You must pay the costs of returning those goods to us (including any costs we incur collecting the goods from you)."),f.a.createElement("li",null,"Where you exercise your right to change your mind, we will refund you for the relevant goods. Where you are returning all goods in a single order, we will also refund you for the delivery charge for that order. Refunds will be paid within 14 days from the day on which we receive the items back from you."))),f.a.createElement("li",null,f.a.createElement("p",null,"Exchange or refund for unsatisfactory goods"),f.a.createElement("ol",null,f.a.createElement("li",null,"We are under a legal duty to supply products that are in conformity with this contract and each product is sold subject to its product description which can be found on the relevant page for that product."),f.a.createElement("li",null,"When your goods are delivered/collected please check nothing appears to be damaged or not as described. If any of the goods are damaged or not a described please do not accept the order."),f.a.createElement("li",null,"If you have accepted the goods and then discover something is faulty or not as described you have the following rights:"),f.a.createElement("ul",null,f.a.createElement("li",null,"Up to 30 days after delivery/collection date: if the goods are faulty or misdescribed then you can get a refund."),f.a.createElement("li",null,"Up to 6 months after the delivery/collection date: if the goods can\u2019t be repaired or replaced then you\u2019re entitled to a refund."),f.a.createElement("li",null,"Up to 6 years after the delivery/collection date: you may be entitled to some money back but the onus will be on you to prove the goods have an inherent faulty.")),f.a.createElement("li",null,"This is only a summary of your key legal rights. They are subject to certain exceptions. For detailed information please visit the Citizens Advice website www.adviceguide.org.uk or call 03454 04 05 06."),f.a.createElement("li",null,"\xa0You must return goods that are faulty or misdescribed returning them to the Selected Store (as stated in your confirmation email)."),f.a.createElement("li",null,"\xa0Where we give you a refund, we will usually refund any money received from you using the same method originally used by you to pay for your purchase."))),f.a.createElement("li",null,f.a.createElement("p",null,"Product information"),f.a.createElement("ol",null,f.a.createElement("li",null,"Images of the products on our website are for illustrative purposes only. The packaging of the product may vary from that shown in images on our website."),f.a.createElement("li",null,"We make reasonable efforts to ensure all information on the Website for the goods is correct although we cannot guarantee this. We do not accept any liability for any incorrect information contained on the Website. Please check the labels and packaging of all goods prior to use."))),f.a.createElement("li",null,f.a.createElement("p",null,"Liability"),f.a.createElement("ol",null,f.a.createElement("li",null,"\xa0If we fail to comply with these terms, we are responsible for loss or damage you suffer that is a foreseeable result of our breaking this contract or our failing to use reasonable care and skill. Loss or damage is \u2018foreseeable\u2019 if either it is obvious that it will happen or if, at the time the contract was made, both we and you knew it might happen."),f.a.createElement("li",null,"\xa0Nothing in these terms and conditions excludes or limits our liability for:"),f.a.createElement("ul",null,f.a.createElement("li",null,"death or personal injury caused by our negligence;"),f.a.createElement("li",null,"fraud or fraudulent misrepresentation;"),f.a.createElement("li",null,"liability which may not be limited or excluded by section 31 (1) Consumer Rights Act 2015;"),f.a.createElement("li",null,"defective products under the Consumer Protection Act 1987; or"),f.a.createElement("li",null,"any other matter for which it would be illegal for us to exclude or attempt to exclude our liability.")),f.a.createElement("li",null,"\xa0We only supply the products for domestic and private use. If you use the products for any commercial, business or re-sale purpose we will have no liability to you for any loss of profit, loss of business, business interruption, or loss of business opportunity."))),f.a.createElement("li",null,f.a.createElement("p",null,"Contact Us"),f.a.createElement("ol",null,f.a.createElement("li",null,"If you have any questions or complaints, please contact us:"),f.a.createElement("ul",null,f.a.createElement("li",null,"By email at: cooponlinedelivery@coop.co.uk"),f.a.createElement("li",null,"By phone between the hours stated below on 0330 041 7737 every day of the week."),f.a.createElement("ul",null,f.a.createElement("li",null,"Monday \u2013 Saturday: 9:00am - 10:00pm"),f.a.createElement("li",null,"Sunday: 11:00am - 5:00pm")),f.a.createElement("li",null,"By post at: Coop Food Customer Relations, Freepost MR 9473, Manchester, M4 8BA")),f.a.createElement("li",null,"\xa0We will do our very best to resolve any complaint to your satisfaction. However, if you are not satisfied, you have the right to use the"," ",f.a.createElement("a",{href:"https://ec.europa.eu/consumers/odr/main/index.cfm?event=main.home.chooseLanguage"}," ","European Commission Online Dispute Resolution")," ","platform complaint and have it resolved by an independent dispute resolution body."))),f.a.createElement("li",null,f.a.createElement("p",null,"How we may use your personal information"),f.a.createElement("p",null,"We will only use your personal information as set out in our"," ",f.a.createElement("a",{href:"https://www.coop.co.uk/terms/privacy-notice"},"Privacy Policy"),".")),f.a.createElement("li",null,f.a.createElement("p",null,"General"),f.a.createElement("ol",null,f.a.createElement("li",null,"Neither we nor you will be responsible if we are unable to perform our respective obligations under the contract due to events which are genuinely beyond your or our reasonable control."),f.a.createElement("li",null,"We may transfer our rights and obligations (including, without limitation, our delivery obligations) under these terms to another organisation."),f.a.createElement("li",null,"These terms and conditions are governed by English law and any claim made relating to these terms and conditions will be in the Courts of England and Wales."),f.a.createElement("li",null,"Nothing in these terms and conditions shall give rights to any person who is not a party to it (whether under the Contracts (Rights of Third Parties) Act 1999 or otherwise.")))),f.a.createElement("h2",null,"MODEL CANCELLATION FORM"),f.a.createElement("p",null,"(Complete and return this form only if you wish to withdraw from the contract)"),f.a.createElement("p",null,"To: Co-operative Group Limited Coop Food Customer Relations, Freepost MR 9473, Manchester, M4 8BA,cooponlinedelivery@coop.co.uk, 0330 041 7737."),f.a.createElement("p",null,"I/We [*] hereby give notice that I/We [*] cancel my/our [*] contract of sale of the following goods [*]/for the supply of the following service [*],"),f.a.createElement("p",null,"Ordered on [*]/received on [*],"),f.a.createElement("p",null,"Name of consumer(s),"),f.a.createElement("p",null,"Address of consumer(s),"),f.a.createElement("p",null,"Signature of consumer(s) (only if this form is notified on paper),"),f.a.createElement("p",null,"Date [*] Delete as appropriate")),lE=a(310),iE=a.n(lE),uE=a(125),dE=a.n(uE);Pe.a.number.isRequired,Pe.a.number.isRequired,a(634);const mE=()=>f.a.createElement("p",{className:"mv2","data-testid":"no-slots-available"},"Sorry, we\u2019re really busy at the moment and there are no time slots available."),pE=({action:e,testId:t,children:a})=>f.a.createElement(f.a.Fragment,null,f.a.createElement("button",{type:"button",className:"next-slot",onClick:e,"data-testid":t},a)),hE=({isFetching:e,action:t,fulfilmentType:a,nextAvailableSlot:r,storeLocation:n,testId:o,wrapper:c})=>{if(e)return f.a.createElement(c,{action:t,testId:o},f.a.createElement("p",null,"Loading..."));const s=(l=r,Lt()(l)?null:Vs(l));var l;return s?f.a.createElement(c,{action:t,testId:o},f.a.createElement("span",{className:"next-slot--content ".concat(a)},s),n?f.a.createElement("span",{className:"next-slot--label"},"Store: ",f.a.createElement("span",{className:"fw5"},n)):null):f.a.createElement(mE,null)},fE=e=>f.a.createElement(hE,Object.assign({},e,{wrapper:pE}));hE.defaultProps={isFetching:!1,nextAvailableSlot:null,storeLocation:null,testId:null};a(635);const bE=6e4*15;const yE=({postcode:e,storeId:t,coordinates:a,onRefreshSlots:r})=>{e&&r({storeId:t,coordinates:a})},EE=({isFetching:e,collectionStore:t,coordinates:a,deliveryStore:r,nextCollectionSlot:n,nextDeliverySlot:o,onClickCollection:c,onRefreshSlots:s,postcode:l})=>{const i=(({collectionStore:e,deliveryStore:t})=>{const a=e?e.id:null;return(t?t.id:null)||a})({collectionStore:t,deliveryStore:r}),u=Object(ea.k)();if(Object(h.useEffect)(()=>{yE({coordinates:a,onRefreshSlots:s,postcode:l,storeId:i})},[a,s,l,i]),Object(Cc.a)(()=>{yE({coordinates:a,onRefreshSlots:s,postcode:l,storeId:i})},bE),t&&r&&console.assert(t.id===r.id,"stores do not match - will need to refresh slots for each store"),l){const a=t?t.name:null;return f.a.createElement("section",{className:"quick-slot-picker"},f.a.createElement("div",{className:"container container--padded"},f.a.createElement("h2",{className:"quick-slot-picker__title"},"Book next available slot"),f.a.createElement("div",{"data-testid":"next-delivery-slot"},f.a.createElement("h3",{className:"quick-slot-picker__subtitle"},"Delivery"),f.a.createElement(fE,{isFetching:e,action:()=>u.push((e=>{if(e){const t=e.id,a=e.date;return"/delivery/".concat(a,"/").concat(t)}return"#"})(o)),fulfilmentType:"delivery",nextAvailableSlot:o,testId:"nextDelivery"}),dE()(o)?null:f.a.createElement("p",{className:"quick-slot-picker__link"},f.a.createElement(g.Link,{to:"/delivery"},"Arrange a different delivery"))),f.a.createElement("div",{"data-testid":"next-collection-slot"},f.a.createElement("h3",{className:"quick-slot-picker__subtitle"},"Collection"),f.a.createElement(fE,{isFetching:e,action:()=>c({store:t,slot:n}),fulfilmentType:"collection",nextAvailableSlot:n,storeLocation:a,testId:"nextCollection"}),dE()(n)?null:f.a.createElement("p",{className:"quick-slot-picker__link"},f.a.createElement(g.Link,{to:"/collection"},"Arrange a different collection")))))}return null};EE.defaultProps={isFetching:!1,collectionStore:null,coordinates:null,deliveryStore:null,nextCollectionSlot:null,nextDeliverySlot:null,postcode:null};var gE=EE;var vE=Object(E.b)(e=>({isFetching:on(e),collectionStore:ve(e),coordinates:Ee(e),deliveryStore:ge(e),nextCollectionSlot:un(e),nextDeliverySlot:dn(e),postcode:be(e)}),e=>({onClickCollection:({store:t,slot:{id:a,date:r}})=>{e(ao()),e(uo(t)),e(dm(a,r))},onRefreshSlots:({storeId:t,coordinates:a})=>e(mm({storeId:t,coordinates:a}))}))(gE),OE=a(311),wE=a.n(OE);a(636);const kE=({error:e,isFetching:t,label:a,onClickSetPostcode:r})=>f.a.createElement("div",{className:"shop-from-a-store-near-you-container"},f.a.createElement(Me,{error:e,isFetching:t,label:a,onSubmitPostcode:r,placeholder:"Enter a postcode"}));kE.defaultProps={error:null,label:"Shop from a store near you"};var jE=kE;var _E=Object(E.b)(e=>({isFetching:he(e),error:ye(e)}),e=>({onClickSetPostcode:t=>e(ue(t))}))(Object(ea.o)(jE));a(637);var SE=()=>f.a.createElement("div",{className:"hero","data-theme":"hero"},f.a.createElement("img",{src:wE.a,alt:"Co-op Food Hero",className:"hero--img"}),f.a.createElement("div",{className:"container"},f.a.createElement("h1",{className:"hero__title"},f.a.createElement("span",null,"On-demand groceries")),f.a.createElement("div",{className:"hero__content"},f.a.createElement("div",{className:"hero__checklist"},f.a.createElement("ul",null,f.a.createElement("li",null,"Delivery in as little as 2 hours"),f.a.createElement("li",null,"Picked with care by our store team"),f.a.createElement("li",null,"Collection or delivery for free")),f.a.createElement("p",{className:"hero__cta"},f.a.createElement(aE.HashLink,{to:"#how-it-works"},"How it works"))),f.a.createElement(_E,{label:"See next available slot"}))));a(638);var CE=()=>f.a.createElement("section",{className:"container how-it-works"},f.a.createElement("h2",{id:"how-it-works",className:"u-anchor"},"How it works"),f.a.createElement("ol",null,f.a.createElement("li",null,f.a.createElement("h3",null,"Select a free delivery or collection slot that suits you.")),f.a.createElement("li",null,f.a.createElement("h3",null,"Fill your basket with our wide range of products from your local store. You need to spend a minimum of \xa315.")),f.a.createElement("li",null,f.a.createElement("h3",null,"We\u2019ll pack your shopping for you.")),f.a.createElement("li",null,f.a.createElement("h3",null,"Track and keep up to date with your order."))),f.a.createElement("p",null,f.a.createElement(g.Link,{to:"/terms-of-service"},"See our terms of service")," for full details."));function xE(e){const t=Object(E.c)(),a=fo().changed,r=Object(h.useCallback)(()=>t(Jr(e)),[t,e]);Object(h.useEffect)(()=>{r()},[a])}const NE=["5000128104524","5053827209205","5010044000121","8717163619353","5000128744836","8712100712319","5000128725477","5000128583534","5000128894661","5010115926404","5000128943710","5000128932479","7613036077514","5051594002692"],TE=["5000128746779","50457656","5000128042369","5000128715140","5000128812238","5000128653572","6003770007099","5000128929523","8712566328352","5449000004451","5000128966245","5000128739160","5010262070074","5000128794312","5053990138753","5000128710572","5000128983167","8719200086050"],IE=["5000128895545","5038862302500","5000289110600","5449000133373","5021812000656","5000128789936","7613032807566","5000147030156","5000128430791","5000193900861","5035766062523","8002270018213","5730800925016","8712000050115","5000128994118"],AE=({theme:e})=>{const t=NE,a=TE,r=IE,n=Object(E.d)(Ga(t)),o=Object(E.d)(Ga(a)),c=Object(E.d)(Ga(r));xE([...t,...a,...r]);const s=[{title:"Essentials #stayathome",products:n},{title:"Get ready for summer",products:o},{title:"Refresh yourself",products:c}];return f.a.createElement("section",{"data-theme":e},f.a.createElement("div",{className:"product-group"},f.a.createElement("h2",{className:"product-group--title"},"Featured Products"),s.map(({title:e,products:t})=>f.a.createElement("div",{key:e},f.a.createElement("h3",{className:"product-group--subtitle"},e),f.a.createElement(Vl,{products:t})))))};AE.defaultProps={theme:"default"};var RE=AE;a(639);const PE=({children:e,theme:t,title:a,content:r})=>f.a.createElement("div",{className:"content-card","data-theme":t},f.a.createElement("header",null,f.a.createElement(Nt,{className:"content-card--squircle",width:"100",height:"100"}),f.a.createElement("div",{className:"content-card--content"},f.a.createElement("h3",{className:"content-card--heading"},a),f.a.createElement("p",{className:"content-card--label",dangerouslySetInnerHTML:{__html:r}}))),e);PE.defaultProps={children:null};var FE=PE,LE=a(312),DE=a.n(LE),BE=a(313),ME=a.n(BE);a(640);var UE=()=>f.a.createElement("section",{className:"container reasons-to-shop"},f.a.createElement("h2",null,"Reasons to shop with us"),f.a.createElement("ul",null,f.a.createElement("li",null,f.a.createElement(FE,{theme:"perk-card",title:"Membership",content:"Earn rewards <br /> for you and your <br /> community"})),f.a.createElement("li",null,f.a.createElement(FE,{theme:"feature-card",title:"100% British",content:"We support British farming and the amazing local food producers across the UK"},f.a.createElement("img",{src:DE.a,alt:"100% British"}))),f.a.createElement("li",null,f.a.createElement(FE,{theme:"feature-card",title:"Fairtrade",content:"We support ethical trading and believe everyone involved in supplying our products should be treated fairly"},f.a.createElement("img",{src:ME.a,alt:"Fairtrade"})))));var HE=()=>{const e=["5449000000439","5000128729475","7613036077514","8711327373105","5000127533196","5000128922296","7613036243452","5000295142893","8410302106300","5019503002157","5000328376165","5000128644013","5012035950040","5000128969314","5000184321064"],t=Object(E.d)(Ga(e));return xE(e),f.a.createElement(Jl,{theme:"linen",title:"Sponsored products",products:t})};const VE=({orderFulfilment:e,storeId:t})=>{const a=e.reservedSlot;if(Object(v.isNil)(a)&&Object(v.isNil)(t))return f.a.createElement(vE,null);const r=e.fulfilmentType,n=e.selectedAddress;return f.a.createElement(Jt,{theme:"default"},f.a.createElement(Gs,{fulfilmentType:r,reservedSlot:a,selectedAddress:n}))};VE.defaultProps={orderFulfilment:{},storeId:null};const qE=({orderFulfilment:e,postcode:t,storeId:a})=>{const r=ho(t);return Object(h.useEffect)(()=>{null!==t&&r!==t&&window.scrollTo(0,0)},[r,t]),f.a.createElement(f.a.Fragment,null,f.a.createElement(Pt,null),t||a?f.a.createElement(VE,{orderFulfilment:e,storeId:a}):f.a.createElement(SE,null),f.a.createElement(hh,{page:gu.homepage}),f.a.createElement(RE,{theme:"default"}),f.a.createElement(HE,null),f.a.createElement(CE,null),f.a.createElement(UE,null))};qE.defaultProps={orderFulfilment:{},postcode:null,storeId:null};var GE=qE;var WE=Object(E.b)(()=>{const e=i.getOrderFulfilmentSelector();return t=>({categories:iE()(t.categories.items).filter(e=>e.subcategories.length),error:Object(D.a)({},m.getMajorErrorSelector()(t))||null,isFetching:Ea(t),orderFulfilment:e(t),postcode:be(t),storeId:pn(t)})})(GE);const zE=({withoutLink:e})=>f.a.createElement("header",{className:"header"},f.a.createElement("div",{className:"container header--container"},e?f.a.createElement("div",{className:"header--logo"},f.a.createElement(nt,{key:"coop-logo-svg",className:"header--logo--img",alt:"logo"})):f.a.createElement(g.Link,{to:"/",className:"header--logo"},f.a.createElement(nt,{key:"coop-logo-svg",className:"header--logo--img",alt:"logo"}))));zE.defaultProps={withoutLink:!1};var YE=zE;function KE(){return(KE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function QE(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ZE=f.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fillRule:"evenodd"});const JE=e=>{let t=e.svgRef,a=e.title,r=QE(e,["svgRef","title"]);return f.a.createElement("svg",KE({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),a?f.a.createElement("title",null,a):null,ZE)},XE=f.a.forwardRef((e,t)=>f.a.createElement(JE,KE({svgRef:t},e)));a.p;const $E=Object(ea.o)(({children:e,className:t,history:a,onClick:r=a.goBack})=>f.a.createElement("button",{className:"".concat(t),onClick:r,type:"button"},e));$E.defaultProps={onClick(){}},$E.propTypes={children:Pe.a.oneOfType([Pe.a.arrayOf(Pe.a.node),Pe.a.node]).isRequired,className:Pe.a.string,onClick:Pe.a.func},$E.defaultProps={className:"",onClick:null};var eg=$E;var tg=({history:e})=>{const t=Object(h.useState)(e.length),a=Object(ke.a)(t,2),r=a[0],n=a[1];return Object(h.useEffect)(()=>{const t=e.length;n(t-1)},[]),f.a.createElement("div",{className:"utility-header"},f.a.createElement("div",{className:"container utility-header--container"},f.a.createElement(g.Link,{to:"/",className:"utility-header--logo"},f.a.createElement(nt,{key:"coop-logo-svg",className:"utility-header--logo--img",alt:"logo"})),f.a.createElement(eg,{className:"utility-header--close",type:"button",onClick:()=>((e,t)=>{const a=e.length-t;e.go(-a)})(e,r)},f.a.createElement("span",{"data-testid":"close-popover",className:"utility-header--close--label"},"Close"),f.a.createElement(XE,{key:"remove-icon-svg",className:"utility-header--close--icon","data-testid":"close-page"}))))},ag=Object(ea.o)(tg);var rg=()=>{const e=Object(h.createRef)();return Object(h.useEffect)(()=>{(e=>{const t=document.createElement("script");t.id="#smartSurvey",document.body.appendChild(t);const a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="".concat("https:"===document.location.protocol?"https://":"http://","www.smartsurvey.co.uk/s/r/embed.aspx?i=725963&c=").concat(e),t.parentNode.insertBefore(a,t)})("872044")},[]),f.a.createElement("div",null,f.a.createElement("h2",null,"We\u2019d love to keep you updated with the latest offers and benefits from Co-op Food"),f.a.createElement("div",{id:"ss-embed-".concat("872044"),ref:e}))};a(641);const ng=(e,t)=>V(e)?"Collection ".concat(t):"Delivery ".concat(t),og=({address:e,customerEmail:t,fulfilmentType:a,visibleId:r,slot:n,totalBreakdown:o,products:c})=>(function(){const e=Object(E.c)(),t=ls({basket:Object(E.d)(Cs),offers:Object(E.d)(xs)}),a=Object(E.d)(Ns);Object(h.useEffect)(()=>{e($c({products:t,step:Rs,revenue:a}))},[])}(),f.a.createElement("div",{className:"container"},f.a.createElement("div",{className:"order-complete--header"},f.a.createElement(qy,{message:"Payment successful"}),f.a.createElement("h1",null,"Order placed"),f.a.createElement("div",{"data-testid":"order-details"},f.a.createElement("div",{className:"order-complete--order-detail"},f.a.createElement("div",{className:"f6 form-hint"},"Order number"),f.a.createElement("p",null,r)),f.a.createElement("div",{className:"order-complete--order-detail"},f.a.createElement("div",{className:"f6 form-hint"},ng(a,"address")),f.a.createElement("p",null,e)),f.a.createElement("div",{className:"order-complete--order-detail"},f.a.createElement("div",{className:"f6 form-hint"},ng(a,"time")),f.a.createElement("p",null,Vs(n)))),f.a.createElement(ni,Object.assign({isCollection:V(a)},o)),f.a.createElement("p",{className:"f6"},"You may notice on your bank account a different \u2018pending transaction\u2019 amount to your order total. This is because we pre-authorise an extra 10% of your order in case of any substitutions. You will only be charged for the products you receive.")),f.a.createElement("div",{className:"order-complete--items-ordered"},f.a.createElement("h3",{className:"infoblock-header"},"Items ordered"),f.a.createElement("div",{className:"infoblock-content"},c.map(e=>f.a.createElement(Ge,Object.assign({key:e.id},e)))),f.a.createElement("h3",{className:"infoblock-header"},"What happens next"),f.a.createElement("div",{className:"infoblock-content"},f.a.createElement("p",null,"We have sent your order confirmation to ",t," but if you don't receive it within two minutes, please check your spam folder."),f.a.createElement("p",null,"We will keep you updated with the progress of your order.")),f.a.createElement(rg,null))));var cg=()=>{const e=Object(E.d)(_s),t=e.basket,a=e.order,r=a.address,n=a.customerEmail,o=a.fulfilmentType,c=a.totalBreakdown,s=a.visibleId,l=e.slot,i=Object(E.d)(Ss),u=Object(E.d)(Vf);return u&&!i?null:u||i?f.a.createElement(og,{address:r,customerEmail:n,fulfilmentType:o,products:t,slot:l,totalBreakdown:c,visibleId:s}):f.a.createElement(ea.c,{to:"/basket"})};a(642);const sg=({content:e,onClick:t,fulfilmentType:a})=>f.a.createElement("button",{type:"button",className:t?"infoblock-edit":"infoblock",onClick:t,"data-testid":"change-address-button"},f.a.createElement("span",{className:"infoblock--content"},e||"Select a ".concat(a," address")),t?f.a.createElement("span",{className:"infoblock--cta"},"Change"):null);sg.defaultProps={content:null,onClick:null};var lg=sg;var ig=function(e,t){return Object(v.flow)(Object(v.flatMap)(e=>e),Object(v.find)(["id",e]))(t)};const ug=({children:e,className:t})=>f.a.createElement("div",{className:"skeleton ".concat(t)},e);ug.defaultProps={className:""};var dg=ug;const mg=({className:e,children:t})=>f.a.createElement("div",{className:"skeleton--box ".concat(e)},t);mg.defaultProps={className:"",children:null};var pg=mg;const hg=()=>f.a.createElement(pg,{className:"flex"},f.a.createElement(Pl,{className:"w1 h1 mr2 circle"}),f.a.createElement(Pl,{className:"w-33 h1"})),fg=()=>f.a.createElement("div",{className:"mv1"},f.a.createElement(Pl,{className:"w-30 h1 mt4 mb3"}),f.a.createElement(dg,{className:"mv2 br2 overflow-hidden"},f.a.createElement(hg,null),f.a.createElement(hg,null),f.a.createElement(hg,null))),bg=()=>f.a.createElement("div",null,f.a.createElement(fg,null),f.a.createElement(fg,null));a(643);var yg=({deliveryPrice:e})=>{return f.a.createElement("span",{className:"slot-price--container"},f.a.createElement("span",{className:"slot-price"},0===e?"Free":(t=e)%1===0?new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):Y(t)));var t};var Eg=({id:e,startsAt:t,endsAt:a,date:r,deliveryPrice:n,isSelected:o,selectSlot:c})=>f.a.createElement(h.Fragment,{key:"div-".concat(e)},f.a.createElement("label",{key:"label-".concat(e),htmlFor:"".concat(e),className:"form-item".concat(o?" active":"")},f.a.createElement("input",{"data-testid":"slot",key:"input-".concat(e),name:"slot",className:"form-radio-input",type:"radio",id:e,alt:t,value:e,defaultChecked:o,onChange:()=>c(e,r)}),Us(Hs(r,t))," to ",Us(Hs(r,a)),ra("REACT_APP_FLAG_DISPLAY_SLOT_COST")&&f.a.createElement(yg,{deliveryPrice:n})));a(644);class gg extends h.Component{constructor(e){super(e);const t=this.props.reservedSlot;this.state={selected:t},this.selectSlot=this.selectSlot.bind(this)}componentDidMount(){const e=this.props,t=e.storeId,a=e.coordinates;(0,e.refreshSlots)({storeId:t,coordinates:a})}selectSlot(e){this.setState({selected:e})}render(){if(this.props.isFetchingSlots)return f.a.createElement(bg,null);const e=this.props,t=e.availableSlots,a=e.confirmSlot,r=e.fulfilmentType,n=e.history,o=this.state.selected,c=!Object(v.isNil)(o);return Object(v.isEmpty)(t)?f.a.createElement(mE,null):f.a.createElement("div",{className:"slot-picker","data-testid":"slot-picker"},Object.entries(t).map(([e,t])=>f.a.createElement(h.Fragment,{key:"div-".concat(e)},f.a.createElement("h3",{className:"section-title",key:"title-".concat(e)},Ms(Object(ys.a)(e))),f.a.createElement("div",{className:"slot-picker--list",key:"list-".concat(e)},t.map(e=>f.a.createElement(Eg,Object.assign({key:e.id},e,{isSelected:o===e.id,selectSlot:this.selectSlot})))))),c?f.a.createElement("div",{className:"slot-picker--confirm"},f.a.createElement(eg,{className:"btn btn--full btn--primary",onClick:()=>{const e=ig(o,t),r=e.id,c=e.date;a(r,c),n.goBack()}},"Confirm ".concat(r))):null)}}gg.defaultProps={availableSlots:null,coordinates:null,reservedSlot:null,storeId:null};var vg=gg;a(645);const Og=({switchTypeFn:e,switchTypeLabel:t})=>f.a.createElement("button",{type:"button",onClick:e,className:"infoblock-click"},"Arrange a ",t," instead"),wg=e=>{let t=e.confirmSlot,a=e.fulfilmentType,r=e.reservedSlot,n=e.selectedAddress,o=e.setChangeAddress,c=e.switchTypeProps,s=Object(ol.a)(e,["confirmSlot","fulfilmentType","reservedSlot","selectedAddress","setChangeAddress","switchTypeProps"]);const l=c.availableSlotsForOtherType,i=c.switchTypeFn,u=c.switchTypeLabel;return f.a.createElement(f.a.Fragment,null,f.a.createElement(tl,{title:"Arrange a ".concat(a)}),f.a.createElement("div",{className:"slot-selection"},f.a.createElement("div",{className:"slot-selection--address"},f.a.createElement("h2",{className:"section-title"},Object(v.capitalize)(a)," address"),f.a.createElement(lg,{content:n.displayName,onClick:()=>o(!0),fulfilmentType:a})),l&&f.a.createElement("div",{className:"slot-selection--switch"},f.a.createElement(Og,{switchTypeFn:i,switchTypeLabel:u})),f.a.createElement("h2",{className:"section-title"},"Time slot"),f.a.createElement(vg,Object.assign({confirmSlot:t,fulfilmentType:a,reservedSlot:r},s))))};wg.defaultProps={fulfilmentType:null,reservedSlot:null,selectedAddress:null};var kg=wg;const jg=({addressLookupComponent:e,availableSlots:t,confirmSlot:a,coordinates:r,fulfilmentType:n,error:o,isFetching:c,isFetchingSlots:s,postcode:l,refreshSlots:i,reservedSlot:u,selectedAddress:d,storeId:m,switchTypeProps:p})=>{const b=Object(h.useState)(!1),y=Object(ke.a)(b,2),E=y[0],g=y[1],v=Object(ea.k)();return f.a.createElement(Jt,{fillParentContainer:!0,theme:"default"},f.a.createElement("div",{className:"order-fulfilment"},f.a.createElement("div",{"data-testid":"order-fulfilment"},!d||E?f.a.createElement(e,{error:o,isFetching:c,postcode:l,selectedAddress:d,setChangeAddress:g,storeId:m}):f.a.createElement(kg,{availableSlots:t,confirmSlot:a,coordinates:r,fulfilmentType:n,history:v,isFetchingSlots:s,refreshSlots:i,reservedSlot:u,selectedAddress:d,setChangeAddress:g,switchTypeProps:p}))))},_g=({availableSlots:e,addressLookupComponent:t,fulfilmentType:a,storeId:r})=>{const n=Object(E.d)((o=a,e=>{const t=sn(e),a=ln(e);return"delivery"===o?!Object(v.isEmpty)(t):!Object(v.isEmpty)(a)}));var o;const c=Object(E.d)(x),s=Object(E.d)(_),l=Object(E.d)(on),i=Object(E.d)(fn),u=Object(E.d)(jn),d=Object(E.d)(T),m=Object(E.d)(N),p=Object(ea.k)(),h=Object(E.c)();return f.a.createElement(jg,{availableSlots:e,addressLookupComponent:t,confirmSlot:(e,t)=>h(dm(e,t)),coordinates:d,fulfilmentType:a,error:c,isFetching:s,isFetchingSlots:l,postcode:m,refreshSlots:()=>h(mm({storeId:r,coordinates:d})),reservedSlot:i,selectedAddress:u,storeId:r,switchTypeProps:(e=>{const t={collection:{action:ro,label:"delivery",url:"delivery"},delivery:{action:ao,label:"free ".concat("collection"),url:"collection"}}[e],a=t.action,r=t.label,o=t.url;return{availableSlotsForOtherType:n,switchTypeFn:()=>{h(a()),p.replace(o)},switchTypeLabel:r}})(a)})};_g.defaultProps={availableSlots:null,fulfilmentType:null,storeId:null};var Sg=_g;a(646);var Cg=({name:e,distance:t,formattedAddress:a,onClick:r})=>f.a.createElement("button",{className:"store-location-card",onClick:r,type:"button"},f.a.createElement("div",{className:"store-location-card--top"},f.a.createElement("h4",{className:"store-location-card--name"},e),f.a.createElement("span",{className:"store-location-card--distance"},"".concat((t/1609.344).toFixed(2)," miles"))),f.a.createElement("address",{className:"store-location-card--address"},a));const xg=({error:e,isFetching:t,onSelectStore:a,onSubmitPostcode:r,postcode:n,setChangeAddress:o,stores:c})=>{const s=!sl()(c);return f.a.createElement("div",{className:"order-fulfilment"},f.a.createElement("div",{className:"container"},f.a.createElement(tl,{title:"Choose a store for collection"}),f.a.createElement(Me,{btnClassName:"btn btn--secondary form-button",btnContent:"Find store",error:e,initialPostcode:n,isFetching:t,label:"Enter a postcode",onSubmitPostcode:e=>r(e)}),s?f.a.createElement("div",{className:"card-list",role:"listbox","data-testid":"address-list"},c.map(e=>f.a.createElement(Cg,Object.assign({key:e.id,onClick:()=>{a(e),o(!1)}},e)))):null))};xg.defaultProps={error:null,onSubmitPostcode:()=>null,onSelectStore:()=>null,postcode:"",setChangeAddress:()=>null,stores:[]};const Ng=({error:e,isFetching:t,postcode:a,setChangeAddress:r})=>{const n=Object(E.d)(e=>e.addresses.collectionStores),o=Object(E.c)();return f.a.createElement(xg,{error:e,isFetching:t,onSubmitPostcode:e=>o((e=>({type:"address/GET_COLLECTION_STORES",payload:{postcode:e}}))(e)),onSelectStore:({id:e,name:t})=>{o(uo({id:e,name:t})),o({type:"address/CLEAR_COLLECTION_STORES"})},postcode:a,setChangeAddress:r,stores:n})};Ng.defaultProps={error:null,postcode:"",setChangeAddress:()=>null};var Tg=Object(E.b)(e=>({addressLookupComponent:Ng,availableSlots:sn(e),fulfilmentType:"collection",storeId:hn(e)}),null)(Sg);const Ig=({options:e,onClick:t})=>sl()(e)?null:f.a.createElement("div",{className:"card-list",role:"listbox","data-testid":"address-list"},e.map((e,a)=>f.a.createElement("button",{key:e.displayName,type:"button",role:"option","aria-selected":"false",className:"options-list--row","data-testid":"address-choice-".concat(a),"data-address":e.displayName,onClick:()=>{t(e)}},e.displayName)));Ig.defaultProps={options:[]};var Ag=Ig;const Rg=({storeId:e,error:t,isFetching:a,postcode:r,setChangeAddress:n})=>{const o=Object(E.c)(),c=Object(E.d)(I),s=Object(h.useState)(r||""),l=Object(ke.a)(s,2),i=l[0],u=l[1],d=Object(h.useState)(!1),m=Object(ke.a)(d,2),p=m[0],b=m[1];return Object(h.useEffect)(()=>{if(!p){const e=c&&c.length;e!==p&&b(e)}p&&!c&&n(!1)},[p,c,n]),f.a.createElement(f.a.Fragment,null,f.a.createElement(tl,{title:"Where should we deliver to?"}),f.a.createElement("form",{className:"address-lookup",onSubmit:e=>{e.preventDefault(),o((e=>({type:"address/SEARCH_FOR_ADDRESS",payload:{postcode:e}}))(i))}},f.a.createElement("div",{className:"form-item address-input",role:"combobox","aria-controls":"address-menu","aria-expanded":"true"},f.a.createElement("label",{htmlFor:"postcode",className:"form-label"},"Enter a postcode"),f.a.createElement("div",{className:"form-item-search"},f.a.createElement("span",{className:"form-item-search--input"},f.a.createElement("input",{className:"form-input",type:"text",id:"postcode","data-testid":"postcode-input",minLength:2,value:i,onChange:e=>{const t=e.target.value;u(t)},"aria-autocomplete":"list",placeholder:"M60 0AG"})),f.a.createElement("button",{className:"btn btn--secondary address-lookup__button",type:"submit",disabled:""===i},a?f.a.createElement(f.a.Fragment,null,f.a.createElement(Ae,null)," Looking..."):"Find address"))),f.a.createElement(De,{error:t})),f.a.createElement(Ag,{options:c,onClick:({link:t})=>(t=>{o(no({storeId:e,link:t}))})(t)}))};Rg.defaultProps={storeId:null,error:null,isFetching:!1,postcode:null};var Pg=Rg;var Fg=Object(E.b)(e=>({addressLookupComponent:Pg,availableSlots:ln(e),fulfilmentType:"delivery",storeId:A(e)}),null)(Sg);const Lg=({onClickAddress:e,options:t})=>{const a=Object(h.useState)(!1),r=Object(ke.a)(a,2),n=r[0],o=r[1],c=Object(h.useState)(!1),s=Object(ke.a)(c,2),l=s[0],i=s[1];return Object(h.useEffect)(()=>{!l&&t&&i(!0),l&&!t&&o(!0)},[l,t]),f.a.createElement(Jt,{fillParentContainer:!0,theme:"default"},f.a.createElement(f.a.Fragment,null,(e=>e?f.a.createElement(ea.c,{to:"/"}):null)(n),f.a.createElement(tl,{title:"Confirm address"}),f.a.createElement(Ag,{options:t,onClick:t=>e(t)})))};Lg.defaultProps={onClickAddress:()=>null,options:[]};const Dg=()=>{const e=Object(ea.m)(),t=e.date,a=e.slotId,r=Object(E.d)(be),n=Object(E.d)(ge),o=Object(E.d)((({id:e,date:t})=>a=>Object(v.flow)(ln,Object(v.getOr)([],t),Object(v.find)(["id",e]),Object(v.negate)(v.isNil))(a))({date:t,id:a})),c=Object(E.d)(I),s=Object(E.c)();if(Object(h.useEffect)(()=>{r&&s((e=>({type:"address/GET_ADDRESS_LIST",payload:{postcode:e}}))(r))},[r]),!(({postcode:e,store:t,validSlot:a})=>!(!e||!t||!a))({postcode:r,store:n,validSlot:o}))return f.a.createElement(ea.c,{to:"/"});return f.a.createElement(Lg,{onClickAddress:e=>{const r=e.link,o=n.id;s(no({link:r,storeId:o,slot:{slotId:a,date:t}}))},options:c})};a(647);var Bg=({location:e})=>f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{"data-testid":"page-error",className:"page-error"},f.a.createElement("h1",{className:"page-error--title"},"Page Not Found"),f.a.createElement("p",null,e.pathname),f.a.createElement("div",{className:"page-error--content"},f.a.createElement("p",null,"We\u2019re sorry, but we could not find the page you were looking for.")),f.a.createElement("div",{className:"page-error--footer"},f.a.createElement(g.Link,{to:"/",className:"btn btn--primary","data-testid":"homepage-link"},"Back to homepage"))));function Mg(){return(Mg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Ug(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Hg=f.a.createElement("path",{d:"m0 0h131.39v86.9h-131.39z",fill:"#fff",opacity:0}),Vg=f.a.createElement("path",{d:"m48.37 15.14h34.66v56.61h-34.66z",fill:"#ff5f00"}),qg=f.a.createElement("path",{d:"m51.94 43.45a35.94 35.94 0 0 1 13.75-28.3 36 36 0 1 0 0 56.61 35.94 35.94 0 0 1 -13.75-28.31z",fill:"#eb001b"}),Gg=f.a.createElement("g",{fill:"#f79e1b"},f.a.createElement("path",{d:"m120.5 65.76v-1.16h.5v-.24h-1.19v.24h.47v1.16zm2.31 0v-1.4h-.36l-.42 1-.42-1h-.36v1.4h.26v-1.06l.39.91h.27l.39-.91v1.06z"}),f.a.createElement("path",{d:"m123.94 43.45a36 36 0 0 1 -58.25 28.3 36 36 0 0 0 0-56.61 36 36 0 0 1 58.25 28.3z"}));const Wg=e=>{let t=e.svgRef,a=e.title,r=Ug(e,["svgRef","title"]);return f.a.createElement("svg",Mg({viewBox:"0 0 131.39 86.9",ref:t},r),a?f.a.createElement("title",null,a):null,Hg,Vg,qg,Gg)},zg=f.a.forwardRef((e,t)=>f.a.createElement(Wg,Mg({svgRef:t},e)));a.p;function Yg(){return(Yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Kg(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Qg=f.a.createElement("path",{d:"m51.432 22.448h-3.594s.365-.963 1.719-4.661c-.027.026.365-.964.573-1.589l.312 1.432c.806 3.985.99 4.818.99 4.818zm-37.604-1.693-1.51-7.682c-.208-1.068-1.015-1.406-1.953-1.406h-6.98l-.052.338c4.792 1.223 8.724 3.828 10.495 8.75zm4.662-9.088-4.218 11.406-.444-2.318c-.911-2.422-3.125-4.662-5.625-5.677l3.515 13.282h4.557l6.797-16.693h-4.584zm3.62 16.718h4.323l2.709-16.718h-4.324zm20-16.302c-.86-.338-2.213-.703-3.88-.703-4.27 0-7.265 2.265-7.292 5.522-.026 2.395 2.135 3.723 3.777 4.531 1.693.807 2.24 1.354 2.24 2.084 0 1.12-1.353 1.615-2.578 1.615-1.745 0-2.682-.209-4.064-.86l-.573-.287-.598 3.75c1.015.468 2.865.885 4.818.885 4.532.027 7.473-2.24 7.527-5.703 0-1.902-1.172-3.334-3.647-4.532-1.51-.755-2.422-1.302-2.422-2.083 0-.704.782-1.432 2.474-1.432 1.406-.027 2.448.26 3.228.625l.39.208zm11.067-.416h-3.334c-1.041 0-1.823.311-2.265 1.406l-6.406 15.314h4.531c.73-2.057.912-2.5.912-2.5h5.522s.13.573.521 2.5h4.01zm6.823-8.334v33.334c0 1.823-1.51 3.333-3.333 3.333h-53.334c-1.823 0-3.333-1.51-3.333-3.333v-33.334c0-1.823 1.51-3.333 3.333-3.333h53.334c1.823 0 3.333 1.51 3.333 3.333z",fill:"#3957a7"});const Zg=e=>{let t=e.svgRef,a=e.title,r=Kg(e,["svgRef","title"]);return f.a.createElement("svg",Yg({viewBox:"0 0 60 40",ref:t},r),a?f.a.createElement("title",null,a):null,Qg)},Jg=f.a.forwardRef((e,t)=>f.a.createElement(Zg,Yg({svgRef:t},e)));a.p,a(296);function Xg(e){const t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,document.body.appendChild(t)}var $g=({actionUrl:e,checkoutUrl:t,orderTotal:a})=>(wy(t,Xg,a),f.a.createElement("form",{action:e,className:"paymentWidgets","data-brands":"VISA MASTER"}));const ev=({canAccessPaymentPage:e,isFetching:t,failedDueToSlotExpiry:a,checkoutUrl:r,orderTotal:n})=>(Ps({step:As,revenueSelector:js}),t?f.a.createElement("div",{className:"payment"},f.a.createElement("p",null,"Loading...")):a?f.a.createElement(ea.c,{to:"/checkout"}):e?f.a.createElement("div",{className:"payment"},f.a.createElement("header",{className:"payment-header"},f.a.createElement($s,{location:"/checkout",label:"View order summary"}),f.a.createElement("h1",{className:"page-title"},"Payment")),f.a.createElement("section",{className:"payment-details"},f.a.createElement("div",{className:"payment-details--brands"},f.a.createElement("h2",{className:"payment-details--subtitle"},"Pay by card"),f.a.createElement("ul",{className:"card-brands"},f.a.createElement("li",null,f.a.createElement(Jg,{width:"40",className:"card-brands-icon"})),f.a.createElement("li",null,f.a.createElement(zg,{width:"40",className:"card-brands-icon"})))),f.a.createElement($g,{actionUrl:"".concat(window.location.protocol,"//").concat(window.location.host,"/payment-status"),checkoutUrl:r,orderTotal:n}))):f.a.createElement(ea.c,{to:"/basket"}));ev.defaultProps={checkoutUrl:null};var tv=ev;var av=Object(E.b)(e=>{const t=vs(e),a=t.isFetching,r=t.confirmedPrice,n=t.checkoutUrl;return{canAccessPaymentPage:zf(e),isFetching:a,orderTotal:Y(r),checkoutUrl:n,error:m.getMajorErrorSelector()({messages:mb(e)})||null,failedDueToSlotExpiry:vy(e)}},e=>({removeMessageById:t=>e(n.removeMessageById(t))}))(tv);a(648);const rv=({resolution:e,id:t,removeMessageById:a,history:r})=>{const n=({routerAction:r})=>f.a.createElement("button",{type:"button",className:"btn btn--primary btn--full",onClick:()=>{a(t),r&&r()}},e.label);switch(n.defaultProps={routerAction:null},e.type){case bm:return f.a.createElement(n,{routerAction:()=>r.push(e.url)});case ym:default:return f.a.createElement(n,null)}};rv.defaultProps={id:null,removeMessageById:()=>null,resolution:void 0};var nv=Object(ea.o)(rv);const ov=e=>{let t=e.title,a=e.content,r=Object(ol.a)(e,["title","content"]);return f.a.createElement("div",{className:"error-page","data-testid":"app-error"},f.a.createElement("header",{className:"error-page--header"},f.a.createElement("h1",{className:"error-page--title"},t),f.a.createElement("div",{className:"error-page--message"},a),sl()(r.resolution)?null:f.a.createElement("div",{className:"error-page--action"},f.a.createElement(nv,r))))},cv=e=>{let t=e.className,a=Object(ol.a)(e,["className"]);return f.a.createElement("div",{className:t},f.a.createElement(YE,null),f.a.createElement(ov,a))};cv.defaultProps={className:void 0};var sv=cv;const lv=3e3,iv=15e3,uv=["Payment processing, please wait...","We are still processing your payment, this may take up to 30 seconds.","Sorry, we are still working on getting your payment processed.","Sorry, it's taking longer than expected."],dv=()=>f.a.createElement(ov,{title:"Sorry, something went wrong",content:"Please contact your bank for more details or try using a different card.",resolution:{label:"Back to checkout",type:bm,url:"/checkout"}});var mv=()=>{const e=Object(h.useState)(0),t=Object(ke.a)(e,2),a=t[0],r=t[1],n=Object(h.useState)(lv),o=Object(ke.a)(n,2),c=o[0],s=o[1],l=Object(E.d)(Wf),i=Object(E.d)(Vf),u=Object(E.d)(qf);!function(){const e=Object(E.c)(),t=Object(E.d)(Wf);Object(h.useEffect)(()=>{t&&e({type:"payment/FINALIZE_ORDER"})},[])}(),Object(Cc.a)(()=>{l&&(a<uv.length-1&&r(e=>e+1),c===lv&&s(iv))},c);const d=()=>f.a.createElement("div",{className:"payment"},f.a.createElement("h1",null,"Payment"),f.a.createElement("div",{className:"payment-processing"},f.a.createElement(Ae,{stroke:"#122947",height:"70",width:"70"}),f.a.createElement("div",{className:"payment-processing--message"},uv[a]),a>0?f.a.createElement("div",{className:"payment-processing--message"},"Please do not close or refresh this page."):null));return i?f.a.createElement(ea.c,{to:"/order-complete"}):u?f.a.createElement(dv,null):l?f.a.createElement(d,null):f.a.createElement(ea.c,{to:"/basket"})};var pv=()=>f.a.createElement(sh,{identifier:"product"},f.a.createElement("div",{className:"container"},f.a.createElement(dg,{className:"pa2"},f.a.createElement(Pl,{className:"w-50 h1 mv3"}),f.a.createElement(Pl,{className:"w-100 h2 mt3 mb2"}),f.a.createElement(Pl,{className:"w-80 h2 mt2 mb3"}),f.a.createElement(Pl,{className:"w-25 h1 mt3 mb2"}),f.a.createElement(Pl,{className:"w-50 h1 mt2 mb3"}),f.a.createElement(Pl,{className:"img mt2 mb3"}),f.a.createElement(Pl,{className:"w-100 h1 mv2"}),f.a.createElement(Pl,{className:"w-80 h1 mv2"}),f.a.createElement(Pl,{className:"w-80 h1 mv3"}),f.a.createElement(Pl,{className:"w-100 h3 mv4"}))));const hv=({header:e,value:t})=>t?f.a.createElement("div",{className:"product-view--infoblock"},f.a.createElement("h3",{className:"infoblock-header"},e),f.a.createElement("p",null,t)):null;hv.defaultProps={value:null};var fv=hv;const bv=({allergen:{name:e,allergenPositions:t},index:a,numberOfIngredients:r})=>{const n=[];return t.forEach(({startAt:a,length:r},o)=>{const c=t[o-1],s=c?c.startAt+c.length:0;n.push(e.slice(s,a));const l=a+r,i=e.slice(a,l);n.push(f.a.createElement("span",{key:"".concat(i+a),className:"product-view--allergen"},i));const u=t[o+1]?a:e.length;n.push(e.slice(l,u))}),a!==r-1&&n.push(", "),n},yv=({ingredients:e,subtitle:t=null})=>!Object(v.isEmpty)(e)&&f.a.createElement("div",{className:"product-view--infoblock"},f.a.createElement("h3",{className:"infoblock-header"},"Ingredients"),f.a.createElement("div",{className:"infoblock-content"},e.map((t,a)=>Object(v.isEmpty)(t.allergenPositions)?"".concat(t.name).concat(a!==e.length-1?", ":""):f.a.createElement(bv,{key:"".concat(a,"_").concat(t.name),allergen:t,index:a,numberOfIngredients:e.length})),t?f.a.createElement("div",{className:"product-view--subtitle"},t):null));yv.defaultProps={subtitle:""};var Ev=yv;const gv={name:Pe.a.string,quantity:Pe.a.arrayOf(Pe.a.string)},vv=(Pe.a.shape({servingSize:Pe.a.string,nutrients:Pe.a.arrayOf(Pe.a.shape(gv))}),({name:e,quantity:t})=>f.a.createElement(f.a.Fragment,null,f.a.createElement("dt",{className:"infoblock-table--term"},e),f.a.createElement("dd",{className:"infoblock-table--definition"},t.join(" / ")))),Ov=({nutritionInfo:e})=>Object(v.map)(e=>(e=>!Object(v.isEmpty)(e)&&!Object(v.isEmpty)(e.nutrients))(e)?f.a.createElement("div",{className:"product-view--infoblock",key:e.servingSize},f.a.createElement("h3",{className:"infoblock-header"},"Nutritional values ".concat(e.servingSize)),f.a.createElement("dl",{className:"infoblock-table"},e.nutrients.map(({name:e,quantity:t})=>f.a.createElement(vv,{key:e,name:e,quantity:t})))):null,e);Ov.defaultProps={nutritionInfo:{servingSize:null,nutrients:[]}};var wv=Ov;a(649);const kv=e=>"You may be asked to show your ID to prove you are over ".concat(e," when receiving this product."),jv={1:"Sorry, you can\u2019t add more than 2 per order.",2:"You may be asked to show your ID when receiving this product.",RESTRICTED_TO_SELL_6:kv("6 years old"),RESTRICTED_TO_SELL_12:kv("12"),RESTRICTED_TO_SELL_16:kv("16"),RESTRICTED_TO_SELL_18:kv("18"),RESTRICTED_TO_SELL_21:kv("21")},_v=({restriction:e})=>e&&"UNRESTRICTED"!==e.code?f.a.createElement(Yt,null,(e=>jv[e.code]||e.defaultMessage)(e)):null;_v.defaultProps={restriction:null};var Sv=_v;a(650);const Cv=({promotions:e})=>f.a.createElement(f.a.Fragment,null,e.filter(Boolean).length>0&&f.a.createElement("footer",{className:"product-view--infoblock product-view--disclaimer"},f.a.createElement("h2",null,"Disclaimer"),f.a.createElement("p",null,"The Co-op take care in everything we do and have put this product information together to help you get a feel for the product and have tried to make sure everything is as accurate as possible. However food products are regularly improved, the product information, ingredients, nutritional guides and dietary or allergy advice may occasionally change. You should always read the product label before consumption and not rely solely on the information provided on the website."),f.a.createElement("p",null,"If you have any queries, or you'd like advice on any Co-op brand products, please contact Co-op Customer Services, or the product manufacturer if not a Co-op brand product."),f.a.createElement("p",null,"Although product information is regularly updated, Co-op is unable to accept liability for any incorrect information. This does not affect your statutory rights."),f.a.createElement("p",null,"For further information around promotional terms and conditions please visit"," ",f.a.createElement("a",{href:"https://food.coop.co.uk/deals/all"},"https://food.coop.co.uk/deals/all"))));Cv.defaultProps={promotions:[]};var xv=Cv;const Nv=({isAvailable:e,isFetching:t,product:a,quantity:r,changeBasketItemQuantity:n})=>{const o=Object(v.get)(["parentCategories","0"],a);return t?f.a.createElement(pv,null):!t&&a?f.a.createElement("div",{"data-testid":"product-details"},f.a.createElement(Qt,null),f.a.createElement("article",{className:"container product-view"},f.a.createElement("header",{className:"product-view--header"},a.parentCategories?f.a.createElement("div",{className:"product-view--controls"},f.a.createElement($s,{location:"/category/".concat(o),label:"Back"})):null,f.a.createElement("p",{className:"product-view--brand"},a.brand),f.a.createElement("h1",{className:"product-view--name"},a.name)),f.a.createElement("div",{className:"product-view--summary"},f.a.createElement("section",{className:"product-view--essentials"},Object(v.isEmpty)(a.tags)?null:f.a.createElement("div",{className:"product-view--tags"},a.tags.map(e=>f.a.createElement("span",{className:"pill pill-".concat(e.type),key:e.label},e.label)))),f.a.createElement("section",{className:"product-view--essentials"},f.a.createElement(gl,{promotion:a.promotions})),f.a.createElement(Ve,{images:a.images,withBackground:!0,alt:a.name,className:"db w-100"}),f.a.createElement("section",{className:"product-view--description"},f.a.createElement("p",null,a.description)),""!==a.promoText?f.a.createElement("section",{className:"product-view--promo"},f.a.createElement("p",null,a.promoText)):null,f.a.createElement("section",{className:"product-view--pricing"},f.a.createElement("span",{className:"product-view--price"},Y(a.price)),f.a.createElement("span",{className:"product-view--price-per-unit"},a.comparisonPriceText)),f.a.createElement("section",{className:"product-view--cta"},e?f.a.createElement(Tl,{id:a.id,quantity:r,gtin:a.gtin}):f.a.createElement("button",{disabled:!0,type:"submit",className:"btn btn--full"},"Product unavailable"))),f.a.createElement("section",{className:"product-view--info"},f.a.createElement(Sv,{restriction:a.restriction}),f.a.createElement("h2",null,"Product information"),f.a.createElement(Ev,{ingredients:a.ingredients,subtitle:a.allergenSubtitle}),a.allergens?f.a.createElement("section",{className:"product-view--notice"},f.a.createElement("div",{className:"product-view--notice-contents"},f.a.createElement("h4",{className:"notice--title"},"Allergens"),f.a.createElement("p",{className:"notice--content inline-array"},f.a.createElement("span",{className:"inline-array--label"},(e=>{const t=e,a=e.toLowerCase().indexOf("bold");if(-1===a)return t;const r=a+4,n=[];return n.push(t.slice(0,a)),n.push(f.a.createElement("b",{key:r},t.slice(a,r))),n.push(t.slice(r)),n})(a.allergens))))):null,f.a.createElement(fv,{header:"Dietary information",value:a.dietaryInfo}),f.a.createElement(fv,{header:"Alcohol by volume",value:a.alcoholByVolume}),f.a.createElement(wv,{nutritionInfo:a.nutritionInfo}),f.a.createElement(fv,{header:"Country of origin",value:a.country}),f.a.createElement(fv,{header:"Preparation and usage",value:a.usageInfo}),f.a.createElement(fv,{header:"Storage information",value:a.storageInfo}),f.a.createElement(fv,{header:"Packaging",value:a.packaging}),f.a.createElement(fv,{header:"Safety information",value:a.safetyInfo}),f.a.createElement(fv,{header:"Other information",value:a.otherInfo}),a.size?f.a.createElement(fv,{header:"Weight",value:"".concat(a.size," ").concat(a.sizeUnit)}):null,f.a.createElement(fv,{header:"Manufacturer",value:a.manufacturer}),f.a.createElement(xv,{promotions:a.promotions}))),Object(v.isEmpty)(a.relatedProducts)&&Object(v.isEmpty)(a.relatedCategories)?null:f.a.createElement("aside",{className:"wrapper--dark"},f.a.createElement("div",{className:"container container--padded"},Object(v.isEmpty)(a.relatedProducts)?null:f.a.createElement("section",{className:"product-view--related-products"},f.a.createElement("h2",null,"Similar products"),f.a.createElement(Vl,{products:a.relatedProducts,changeBasketItemQuantity:n})),Object(v.isEmpty)(a.relatedCategories)?null:f.a.createElement("section",{className:"product-view--related-categories"},f.a.createElement("h2",null,"Explore more"),f.a.createElement(yh,{categories:a.relatedCategories}))))):f.a.createElement(pv,null)};Nv.defaultProps=Object(D.a)({},{productsWithBasketQuantity:[],relatedCategories:[],tags:[],size:"",sizeUnit:""});var Tv=Nv;const Iv=(e,t)=>{if(t){const a=t.gtin;return Ra(e.basket.items,a)}return 0};class Av extends h.Component{componentDidMount(){const e=this.props,t=e.id;(0,e.loadDataForPage)(t)}componentDidUpdate(e){const t=w()(["match","params","id"]),a=t(e),r=t(this.props);if(a!==r){(0,this.props.loadDataForPage)(r)}return!0}render(){const e=this.props,t=e.changeBasketItemQuantity,a=e.error,r=e.isAvailable,n=e.isFetching,o=e.parentCategoryId,c=e.product,s=e.quantity;return sl()(a)?f.a.createElement(Tv,{changeBasketItemQuantity:t,isAvailable:r,isFetching:n,parentCategoryId:o,product:c,quantity:s}):f.a.createElement(sv,a)}}var Rv=Object(E.b)((e,t)=>{const a=w()(["match","params","id"],t),r=Ua(e,a);return{error:Object(D.a)({},m.getMajorErrorSelector()(e))||null,id:a,isAvailable:Ma(e,a),isFetching:La(e),product:r,parentCategoryId:e.categories.selected,quantity:Iv(e,r)}},e=>({loadDataForPage:t=>e(Qr(t)),changeBasketItemQuantity:(t,a)=>e(s.changeBasketQuantity(t,a))}))(Av);var Pv=()=>f.a.createElement("div",{className:"category-list","data-testid":"loading-category-list"},f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null),f.a.createElement(Fl,null));var Fv=({searchTerm:e,categories:t})=>f.a.createElement("div",{className:"search-results search-results--no-results"},f.a.createElement("div",{className:"container"},f.a.createElement("header",{className:"page--header"},f.a.createElement("h2",{className:"page--title"},"No products found for \u2018",e,"\u2019")),f.a.createElement("p",null,"Try a different search term or browse products by category instead:")),f.a.createElement("div",{className:"search-results--items"},f.a.createElement(yh,{categories:t})));const Lv=({searchTerm:e,loadMoreMatches:t,products:a,productCount:r,categories:n,allCategories:o})=>sl()(a)?f.a.createElement(Fv,{searchTerm:e,categories:!sl()(n)&&n||o}):f.a.createElement("div",{className:"search-results","data-testid":"search-results"},sl()(a)?null:f.a.createElement(f.a.Fragment,null,f.a.createElement(Qt,null),f.a.createElement("div",{className:"container"},f.a.createElement(tl,{title:"Results for \u2018".concat(e,"\u2019")})),f.a.createElement(fh,{searchTerm:e}),f.a.createElement(ql,{keyForProductCount:e,loadMore:t,productCount:r,products:a})),sl()(n)?null:f.a.createElement("div",{className:"search-results--categories"},f.a.createElement("div",{className:"container"},f.a.createElement("header",{className:"page--header"},f.a.createElement("h2",{className:"page--title"},"Related categories"))),f.a.createElement("div",{className:"search-results--items"},f.a.createElement(yh,{categories:n}))));Lv.defaultProps={products:[],categories:[]};var Dv=Lv;var Bv=()=>f.a.createElement("div",{className:"search-results search-results--default"},f.a.createElement("div",{className:"container"},f.a.createElement("header",{className:"page--header"},f.a.createElement("h2",{className:"page--title"},"Search for products")),f.a.createElement("p",null,"You can use the search input in the header to find products by:"),f.a.createElement("ul",null,f.a.createElement("li",null,"category, for example \u2018free from\u2019"),f.a.createElement("li",null,"generic product type, for example \u2018bread\u2019"),f.a.createElement("li",null,"specific products, for example \u2018Co-op whole bean Italian style Fairtrade coffee beans"))));a(651);class Mv extends h.Component{componentDidMount(){const e=this.props,t=e.location,a=e.searchTerm,r=e.searchAction,n=e.productSearch,o=new URLSearchParams(t.search).get("term");sl()(a)&&!sl()(o)&&r(o),sl()(o)||n(o)}componentDidUpdate(e){const t=this.props,a=t.productSearch,r=t.searchTerm,n=t.storeId,o=e.searchTerm!==r,c=e.storeId!==n;sl()(r)||!o&&!c||a(r)}render(){const e=this.props,t=e.allCategories,a=e.categories,r=e.isFetching,n=e.loadMoreMatches,o=e.productCount,c=e.products,s=e.searchTerm;return r?f.a.createElement(sh,null,f.a.createElement(ih,null),f.a.createElement(Pv,null)):f.a.createElement(f.a.Fragment,null,s?f.a.createElement(Dv,{searchTerm:s,loadMoreMatches:n,products:c,productCount:o,categories:a,allCategories:t}):f.a.createElement(Bv,null))}}Mv.defaultProps={searchTerm:"",products:[],productCount:0,categories:[]};var Uv=Mv;var Hv=Object(E.b)((e,t)=>{const a=xa(),r=c.productsMatchingSearchTerm(),n=a(e).categories,o=t.history.location;return{allCategories:_a(e),categories:n,errors:e.search.errors,isFetching:Sa(e)||Fa(e),location:o,productCount:c.productCount(r)(e),products:r(e),searchTerm:e.search.term,storeId:hn(e)}},e=>({searchAction:t=>e(p.search(t)),productSearch:t=>e(Hr({searchTerm:t}))}))(e=>{const t=e.searchTerm,a=qr({searchTerm:t});return f.a.createElement(Uv,Object.assign({loadMoreMatches:a},e))});Pe.a.string.isRequired,Pe.a.string,Pe.a.string,Pe.a.string.isRequired,Pe.a.shape({type:Pe.a.string.isRequired,label:Pe.a.string.isRequired,url:Pe.a.string});const Vv={removeMessageById:ht};var qv=Object(Sh.d)(Object(E.b)(({messages:e})=>({error:yb()({messages:e})}),Vv),e=>{const t=t=>{let a=t.error,r=Object(ol.a)(t,["error"]);return sl()(a)?f.a.createElement(e,r):f.a.createElement(sv,Object.assign({},a,r))};return t.defaultProps={error:void 0},t});let Gv=!1;function Wv(e){Object(h.useEffect)(()=>{ra("REACT_APP_FLAG_USER_FEEDBACK")&&(window.doorbellOptions={id:"10381",appKey:"dMwIbq9iUB2XCpV3PjFMnBwwtxMyovnGi1LXhtRgaR2P1kArWkTnyDk5SHNJ07Pc"},e?function(e,t){function a(){if(Gv)return;Gv=!0,window.doorbellOptions.windowLoaded=!0;const e=t.createElement("script");e.id="doorbellScript",e.type="text/javascript",e.async=!0,e.src="https://embed.doorbell.io/button/".concat(window.doorbellOptions.id,"?t=").concat((new Date).getTime()),(t.getElementsByTagName("head")[0]||t.getElementsByTagName("body")[0]).appendChild(e)}e.attachEvent?e.attachEvent("onload",a):e.addEventListener?e.addEventListener("load",a,!1):a(),"complete"===t.readyState&&a()}(window,document):function(){const e=document.getElementsByTagName("head")[0],t=e.querySelector("script#doorbellScript"),a=document.getElementsByTagName("body")[0],r=a.querySelector("script#doorbellScript");Gv=!1,t&&e.removeChild(t),r&&a.removeChild(r),[...document.querySelectorAll("[id^='doorbell']")].map(e=>e&&e.remove())}())},[])}a(652);const zv=({orderStoreId:e,postcode:t,orderFulfilment:a})=>f.a.createElement("div",{className:"container order-slot--wrapper"},t||e?f.a.createElement(zs,{fulfilmentType:a.fulfilmentType,reservedSlot:a.reservedSlot,selectedAddress:a.selectedAddress}):f.a.createElement(_E,null));zv.defaultProps={orderFulfilment:null,orderStoreId:null,postcode:null};const Yv=({orderFulfilment:e,orderStoreId:t,hasFulfilmentLinks:a,postcode:r})=>f.a.createElement(f.a.Fragment,null,f.a.createElement("footer",{className:"app-footer"},a?f.a.createElement(zv,{orderFulfilment:e,orderStoreId:t,postcode:r}):null,function(){const e=Object(ea.l)().pathname===Uo.home;return!na()&&e?f.a.createElement("div",{className:"container app-footer--links"},f.a.createElement(Wt,null,"If you\u2019re a customer who already had an account with us, you will no longer be able to sign into it. ",f.a.createElement(g.Link,{to:"/customer-accounts"},"Find out more"),".")):null}(),f.a.createElement("nav",{className:"container app-footer--links"},f.a.createElement("ul",{className:"app-footer--list"},f.a.createElement("li",{className:"app-footer--list-item"},f.a.createElement(g.Link,{to:"/contact"},"Contact customer support")),f.a.createElement("li",{className:"app-footer--list-item"},f.a.createElement(g.Link,{to:"/help/deliveries-collections-refunds"},"Find out about delivery and refunds")),f.a.createElement("li",{className:"app-footer--list-item"},f.a.createElement(g.Link,{to:"/terms-of-service"},"Terms of service")),f.a.createElement("li",{className:"app-footer--list-item"},f.a.createElement(Xt,{to:"https://www.coop.co.uk/terms/privacy-notice",text:"Privacy policy"})),f.a.createElement("li",{className:"app-footer--list-item"},f.a.createElement(Xt,{to:"https://www.coop.co.uk/product-information/product-recalls",text:"Product recalls"}))))));Yv.defaultProps={orderStoreId:null},Yv.defaultProps={hasFulfilmentLinks:!0,orderFulfilment:null,postcode:null};var Kv=Yv;var Qv=Object(E.b)(()=>{const e=i.getOrderFulfilmentSelector();return t=>({orderFulfilment:e(t),postcode:be(t),orderStoreId:pn(t)})})(Kv);function Zv(){return(Zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function Jv(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Xv=f.a.createElement("path",{d:"m322.032 188.616c6.504-6.432 17.016-6.432 23.472 0 6.48 6.432 6.528 16.824 0 23.256l-93.792 91.92c-6.48 6.432-16.968 6.432-23.496 0l-93.792-91.92c-6.48-6.408-6.48-16.824 0-23.256 6.504-6.432 17.016-6.432 23.472 0l82.104 75.384z"});const $v=e=>{let t=e.svgRef,a=e.title,r=Jv(e,["svgRef","title"]);return f.a.createElement("svg",Zv({height:24,viewBox:"0 0 480 480",width:24,ref:t},r),a?f.a.createElement("title",null,a):null,Xv)},eO=f.a.forwardRef((e,t)=>f.a.createElement($v,Zv({svgRef:t},e)));a.p;function tO(){return(tO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function aO(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var rO=f.a.createElement("path",{d:"m157.968 291.384c-6.504 6.432-17.016 6.432-23.472 0s-6.528-16.824 0-23.256l93.792-91.92c6.48-6.432 16.968-6.432 23.496 0l93.792 91.92c6.48 6.408 6.48 16.824 0 23.256-6.504 6.432-17.016 6.432-23.496 0l-82.08-75.384z"});const nO=e=>{let t=e.svgRef,a=e.title,r=aO(e,["svgRef","title"]);return f.a.createElement("svg",tO({height:24,viewBox:"0 0 480 480",width:24,ref:t},r),a?f.a.createElement("title",null,a):null,rO)},oO=f.a.forwardRef((e,t)=>f.a.createElement(nO,tO({svgRef:t},e)));a.p,a(653);const cO=({postcode:e})=>f.a.createElement("div",{className:"shop-location--wrapper","data-theme":"dark-navy","data-testid":"shopping-in-panel"},f.a.createElement("button",{className:"shop-location--button","data-theme":"dark-navy",type:"button"},f.a.createElement("div",{className:"shop-location"},f.a.createElement("span",null,f.a.createElement(Te,{width:"21",height:"21"})," Shopping in"," ",f.a.createElement("span",{className:"shop-location--highlight"},e)))));cO.defaultProps={postcode:null};var sO=cO;const lO=()=>{const e=Object(E.c)(),t=Object(ea.l)().pathname,a=Object(Ln.useLastLocation)();Object(h.useEffect)(()=>{if(a){const r=a.pathname;r!==t&&e(bt(r))}},[e,a,t]);const r=Object(E.d)(Eb(t));return r?f.a.createElement("div",{className:"container container--padded-magic"},f.a.createElement(qy,{message:r})):null};var iO=a(135),uO=a.n(iO);const dO=({onClick:e,text:t})=>f.a.createElement("button",{type:"button",className:uO.a.button,role:"menuitem",onClick:e},t),mO=({isAuthenticated:e,onSignIn:t,onSignOut:a})=>f.a.createElement("div",{className:uO.a.container},f.a.createElement("div",{className:"container ".concat(uO.a.wrapper)},e?f.a.createElement(dO,{onClick:a,text:"Sign out"}):f.a.createElement(dO,{onClick:t,text:"Sign in"})));mO.defaultProps={isAuthenticated:!1,onSignIn:()=>null,onSignOut:()=>null};var pO=()=>{const e=Object(ea.k)().push,t=Ic().isAuthenticated,a=function(){var t=Object(vo.a)(go.a.mark((function t(){return go.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return gc(),t.abrupt("return",e(Uo.signOut));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return f.a.createElement(mO,{isAuthenticated:t,onSignIn:()=>(gc(),e(Uo.preSignIn)),onSignOut:a})};function hO(){return(hO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function fO(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var bO=f.a.createElement("defs",null,f.a.createElement("path",{id:"a",d:"M21.863 9.164a.745.745 0 0 0-.216-.177.55.55 0 0 0-.275-.078H18.86l-.01-.03c-.007-.02-.023-.03-.05-.03l-4.965-5.024.079-.284a1.223 1.223 0 0 0-.324-1.168A1.198 1.198 0 0 0 12.697 2c-.118 0-.239.016-.363.05a.98.98 0 0 0-.324.146.98.98 0 0 0-.324-.147A1.424 1.424 0 0 0 11.323 2c-.353 0-.651.124-.893.373s-.363.543-.363.883c0 .092.013.187.039.285l.078.284L5.16 8.91H2.648a.693.693 0 0 0-.275.059.448.448 0 0 0-.216.196.536.536 0 0 0-.137.255.638.638 0 0 0 0 .314l2.65 10.05c.025.117.097.218.215.303a.685.685 0 0 0 .412.128h13.425c.157 0 .295-.043.412-.128s.19-.186.216-.304L22 9.733c0-.105-.007-.21-.02-.314a.423.423 0 0 0-.117-.255zM11.264 4.512h.04-.04c.157 0 .288-.016.393-.049.104-.033.222-.082.353-.147a.98.98 0 0 0 .324.147c.124.033.245.05.363.05h.059l4.337 4.396H6.926zm2.63 9.421h-3.768v-3.768h3.768zm-5.025-3.768v3.768H4.473l-1.001-3.768zm-3.081 8.793l-1.001-3.769h4.082v3.769zm4.338 0v-3.769h3.768v3.769zm8.106 0H15.15v-3.769h4.083zm1.315-5.025H15.15v-3.768h5.398z"}),f.a.createElement("mask",{id:"b",fill:"#fff"},f.a.createElement("use",{fillRule:"evenodd",xlinkHref:"#a"}))),yO=f.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(-2 -2)"},f.a.createElement("use",{fill:"#000",xlinkHref:"#basket-p"}),f.a.createElement("g",{fill:"#f3f3f3",mask:"url(#b)"},f.a.createElement("path",{d:"M0 0h24v24H0z"})));const EO=e=>{let t=e.svgRef,a=e.title,r=fO(e,["svgRef","title"]);return f.a.createElement("svg",hO({height:18,width:18,viewBox:"0 0 21 21",ref:t},r),a?f.a.createElement("title",null,a):null,bO,yO)},gO=f.a.forwardRef((e,t)=>f.a.createElement(EO,hO({svgRef:t},e)));a.p;const vO=ne();var OO=()=>{const e=Object(E.d)(vO),t=Object(E.d)(K);return f.a.createElement("div",{className:"app-header--basket"},f.a.createElement(g.Link,{to:"/basket",className:"app-header--basket-link"},f.a.createElement("span",{className:"app-header--basket-value","data-testid":"basket-cost"},t?f.a.createElement(Ae,null):e),f.a.createElement("span",{className:"app-header--basket-icon-wrapper"},f.a.createElement(gO,{key:"basket-icon-svg",className:"app-header--basket-icon","data-testid":"go-to-basket"}))))},wO=a(314),kO=a.n(wO);function jO(){return(jO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _O(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var SO=f.a.createElement("path",{d:"m264 240-75.384-82.08c-6.432-6.48-6.432-16.968 0-23.472a16.34 16.34 0 0 1 23.256 0l91.92 93.792c6.432 6.504 6.432 17.016 0 23.496l-91.92 93.792c-6.408 6.528-16.824 6.48-23.256 0-6.432-6.456-6.432-16.968 0-23.472z"});const CO=e=>{let t=e.svgRef,a=e.title,r=_O(e,["svgRef","title"]);return f.a.createElement("svg",jO({height:24,viewBox:"0 0 480 480",width:24,ref:t},r),a?f.a.createElement("title",null,a):null,SO)},xO=f.a.forwardRef((e,t)=>f.a.createElement(CO,jO({svgRef:t},e)));a.p,a(659);var NO=({categories:e,toggleMenu:t,openCategory:a,selectedCategory:r})=>f.a.createElement("div",{className:"app-menu--container"},f.a.createElement("button",{className:"app-menu__close","aria-label":"Close menu",type:"button",onClick:t,onKeyPress:t}),f.a.createElement(kO.a,null,f.a.createElement("nav",{className:"container app-menu","data-testid":"category-menu",id:"app-menu-nav"},e.map(e=>f.a.createElement("div",{className:"app-menu--item",key:"container-".concat(e.id),"aria-expanded":r===e.id},f.a.createElement("button",{key:"button-".concat(e.id),className:"app-menu--link",onClick:()=>a(e.id),type:"button","aria-haspopup":"true","aria-pressed":"true"},f.a.createElement("span",{key:"span-".concat(e.id),className:"app-menu--link-label"},e.name),r===e.id?f.a.createElement(oO,{key:"svg-".concat(e.id),className:"app-menu--link-icon"}):f.a.createElement(eO,{key:"svg-".concat(e.id),className:"app-menu--link-icon"})),r===e.id?f.a.createElement("div",{className:"app-menu--subcategories",onClick:t,onKeyPress:t,role:"presentation"},e.subcategories.map(e=>f.a.createElement("div",{className:"app-menu--item",key:e.id},f.a.createElement(g.Link,{to:"/category/".concat(e.id),className:"app-menu--link"},f.a.createElement("span",{className:"app-menu--link-label"},e.name),f.a.createElement(xO,{className:"app-menu--link-icon"})))),f.a.createElement("div",{className:"app-menu--item"},f.a.createElement(g.Link,{to:"/category/".concat(e.id),className:"app-menu--link"},f.a.createElement("span",{className:"app-menu--link-label"},"View all"),f.a.createElement(xO,{className:"app-menu--link-icon"})))):null)))));function TO(){return(TO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function IO(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var AO=f.a.createElement("path",{clipRule:"evenodd",d:"m23.9 21.6c1.1-1.5 1.8-3.3 1.8-5.3 0-4.9-4-9-9-9s-9 4-9 9c0 4.9 4 9 9 9 1.5 0 2.9-.4 4.1-1l8.5 8.5 2.8-2.8zm-7.1.9c-3.4 0-6.2-2.8-6.2-6.2s2.8-6.2 6.2-6.2 6.2 2.8 6.2 6.2-2.8 6.2-6.2 6.2z",fillRule:"evenodd"});const RO=e=>{let t=e.svgRef,a=e.title,r=IO(e,["svgRef","title"]);return f.a.createElement("svg",TO({viewBox:"0 0 40 40",ref:t},r),a?f.a.createElement("title",null,a):null,AO)},PO=f.a.forwardRef((e,t)=>f.a.createElement(RO,TO({svgRef:t},e)));a.p;class FO extends h.Component{constructor(...e){super(...e),this.canBlur=!0,this.handleMouseDown=()=>{this.canBlur=!1},this.handleMouseUp=()=>{this.canBlur=!0},this.handleBlur=e=>{const t=this.props.onBlur;this.canBlur&&t(e)},this.handleKeyDown=e=>{const t=this.props.onBlur;"Escape"===e.key&&t(e)}}render(){const e=this.props;return(0,e.children)({onFocus:e.onFocus,onBlur:this.handleBlur,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyDown:this.handleKeyDown})}}FO.defaultProps={onBlur:()=>null,onFocus:()=>null};var LO=FO;const DO=({errors:e})=>sl()(e)?null:f.a.createElement("ul",{className:"app-search--errors"},e.map(e=>f.a.createElement("li",{key:e},e)));DO.defaultProps={errors:[]};var BO=DO;const MO=e=>{let t=e.searchTerm,a=e.products,r=e.categories,n=e.relatedTerms,o=e.isFetching,c=e.closeSuggestions,s=Object(ol.a)(e,["searchTerm","products","categories","relatedTerms","isFetching","closeSuggestions"]);if(o)return null;const l=!o&&!(""===t)&&sl()(a)&&sl()(r)&&sl()(n),i=l?f.a.createElement("li",{key:"search-error",className:"app-search--results--error"},"Sorry, but we could not find any products matching your search terms."):null,u=sl()(a)?null:a.map(({id:e,name:t,imageUrl:a,price:r})=>f.a.createElement(g.Link,{to:hl(e),className:"app-search--results--product",key:e,tabIndex:0,onClick:c},f.a.createElement("span",{className:"product-img"},f.a.createElement("img",{src:a,alt:t,width:"24",height:"24"})),f.a.createElement("span",{className:"product-label"},t),f.a.createElement("span",{className:"product-price"},Y(r)))),d=sl()(r)?null:r.map(({id:e,name:t})=>f.a.createElement(g.Link,{to:fl(e),className:"app-search--results--item",key:e,tabIndex:0,onClick:c},"View all ".concat(t))),m=(sl()(n)||n.map(e=>f.a.createElement(g.Link,{className:"app-search--results--item",key:e,to:"/search?term=".concat(encodeURI(e)),tabIndex:0,onClick:c},f.a.createElement("span",null,e))),l||""===t?null:f.a.createElement(g.Link,{to:"/search?term=".concat(encodeURI(t)),tabIndex:0,className:"app-search--results--item",key:t,onClick:c},"View all results"));return o?null:!l&&f.a.createElement("div",{className:"app-search--results"},f.a.createElement("div",Object.assign({className:"app-search--results-wrapper","data-testid":"search-suggestions"},s),[i,u,d,m]))};MO.defaultProps={searchTerm:"",products:[],categories:[],relatedTerms:[],bind:null};var UO=MO;a(660);class HO extends h.Component{constructor(e){super(e),this.state={isResultsListOpen:!1},this.onTermChange=this.onTermChange.bind(this),this.onSubmitQuery=this.onSubmitQuery.bind(this)}onTermChange(e){const t=e.target.value,a=this.props,r=a.searchAction,n=a.clearSearch;""===t&&n(),""!==t&&r(t)}onSubmitQuery(e){const t=this.props,a=t.searchTerm,r=t.history;e.preventDefault(),r.push({pathname:"/search",search:"?term=".concat(encodeURI(a))}),this.setState({isResultsListOpen:!1})}render(){const e=this.props,t=e.searchTerm,a=e.products,r=e.categories,n=e.relatedTerms,o=e.isFetching,c=e.errors,s=e.clearSearch,l=this.state.isResultsListOpen;return f.a.createElement(LO,{onFocus:()=>this.setState({isResultsListOpen:!0}),onBlur:()=>this.setState({isResultsListOpen:!1})},e=>f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"app-search--box-wrapper"},f.a.createElement("form",{className:"app-search--box",onSubmit:this.onSubmitQuery},f.a.createElement("div",{className:"app-search--box--input"},f.a.createElement("input",Object.assign({className:"form-input",type:"search",name:"search",autoComplete:"off",autoCapitalize:"none",autoCorrect:"off",placeholder:"Search for groceries","data-testid":"search-input",value:t,onChange:this.onTermChange},e)),""!==t?f.a.createElement("button",{className:"app-search--box--clear",type:"reset",onClick:s,"data-testid":"search-reset"},f.a.createElement(XE,{width:"21",height:"21"})):null),f.a.createElement("button",{className:"app-search--box--submit",type:"submit","data-testid":"search-submit"},o?f.a.createElement(Ae,{width:"24",height:"24"}):f.a.createElement(PO,{width:"32",height:"32"})))),l&&f.a.createElement(UO,Object.assign({searchTerm:t,products:a,categories:r,relatedTerms:n,isFetching:o,closeSuggestions:()=>this.setState({isResultsListOpen:!1})},e)),f.a.createElement(BO,{errors:c})))}}HO.defaultProps={searchTerm:"",products:[],categories:[],relatedTerms:[],errors:[],history:{}};var VO=HO;a(661);function qO(e){const t=!e.menuOpen,a=t?e.selectedCategory:"not-an-id";return Object(D.a)({},e,{menuOpen:t,selectedCategory:a})}class GO extends h.Component{constructor(e){super(e),this.state={menuOpen:!1,selectedCategory:"not-an-id"}}componentDidMount(){if(this.props.menu.needsCategories){const e=this.props;(0,e.loadCategories)(e.storeId)}}render(){const e=this.props,t=(e.basketTotal,e.menu),a=t.categories,r=t.isFetchingCategories,n=e.postcode,o=e.showShoppingInPanel,c=Object(ol.a)(e,["basketTotal","menu","postcode","showShoppingInPanel"]),s=this.state,l=s.menuOpen,i=s.selectedCategory;return f.a.createElement(f.a.Fragment,null,f.a.createElement("header",{role:"banner",className:"app-header"},na()?f.a.createElement(pO,null):null,f.a.createElement("div",{className:"container app-header--container"},f.a.createElement(g.Link,{to:"/",className:"app-header--link"},f.a.createElement(nt,{key:"coop-logo-svg",className:"app-header--logo",alt:"logo","data-testid":"homepage-link"})),f.a.createElement("div",{className:"app-header--menu"},f.a.createElement("button",{type:"button",className:"app-header--menu-link",onClick:()=>this.setState(qO)},"Browse",l?f.a.createElement(oO,{key:"nav-icon-up",className:"app-header--menu-link-icon","aria-label":"Hide menu"}):f.a.createElement(eO,{key:"nav-icon-down",className:"app-header--menu-link-icon","aria-label":"Show menu"}))),f.a.createElement(OO,null)),l&&!r?f.a.createElement(NO,{categories:a,selectedCategory:i,openCategory:e=>this.setState(function(e){return t=>t.selectedCategory===e?Object(D.a)({},t,{selectedCategory:"not-an-id"}):Object(D.a)({},t,{selectedCategory:e})}(e)),toggleMenu:()=>this.setState(qO)}):null,f.a.createElement("div",{className:"container app-search--container"},f.a.createElement(VO,Object.assign({history:c.history},c.search)))),o?f.a.createElement(sO,{postcode:n}):null,na()?f.a.createElement(lO,null):null)}}GO.defaultProps={postcode:null};var WO=GO;var zO=Object(E.b)(e=>{const t=r.formattedBasketTotal()(e),a=xa()(e).categories;return{basketTotal:t,menu:{categories:_a(e),isFetchingCategories:Ea(e),needsCategories:Oa()(e)},search:{products:Na(e),categories:a,relatedTerms:e.search.relatedTerms,searchTerm:e.search.term||"",isFetching:Sa(e),errors:e.search.errors},postcode:be(e),storeId:hn(e),showShoppingInPanel:!(!be(e)||pn(e))}},e=>({loadCategories:t=>e(d.loadCategories(t)),searchAction:t=>e(p.search(t)),clearSearch:()=>e(p.clearSearch())}),(e,t)=>{let a=t.searchAction,r=t.clearSearch,n=Object(ol.a)(t,["searchAction","clearSearch"]);return Object(D.a)({},e,{},n,{search:Object(D.a)({},e.search,{searchAction:a,clearSearch:r})})})(Object(ea.o)(WO)),YO=a(52),KO=a.n(YO);const QO=({title:e,children:t,severity:a,removeHandler:r})=>{const n={wrapper:Ye()(KO.a.wrapper,KO.a[a.toLowerCase()]),button:Ye()(KO.a.button,KO.a.dismiss)};return f.a.createElement("div",{className:n.wrapper,"data-testid":"ui-notification"},f.a.createElement("div",{className:KO.a.container},e&&f.a.createElement("h4",{className:KO.a.title},e),f.a.createElement("div",{className:KO.a.content},t),f.a.createElement("button",{type:"button",className:n.button,"data-testid":"ui-notification-dismiss",onClick:r,"aria-label":"Close message"},f.a.createElement(XE,{key:"remove-icon-svg",className:KO.a.dismissicon,"data-testid":"close-page"}))))};QO.defaultProps={title:void 0};var ZO=QO;var JO=()=>{const e=Object(E.c)(),t=Object(E.d)(({messages:e})=>({message:m.getNonMajorMessageSelector()({messages:e})})).message;return f.a.createElement(f.a.Fragment,null,!sl()(t)&&f.a.createElement(ZO,{title:t.title,severity:t.severity,removeHandler:()=>{return e((a=t.severity,n.removeMessage(a)));var a}},t.content))};const XO=e=>{let t=e.component,a=e.feedback,r=e.header,n=e.hasFooter,o=e.footerProps,c=Object(ol.a)(e,["component","feedback","header","hasFooter","footerProps"]);return Wv(a),f.a.createElement(ea.d,Object.assign({},c,{render:e=>f.a.createElement(f.a.Fragment,null,r?f.a.createElement(r,null):f.a.createElement(zO,null),f.a.createElement(JO,null),f.a.createElement(t,e),n?f.a.createElement(Qv,o):null)}))};XO.defaultProps={feedback:!0,footerProps:null,hasFooter:!0,header:null};var $O=qv(XO);const ew=e=>f.a.createElement($O,Object.assign({header:ag,hasFooter:!1},e)),tw=e=>f.a.createElement($O,Object.assign({header:ag,footerProps:{hasFulfilmentLinks:!1}},e)),aw=e=>f.a.createElement($O,Object.assign({header:YE,hasFooter:!1,feedback:!1},e)),rw=e=>f.a.createElement($O,Object.assign({hasFooter:!1},e));var nw=()=>(qn(),bo(),yo(),f.a.createElement(Ln.LastLocationProvider,null,f.a.createElement(ea.g,null,f.a.createElement($O,{exact:!0,path:"/",component:WE}),f.a.createElement($O,{path:"/product/:id",component:Rv}),f.a.createElement($O,{path:"/category/:id",component:_h}),f.a.createElement($O,{path:"/search",component:Hv}),f.a.createElement(rw,{path:"/basket",component:oh}),f.a.createElement(ew,{path:"/collection",component:Tg}),f.a.createElement(ew,{exact:!0,path:"/delivery",component:Fg}),f.a.createElement(ew,{exact:!0,path:"/delivery/:date/:slotId",component:Dg}),f.a.createElement(aw,{path:"/checkout",component:tE}),f.a.createElement(aw,{path:"/payment",component:av}),f.a.createElement(aw,{path:"/payment-status",component:mv}),f.a.createElement(aw,{path:"/order-complete",component:cg,hasFooter:!0,footerProps:{hasFulfilmentLinks:!1}}),f.a.createElement(tw,{path:"/contact",component:rE}),f.a.createElement(tw,{path:"/help/deliveries-collections-refunds",component:nE}),f.a.createElement(tw,{path:"/terms-of-service",component:sE}),f.a.createElement(tw,{path:"/privacy",component:oE}),f.a.createElement(tw,{path:"/customer-accounts",component:cE}),na()?f.a.createElement(aw,{exact:!0,path:Uo.preSignIn,component:Qc}):null,na()?f.a.createElement($O,{exact:!0,path:Uo.postSignIn,component:Kc,hasFooter:!1}):null,na()?f.a.createElement($O,{exact:!0,path:Uo.signOut,component:Jc,hasFooter:!1}):null,f.a.createElement($O,{component:Bg}),";")));class ow extends f.a.Component{componentDidUpdate(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}render(){return this.props.children}}var cw=Object(ea.o)(ow);var sw=({router:e=g.BrowserRouter,history:t})=>{const a=Object(E.d)(C);return f.a.createElement(e,{history:t},f.a.createElement(cw,null,a?f.a.createElement($t,null):f.a.createElement(nw,null),f.a.createElement(Fn,null),f.a.createElement($e,null)))};const lw=f.a.createContext();function iw(e){const t=Mc(),a=Object(Oo.d)({deferFn:Oc}),r=a.isFulfilled,n=a.isPending,o=a.isLoading,c=a.run;return Object(h.useEffect)(()=>{na()&&!0!==_o.session(Ho)&&(_o.session(Ho,!0),c(t))},[t,c]),n||o||r?f.a.createElement(f.a.Fragment,null,f.a.createElement(YE,{withoutLink:!0}),f.a.createElement(Wc,{status:"working"},f.a.createElement("p",null,"Loading"))):f.a.createElement(lw.Provider,e)}lw.displayName="AutoSignInContext";const uw=()=>{const e=Ic(),t=e.isAuthenticated,a=e.setTokens,r=e.tokens,n=Fc(),o=n.user,c=n.setUser;return Object(h.useEffect)(()=>{const e=()=>{t&&(({tokens:e,user:t})=>{_o.session(Vo,{tokens:e,user:t})})({tokens:r,user:o})},n=()=>{if("interactive"===document.readyState){const e=(()=>{const e=_o.session(Vo);return _o.session.remove(Vo),e})();if(e){const t=e.tokens,r=e.user;t&&r&&(a(t),c(r))}}};return window.addEventListener("beforeunload",e),document.addEventListener("readystatechange",n),()=>{window.removeEventListener("beforeunload",e),document.removeEventListener("readystatechange",n)}},[t,c,a,r,o]),null},dw=gy(),mw=ib();function pw({children:e}){return f.a.createElement(E.a,{store:dw},f.a.createElement(Bc,{logger:mw},f.a.createElement(iw,null,f.a.createElement(Tc,null,f.a.createElement(Pc,null,f.a.createElement(uw,null),e)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(662),a(663);y.a.render(f.a.createElement(pw,null,f.a.createElement(sw,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},69:function(e,t,a){e.exports={orange:"AlertCard_orange__2qdsi",lemon:"AlertCard_lemon__1BBxy",container:"AlertCard_container__wsJRn",card:"AlertCard_card__1xIna",squircle:"AlertCard_squircle__1PlnU",content:"AlertCard_content__756nD",title:"AlertCard_title__jTjqp"}},80:function(e,t,a){e.exports={transition:"Transition_transition__2CSzI",icon:"Transition_icon__nKene",background:"Transition_background__23w4l",children:"Transition_children__3RaGR",working:"Transition_working__2QNaU",clockwise:"Transition_clockwise__2m73L",failed:"Transition_failed__2cPXR"}},92:function(e,t,a){}},[[321,1,2]]]);
//# sourceMappingURL=main.81808870.chunk.js.map